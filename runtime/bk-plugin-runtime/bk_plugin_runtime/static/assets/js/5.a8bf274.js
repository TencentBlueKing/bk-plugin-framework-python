(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0gum":function(e,t,r){},"2mmY":function(e,t,r){"use strict";r("tqn9")},"6aoH":function(e,t,r){},ARuS:function(e,t,r){"use strict";r.r(t);var a=r("BNw5"),n=r("ra2B");for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("KATY");var i=r("KHd+"),s=Object(i.a)(n.default,a.a,a.b,!1,null,"20e37f9e",null);t.default=s.exports},BNw5:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"full-code-editor",class:{"full-status":e.isFullScreen}},[e.isFull?t("div",{staticClass:"tool-area"},[t("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:{boundary:"window",content:e.isFullScreen?"退出":"全屏"},expression:"{\n                boundary: 'window',\n                content: isFullScreen ? '退出' : '全屏'\n            }"}],staticClass:"bk-icon zoom-icon",class:e.isFullScreen?"icon-un-full-screen":"icon-full-screen",on:{click:e.onToggleFullScreen}})]):e._e(),e._v(" "),t("code-editor",{key:e.editKey,attrs:{value:e.value,options:{readOnly:!0,language:"javascript"}}})],1)},n=[];a._withStripped=!0},BaUt:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"plugin-debug-panel"},[t("p",{staticClass:"debug-panel-version"},[e._v(e._s("bk-plugin-debug-panel: v"+e.pluginVersion))]),e._v(" "),t("div",{staticClass:"storage-wrap"},[t("bk-select",{staticStyle:{width:"250px"},attrs:{disabled:e.executeLoading,clearable:!1,placeholder:"请选择版本"},on:{change:e.handleVersionChange},model:{value:e.selectVersion,callback:function(t){e.selectVersion=t},expression:"selectVersion"}},e._l(e.versionList,(function(e,r){return t("bk-option",{key:r,attrs:{id:e,name:e}})})),1),e._v(" "),t("p",{staticClass:"label"},[e._v("页面刷新时是否保留表单数据")]),e._v(" "),t("bk-radio-group",{on:{change:e.handleRadioChange},model:{value:e.radioData,callback:function(t){e.radioData=t},expression:"radioData"}},[t("bk-radio",{attrs:{value:!0}},[e._v("是")]),e._v(" "),t("bk-radio",{attrs:{value:!1}},[e._v("否")])],1)],1),e._v(" "),t("section",{staticClass:"content-wrapper"},[t("div",{staticClass:"left-content"},[t("div",{staticClass:"scroll-wrapper"},[t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading: isLoading }"}],staticClass:"left-content-top"},["renderform"===e.formMode&&e.renderConfig&&Object.values(e.renderConfig).length?[t("render-form",{key:e.renderKey,ref:"renderForm",attrs:{scheme:e.renderConfig,"form-option":e.renderOption},model:{value:e.renderData,callback:function(t){e.renderData=t},expression:"renderData"}})]:"bkuiform"===e.formMode?t("bkui-form",{attrs:{"form-type":"horizontal",schema:e.inputSchema,layout:[],context:e.contextObj},model:{value:e.inputFormData,callback:function(t){e.inputFormData=t},expression:"inputFormData"}}):t("bk-exception",{attrs:{type:"empty",scene:"part"}})],2),e._v(" "),t("ul",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading: isLoading }"}],staticClass:"left-content-bottom"},[Object.values(e.contextData).length?e._l(Object.values(e.contextData),(function(r,a){return t("li",{key:a,staticClass:"context-form-item"},[t("label",[e._v(e._s(r.title+"："))]),e._v(" "),t("bk-input",{attrs:{disabled:e.executeLoading,type:r.type,placeholder:r.description},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"context.value"}})],1)})):t("bk-exception",{attrs:{type:"empty",scene:"part"}})],2)]),e._v(" "),t("bk-button",{attrs:{"ext-cls":"execution-btn",loading:e.executeLoading,disabled:e.isLoading,theme:"primary"},on:{click:e.handleExecutionPlugin}},[e._v("\n                执行\n            ")])],1),e._v(" "),t("div",{staticClass:"right-content"},[t("ul",{staticClass:"right-content-top"},e._l(e.executionInfo,(function(r,a){return t("li",{key:a,staticClass:"execution-info-item"},[t("label",[e._v(e._s(r.label+"："))]),e._v(" "),"outputs"===r.type?[t("full-code-editor",{staticClass:"output-edit",attrs:{"is-full":!1,value:r.value}})]:t("span",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"info-desc"},[e._v(e._s(r.value||"--"))])],2)})),0),e._v(" "),t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.logLoading},expression:"{ isLoading: logLoading }"}],staticClass:"right-content-bottom"},[e.logInfo?t("full-code-editor",{attrs:{value:e.logInfo}}):t("bk-exception",{attrs:{type:"empty",scene:"part"}})],1)])])])},n=[];a._withStripped=!0},C6tm:function(e,t,r){"use strict";r.r(t);var a=r("P+p4"),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},JtHA:function(e,t,r){},KATY:function(e,t,r){"use strict";r("USlD")},KV7u:function(e,t,r){"use strict";r("0gum")},"P+p4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=r("P2sY"),o=(a=n)&&a.__esModule?a:{default:a},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r("wsa1"));var s={language:"javascript",theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same"};t.default={name:"CodeEditor",props:{value:{type:String,default:""},options:{type:Object,default:function(){return{}}}},data:function(){return{editorOptions:(0,o.default)({},s,this.options,{value:this.value}),monacoInstance:null}},watch:{value:function(e){e!==this.monacoInstance.getValue()&&this.monacoInstance.setValue(e)},options:{deep:!0,handler:function(e){this.editorOptions=(0,o.default)({},s,e,{value:this.value}),this.updateOptions()}}},mounted:function(){this.initIntance()},beforeDestroy:function(){this.monacoInstance&&this.monacoInstance.dispose()},methods:{initIntance:function(){var e=this;this.monacoInstance=i.editor.create(this.$el,this.editorOptions);var t=this.monacoInstance.getModel();if(t.setEOL(0),this.value.indexOf("\r\n")>-1){var r=document.createElement("textarea");r.value=this.value,this.$emit("input",r.value)}t.onDidChangeContent((function(t){var r=e.monacoInstance.getValue();e.$emit("input",r)})),this.monacoInstance.addCommand(i.KeyMod.CtrlCmd|i.KeyCode.KEY_S,(function(){var t=e.monacoInstance.getValue();e.$emit("saveContent",t)}))},updateOptions:function(){this.monacoInstance.updateOptions(this.editorOptions)}}}},Rfx2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=r("hk/f"),o=(a=n)&&a.__esModule?a:{default:a};t.default={name:"FullCodeEditor",components:{CodeEditor:o.default},props:{value:String,isFull:{type:Boolean,default:!0}},data:function(){return{editKey:0,isFullScreen:!1}},beforeDestroy:function(){document.body.removeEventListener("keyup",this.handleQuick,!1)},methods:{onToggleFullScreen:function(){this.isFullScreen=!this.isFullScreen,this.editKey=(new Date).getTime(),this.isFullScreen?(document.body.addEventListener("keyup",this.handleQuick,!1),this.$bkMessage({message:"按 Esc 即可退出全屏模式",limit:1,delay:3e3})):document.body.removeEventListener("keyup",this.handleQuick,!1)},handleQuick:function(e){27===e.keyCode&&(this.editKey=(new Date).getTime(),this.isFullScreen=!1)}}}},USlD:function(e,t,r){},XPlO:function(module,exports,__webpack_require__){"use strict";(function(global){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_asyncToGenerator3=__webpack_require__("D3Ub"),_asyncToGenerator4=_interopRequireDefault(_asyncToGenerator3),_fromCodePoint=__webpack_require__("nQSU"),_fromCodePoint2=_interopRequireDefault(_fromCodePoint),_isIterable2=__webpack_require__("k/8l"),_isIterable3=_interopRequireDefault(_isIterable2),_getIterator2=__webpack_require__("FyfS"),_getIterator3=_interopRequireDefault(_getIterator2),_slicedToArray3=__webpack_require__("sk9p"),_slicedToArray4=_interopRequireDefault(_slicedToArray3),_set=__webpack_require__("jWXv"),_set2=_interopRequireDefault(_set),_get2=__webpack_require__("tfYw"),_get3=_interopRequireDefault(_get2),_extends3=__webpack_require__("QbLZ"),_extends4=_interopRequireDefault(_extends3),_taggedTemplateLiteral2=__webpack_require__("CSPP"),_taggedTemplateLiteral3=_interopRequireDefault(_taggedTemplateLiteral2),_toConsumableArray3=__webpack_require__("m1cH"),_toConsumableArray4=_interopRequireDefault(_toConsumableArray3),_defineProperty3=__webpack_require__("YEIV"),_defineProperty4=_interopRequireDefault(_defineProperty3),_getPrototypeOf=__webpack_require__("Yz+Y"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_createClass3=__webpack_require__("V7oC"),_createClass4=_interopRequireDefault(_createClass3),_possibleConstructorReturn2=__webpack_require__("FYw3"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__("mRg0"),_inherits3=_interopRequireDefault(_inherits2),_classCallCheck3=__webpack_require__("iCc5"),_classCallCheck4=_interopRequireDefault(_classCallCheck3),_regenerator=__webpack_require__("14Xm"),_regenerator2=_interopRequireDefault(_regenerator),_get4=__webpack_require__("N2Oo"),_get5=_interopRequireDefault(_get4),_has=__webpack_require__("X8yN"),_has2=_interopRequireDefault(_has),_entries=__webpack_require__("oF3Q"),_entries2=_interopRequireDefault(_entries),_map=__webpack_require__("ODRq"),_map2=_interopRequireDefault(_map),_assign=__webpack_require__("P2sY"),_assign2=_interopRequireDefault(_assign),_stringify=__webpack_require__("gDS+"),_stringify2=_interopRequireDefault(_stringify),_from=__webpack_require__("rfXi"),_from2=_interopRequireDefault(_from),_promise=__webpack_require__("4d7F"),_promise2=_interopRequireDefault(_promise),_iterator23=__webpack_require__("F+2o"),_iterator24=_interopRequireDefault(_iterator23),_symbol=__webpack_require__("+JPL"),_symbol2=_interopRequireDefault(_symbol),_defineProperties2=__webpack_require__("io0T"),_defineProperties3=_interopRequireDefault(_defineProperties2),_getOwnPropertyDescriptors=__webpack_require__("xZck"),_getOwnPropertyDescriptors2=_interopRequireDefault(_getOwnPropertyDescriptors),_getOwnPropertySymbols=__webpack_require__("nLf9"),_getOwnPropertySymbols2=_interopRequireDefault(_getOwnPropertySymbols),_freeze=__webpack_require__("Dbz9"),_freeze2=_interopRequireDefault(_freeze),_defineProperty5=__webpack_require__("SEkw"),_defineProperty6=_interopRequireDefault(_defineProperty5),_getOwnPropertyDescriptor=__webpack_require__("JO7F"),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_keys=__webpack_require__("GQeE"),_keys2=_interopRequireDefault(_keys),_create=__webpack_require__("AyUB"),_create2=_interopRequireDefault(_create),_typeof3=__webpack_require__("EJiy"),_typeof4=_interopRequireDefault(_typeof3),_templateObject=(0,_taggedTemplateLiteral3.default)(["","",""],["","",""]),_templateObject2=(0,_taggedTemplateLiteral3.default)(["[","]"],["[","]"]),_templateObject3=(0,_taggedTemplateLiteral3.default)([".","[","]"],[".","[","]"]),_templateObject4=(0,_taggedTemplateLiteral3.default)(["\n"],["\\n"]),_templateObject5=(0,_taggedTemplateLiteral3.default)(["",""," "," = ",";",""],["",""," "," = ",";",""]),_templateObject6=(0,_taggedTemplateLiteral3.default)(["","","",""],["","","",""]),_templateObject7=(0,_taggedTemplateLiteral3.default)(["!",""],["!",""]),_templateObject8=(0,_taggedTemplateLiteral3.default)(["",".length"],["",".length"]),_templateObject9=(0,_taggedTemplateLiteral3.default)(["","[","]"],["","[","]"]),_templateObject10=(0,_taggedTemplateLiteral3.default)(["Object.keys(",")"],["Object.keys(",")"]),_templateObject11=(0,_taggedTemplateLiteral3.default)([""," "," ",""],[""," "," ",""]),_templateObject12=(0,_taggedTemplateLiteral3.default)(["(",")"],["(",")"]),_templateObject13=(0,_taggedTemplateLiteral3.default)(["{}"],["{}"]),_templateObject14=(0,_taggedTemplateLiteral3.default)(["",""],["",""]),_templateObject15=(0,_taggedTemplateLiteral3.default)([""," !== true && "," !== undefined"],[""," !== true && "," !== undefined"]),_templateObject16=(0,_taggedTemplateLiteral3.default)([""," === true"],[""," === true"]),_templateObject17=(0,_taggedTemplateLiteral3.default)([""," || {}"],[""," || {}"]),_templateObject18=(0,_taggedTemplateLiteral3.default)(["Object.assign(",", ",")"],["Object.assign(",", ",")"]),_templateObject19=(0,_taggedTemplateLiteral3.default)([""," !== true"],[""," !== true"]),_templateObject20=(0,_taggedTemplateLiteral3.default)([""," === true ? true : "," > "," ? "," : ",""],[""," === true ? true : "," > "," ? "," : ",""]),_templateObject21=(0,_taggedTemplateLiteral3.default)([""," > "," ? "," : ",""],[""," > "," ? "," : ",""]),_templateObject22=(0,_taggedTemplateLiteral3.default)(['"[" + ',' + "]"'],['"[" + ',' + "]"']),_templateObject23=(0,_taggedTemplateLiteral3.default)(['"[\'" + ',' + "\']"'],['"[\'" + ',' + "\']"']),_templateObject24=(0,_taggedTemplateLiteral3.default)(['"/" + ',""],['"/" + ',""]),_templateObject25=(0,_taggedTemplateLiteral3.default)(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")']),_templateObject26=(0,_taggedTemplateLiteral3.default)([""," === null"],[""," === null"]),_templateObject27=(0,_taggedTemplateLiteral3.default)(["",".push(",")"],["",".push(",")"]),_templateObject28=(0,_taggedTemplateLiteral3.default)(["","++"],["","++"]),_templateObject29=(0,_taggedTemplateLiteral3.default)(["new ","(",")"],["new ","(",")"]),_templateObject30=(0,_taggedTemplateLiteral3.default)(["",".errors"],["",".errors"]),_templateObject31=(0,_taggedTemplateLiteral3.default)(['must pass "','" keyword validation'],['must pass "','" keyword validation']),_templateObject32=(0,_taggedTemplateLiteral3.default)(['"','" keyword must be '," ($data)"],['"','" keyword must be '," ($data)"]),_templateObject33=(0,_taggedTemplateLiteral3.default)(['"','" keyword is invalid ($data)'],['"','" keyword is invalid ($data)']),_templateObject34=(0,_taggedTemplateLiteral3.default)([""," !== null"],[""," !== null"]),_templateObject35=(0,_taggedTemplateLiteral3.default)(["",".instancePath === undefined"],["",".instancePath === undefined"]),_templateObject36=(0,_taggedTemplateLiteral3.default)(["",".instancePath"],["",".instancePath"]),_templateObject37=(0,_taggedTemplateLiteral3.default)(["",".schemaPath"],["",".schemaPath"]),_templateObject38=(0,_taggedTemplateLiteral3.default)(["","/",""],["","/",""]),_templateObject39=(0,_taggedTemplateLiteral3.default)(["",".schema"],["",".schema"]),_templateObject40=(0,_taggedTemplateLiteral3.default)(["",".data"],["",".data"]),_templateObject41=(0,_taggedTemplateLiteral3.default)(["typeof ",""],["typeof ",""]),_templateObject42=(0,_taggedTemplateLiteral3.default)(["undefined"],["undefined"]),_templateObject43=(0,_taggedTemplateLiteral3.default)([""," == 'object' && Array.isArray(",") && ",".length == 1"],[""," == 'object' && Array.isArray(",") && ",".length == 1"]),_templateObject44=(0,_taggedTemplateLiteral3.default)(["","[0]"],["","[0]"]),_templateObject45=(0,_taggedTemplateLiteral3.default)([""," !== undefined"],[""," !== undefined"]),_templateObject46=(0,_taggedTemplateLiteral3.default)(["",' == "number" || ',' == "boolean"'],["",' == "number" || ',' == "boolean"']),_templateObject47=(0,_taggedTemplateLiteral3.default)(['"" + ',""],['"" + ',""]),_templateObject48=(0,_taggedTemplateLiteral3.default)(['""'],['""']),_templateObject49=(0,_taggedTemplateLiteral3.default)(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"],["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"]),_templateObject50=(0,_taggedTemplateLiteral3.default)(["+",""],["+",""]),_templateObject51=(0,_taggedTemplateLiteral3.default)(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"],["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"]),_templateObject52=(0,_taggedTemplateLiteral3.default)(["",' === "false" || '," === 0 || "," === null"],["",' === "false" || '," === 0 || "," === null"]),_templateObject53=(0,_taggedTemplateLiteral3.default)(["",' === "true" || '," === 1"],["",' === "true" || '," === 1"]),_templateObject54=(0,_taggedTemplateLiteral3.default)(["",' === "" || '," === 0 || "," === false"],["",' === "" || '," === 0 || "," === false"]),_templateObject55=(0,_taggedTemplateLiteral3.default)(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"],["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"]),_templateObject56=(0,_taggedTemplateLiteral3.default)([""," "," null"],[""," "," null"]),_templateObject57=(0,_taggedTemplateLiteral3.default)(["Array.isArray(",")"],["Array.isArray(",")"]),_templateObject58=(0,_taggedTemplateLiteral3.default)([""," && typeof ",' == "object" && !Array.isArray(',")"],[""," && typeof ",' == "object" && !Array.isArray(',")"]),_templateObject59=(0,_taggedTemplateLiteral3.default)(["!("," % 1) && !isNaN(",")"],["!("," % 1) && !isNaN(",")"]),_templateObject60=(0,_taggedTemplateLiteral3.default)(["typeof "," "," ",""],["typeof "," "," ",""]),_templateObject61=(0,_taggedTemplateLiteral3.default)(["typeof ",' == "number"'],["typeof ",' == "number"']),_templateObject62=(0,_taggedTemplateLiteral3.default)(["isFinite(",")"],["isFinite(",")"]),_templateObject63=(0,_taggedTemplateLiteral3.default)(["typeof ",' != "object"'],["typeof ",' != "object"']),_templateObject64=(0,_taggedTemplateLiteral3.default)(["!"," || ",""],["!"," || ",""]),_templateObject65=(0,_taggedTemplateLiteral3.default)(["{type: ","}"],["{type: ","}"]),_templateObject66=(0,_taggedTemplateLiteral3.default)([""," === undefined"],[""," === undefined"]),_templateObject67=(0,_taggedTemplateLiteral3.default)([""," || "," === null || ",' === ""'],[""," || "," === null || ",' === ""']),_templateObject68=(0,_taggedTemplateLiteral3.default)([""," = ",""],[""," = ",""]),_templateObject69=(0,_taggedTemplateLiteral3.default)(["Object.prototype.hasOwnProperty"],["Object.prototype.hasOwnProperty"]),_templateObject70=(0,_taggedTemplateLiteral3.default)(["",".call(",", ",")"],["",".call(",", ",")"]),_templateObject71=(0,_taggedTemplateLiteral3.default)(["",""," !== undefined"],["",""," !== undefined"]),_templateObject72=(0,_taggedTemplateLiteral3.default)([""," && ",""],[""," && ",""]),_templateObject73=(0,_taggedTemplateLiteral3.default)(["",""," === undefined"],["",""," === undefined"]),_templateObject74=(0,_taggedTemplateLiteral3.default)(["",", ",", ","",""],["",", ",", ","",""]),_templateObject75=(0,_taggedTemplateLiteral3.default)(["",", ",""],["",", ",""]),_templateObject76=(0,_taggedTemplateLiteral3.default)(["","(",")"],["","(",")"]),_templateObject77=(0,_taggedTemplateLiteral3.default)(["new RegExp"],["new RegExp"]),_templateObject78=(0,_taggedTemplateLiteral3.default)(["","(",", ",")"],["","(",", ",")"]),_templateObject79=(0,_taggedTemplateLiteral3.default)([""," || ",""],[""," || ",""]),_templateObject80=(0,_taggedTemplateLiteral3.default)(["await "],["await "]),_templateObject81=(0,_taggedTemplateLiteral3.default)([""," instanceof ",""],[""," instanceof ",""]),_templateObject82=(0,_taggedTemplateLiteral3.default)([""," === null ? "," : ",".concat(",")"],[""," === null ? "," : ",".concat(",")"]),_templateObject83=(0,_taggedTemplateLiteral3.default)(['"use strict"; ',""],['"use strict"; ',""]),_templateObject84=(0,_taggedTemplateLiteral3.default)(["{",'="", ',", ",", ","=","","}={}"],["{",'="", ',", ",", ","=","","}={}"]),_templateObject85=(0,_taggedTemplateLiteral3.default)([", ","={}"],[", ","={}"]),_templateObject86=(0,_taggedTemplateLiteral3.default)(["",".",""],["",".",""]),_templateObject87=(0,_taggedTemplateLiteral3.default)(["",".evaluated"],["",".evaluated"]),_templateObject88=(0,_taggedTemplateLiteral3.default)(["",".dynamicProps"],["",".dynamicProps"]),_templateObject89=(0,_taggedTemplateLiteral3.default)(["",".props"],["",".props"]),_templateObject90=(0,_taggedTemplateLiteral3.default)(["",".dynamicItems"],["",".dynamicItems"]),_templateObject91=(0,_taggedTemplateLiteral3.default)(["",".items"],["",".items"]),_templateObject92=(0,_taggedTemplateLiteral3.default)(["/*# sourceURL="," */"],["/*# sourceURL="," */"]),_templateObject93=(0,_taggedTemplateLiteral3.default)([""," === ",""],[""," === ",""]),_templateObject94=(0,_taggedTemplateLiteral3.default)(["",".logger.log(",")"],["",".logger.log(",")"]),_templateObject95=(0,_taggedTemplateLiteral3.default)(["","/$comment"],["","/$comment"]),_templateObject96=(0,_taggedTemplateLiteral3.default)(["",".opts.$comment(",", ",", ",".schema)"],["",".opts.$comment(",", ",", ",".schema)"]),_templateObject97=(0,_taggedTemplateLiteral3.default)([""," === 0"],[""," === 0"]),_templateObject98=(0,_taggedTemplateLiteral3.default)([""," !== undefined && (",")"],[""," !== undefined && (",")"]),_templateObject99=(0,_taggedTemplateLiteral3.default)(["!","(",")"],["!","(",")"]),_templateObject100=(0,_taggedTemplateLiteral3.default)(['require("ajv/dist/runtime/validation_error").default'],['require("ajv/dist/runtime/validation_error").default']),_templateObject101=(0,_taggedTemplateLiteral3.default)(["",".validate"],["",".validate"]),_templateObject102=(0,_taggedTemplateLiteral3.default)(["",".evaluated.props"],["",".evaluated.props"]),_templateObject103=(0,_taggedTemplateLiteral3.default)(["",".evaluated.items"],["",".evaluated.items"]),_templateObject104=(0,_taggedTemplateLiteral3.default)(["await ",""],["await ",""]),_templateObject105=(0,_taggedTemplateLiteral3.default)(["!("," instanceof ",")"],["!("," instanceof ",")"]),_templateObject106=(0,_taggedTemplateLiteral3.default)(["must be "," ",""],["must be "," ",""]),_templateObject107=(0,_taggedTemplateLiteral3.default)(["{comparison: ",", limit: ","}"],["{comparison: ",", limit: ","}"]),_templateObject108=(0,_taggedTemplateLiteral3.default)([""," "," "," || isNaN(",")"],[""," "," "," || isNaN(",")"]),_templateObject109=(0,_taggedTemplateLiteral3.default)(["must be multiple of ",""],["must be multiple of ",""]),_templateObject110=(0,_taggedTemplateLiteral3.default)(["{multipleOf: ","}"],["{multipleOf: ","}"]),_templateObject111=(0,_taggedTemplateLiteral3.default)(["Math.abs(Math.round(",") - ",") > 1e-",""],["Math.abs(Math.round(",") - ",") > 1e-",""]),_templateObject112=(0,_taggedTemplateLiteral3.default)([""," !== parseInt(",")"],[""," !== parseInt(",")"]),_templateObject113=(0,_taggedTemplateLiteral3.default)(["("," === 0 || ("," = ","/",", ","))"],["("," === 0 || ("," = ","/",", ","))"]),_templateObject114=(0,_taggedTemplateLiteral3.default)(["must NOT have "," than "," characters"],["must NOT have "," than "," characters"]),_templateObject115=(0,_taggedTemplateLiteral3.default)(["{limit: ","}"],["{limit: ","}"]),_templateObject116=(0,_taggedTemplateLiteral3.default)(['must match pattern "','"'],['must match pattern "','"']),_templateObject117=(0,_taggedTemplateLiteral3.default)(["{pattern: ","}"],["{pattern: ","}"]),_templateObject118=(0,_taggedTemplateLiteral3.default)(["(new RegExp(",", ","))"],["(new RegExp(",", ","))"]),_templateObject119=(0,_taggedTemplateLiteral3.default)(["!",".test(",")"],["!",".test(",")"]),_templateObject120=(0,_taggedTemplateLiteral3.default)(["must NOT have "," than "," properties"],["must NOT have "," than "," properties"]),_templateObject121=(0,_taggedTemplateLiteral3.default)(["Object.keys(",").length "," ",""],["Object.keys(",").length "," ",""]),_templateObject122=(0,_taggedTemplateLiteral3.default)(["must have required property '","'"],["must have required property '","'"]),_templateObject123=(0,_taggedTemplateLiteral3.default)(["{missingProperty: ","}"],["{missingProperty: ","}"]),_templateObject124=(0,_taggedTemplateLiteral3.default)(["must NOT have "," than "," items"],["must NOT have "," than "," items"]),_templateObject125=(0,_taggedTemplateLiteral3.default)(["",".length "," ",""],["",".length "," ",""]),_templateObject126=(0,_taggedTemplateLiteral3.default)(["must NOT have duplicate items (items ## "," and "," are identical)"],["must NOT have duplicate items (items ## "," and "," are identical)"]),_templateObject127=(0,_taggedTemplateLiteral3.default)(["{i: ",", j: ","}"],["{i: ",", j: ","}"]),_templateObject128=(0,_taggedTemplateLiteral3.default)([";","--;"],[";","--;"]),_templateObject129=(0,_taggedTemplateLiteral3.default)(["continue"],["continue"]),_templateObject130=(0,_taggedTemplateLiteral3.default)(["typeof ",' == "string"'],["typeof ",' == "string"']),_templateObject131=(0,_taggedTemplateLiteral3.default)(["",' += "_"'],["",' += "_"']),_templateObject132=(0,_taggedTemplateLiteral3.default)(["typeof ","[",'] == "number"'],["typeof ","[",'] == "number"']),_templateObject133=(0,_taggedTemplateLiteral3.default)(["","[","] = ",""],["","[","] = ",""]),_templateObject134=(0,_taggedTemplateLiteral3.default)([""," = ","; ","--;"],[""," = ","; ","--;"]),_templateObject135=(0,_taggedTemplateLiteral3.default)(["","(","[","], ","[","])"],["","(","[","], ","[","])"]),_templateObject136=(0,_taggedTemplateLiteral3.default)([""," > 1"],[""," > 1"]),_templateObject137=(0,_taggedTemplateLiteral3.default)([""," === false"],[""," === false"]),_templateObject138=(0,_taggedTemplateLiteral3.default)(["{allowedValue: ","}"],["{allowedValue: ","}"]),_templateObject139=(0,_taggedTemplateLiteral3.default)(["!","(",", ",")"],["!","(",", ",")"]),_templateObject140=(0,_taggedTemplateLiteral3.default)([""," !== ",""],[""," !== ",""]),_templateObject141=(0,_taggedTemplateLiteral3.default)(["{allowedValues: ","}"],["{allowedValues: ","}"]),_templateObject142=(0,_taggedTemplateLiteral3.default)(["","(",", ","[","])"],["","(",", ","[","])"]),_templateObject143=(0,_taggedTemplateLiteral3.default)(["must NOT have more than "," items"],["must NOT have more than "," items"]),_templateObject144=(0,_taggedTemplateLiteral3.default)([""," <= ",""],[""," <= ",""]),_templateObject145=(0,_taggedTemplateLiteral3.default)([""," > ",""],[""," > ",""]),_templateObject146=(0,_taggedTemplateLiteral3.default)(["must contain at least "," valid item(s)"],["must contain at least "," valid item(s)"]),_templateObject147=(0,_taggedTemplateLiteral3.default)(["must contain at least "," and no more than "," valid item(s)"],["must contain at least "," and no more than "," valid item(s)"]),_templateObject148=(0,_taggedTemplateLiteral3.default)(["{minContains: ","}"],["{minContains: ","}"]),_templateObject149=(0,_taggedTemplateLiteral3.default)(["{minContains: ",", maxContains: ","}"],["{minContains: ",", maxContains: ","}"]),_templateObject150=(0,_taggedTemplateLiteral3.default)([""," >= ",""],[""," >= ",""]),_templateObject151=(0,_taggedTemplateLiteral3.default)([""," && "," <= ",""],[""," && "," <= ",""]),_templateObject152=(0,_taggedTemplateLiteral3.default)(["",".length > 0"],["",".length > 0"]),_templateObject153=(0,_taggedTemplateLiteral3.default)(["must have "," "," when property "," is present"],["must have "," "," when property "," is present"]),_templateObject154=(0,_taggedTemplateLiteral3.default)(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"],["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"]),_templateObject155=(0,_taggedTemplateLiteral3.default)([""," && (",")"],[""," && (",")"]),_templateObject156=(0,_taggedTemplateLiteral3.default)(["{propertyName: ","}"],["{propertyName: ","}"]),_templateObject157=(0,_taggedTemplateLiteral3.default)(["{additionalProperty: ","}"],["{additionalProperty: ","}"]),_templateObject158=(0,_taggedTemplateLiteral3.default)(["delete ","[","]"],["delete ","[","]"]),_templateObject159=(0,_taggedTemplateLiteral3.default)(["",".test(",")"],["",".test(",")"]),_templateObject160=(0,_taggedTemplateLiteral3.default)(["{passingSchemas: ","}"],["{passingSchemas: ","}"]),_templateObject161=(0,_taggedTemplateLiteral3.default)(["[",", ","]"],["[",", ","]"]),_templateObject162=(0,_taggedTemplateLiteral3.default)(['must match "','" schema'],['must match "','" schema']),_templateObject163=(0,_taggedTemplateLiteral3.default)(["{failingKeyword: ","}"],["{failingKeyword: ","}"]),_templateObject164=(0,_taggedTemplateLiteral3.default)(['must match format "','"'],['must match format "','"']),_templateObject165=(0,_taggedTemplateLiteral3.default)(["{format: ","}"],["{format: ","}"]),_templateObject166=(0,_taggedTemplateLiteral3.default)(["typeof ",' == "object" && !('," instanceof RegExp)"],["typeof ",' == "object" && !('," instanceof RegExp)"]),_templateObject167=(0,_taggedTemplateLiteral3.default)(["",'.type || "string"'],["",'.type || "string"']),_templateObject168=(0,_taggedTemplateLiteral3.default)(['"string"'],['"string"']),_templateObject169=(0,_taggedTemplateLiteral3.default)([""," && !",""],[""," && !",""]),_templateObject170=(0,_taggedTemplateLiteral3.default)(["(",".async ? await ","(",") : ","(","))"],["(",".async ? await ","(",") : ","(","))"]),_templateObject171=(0,_taggedTemplateLiteral3.default)(["(typeof ",' == "function" ? '," : ",".test(","))"],["(typeof ",' == "function" ? '," : ",".test(","))"]),_templateObject172=(0,_taggedTemplateLiteral3.default)([""," && "," !== true && "," === "," && !",""],[""," && "," !== true && "," === "," && !",""]),_templateObject173=(0,_taggedTemplateLiteral3.default)(["await ","(",")"],["await ","(",")"]),_templateObject174=(0,_taggedTemplateLiteral3.default)(["{error: ",", tag: ",", tagValue: ","}"],["{error: ",", tag: ",", tagValue: ","}"]);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}!function(e,t){"object"==(0,_typeof4.default)(exports)&&void 0!==module?t(exports,__webpack_require__("oCYn"),__webpack_require__("cRz4"),__webpack_require__("7hWu")):(__WEBPACK_AMD_DEFINE_ARRAY__=[exports,__webpack_require__("oCYn"),__webpack_require__("cRz4"),__webpack_require__("7hWu")],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=t)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,(function(exports,Vue,bkMagicVue_min_css,bkMagic){function _interopDefaultLegacy(e){return e&&"object"==(void 0===e?"undefined":(0,_typeof4.default)(e))&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var t=(0,_create2.default)(null);return e&&(0,_keys2.default)(e).forEach((function(r){if("default"!==r){var a=(0,_getOwnPropertyDescriptor2.default)(e,r);(0,_defineProperty6.default)(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,(0,_freeze2.default)(t)}var Vue__default=_interopDefaultLegacy(Vue),bkMagic__namespace=_interopNamespace(bkMagic);function ownKeys(e,t){var r=(0,_keys2.default)(e);if(_getOwnPropertySymbols2.default){var a=(0,_getOwnPropertySymbols2.default)(e);t&&(a=a.filter((function(t){return(0,_getOwnPropertyDescriptor2.default)(e,t).enumerable}))),r.push.apply(r,a)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):_getOwnPropertyDescriptors2.default?(0,_defineProperties3.default)(e,(0,_getOwnPropertyDescriptors2.default)(r)):ownKeys(Object(r)).forEach((function(t){(0,_defineProperty6.default)(e,t,(0,_getOwnPropertyDescriptor2.default)(r,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof _symbol2.default&&"symbol"==(0,_typeof4.default)(_iterator24.default)?function(e){return void 0===e?"undefined":(0,_typeof4.default)(e)}:function(e){return e&&"function"==typeof _symbol2.default&&e.constructor===_symbol2.default&&e!==_symbol2.default.prototype?"symbol":void 0===e?"undefined":(0,_typeof4.default)(e)})(e)}function asyncGeneratorStep(e,t,r,a,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):_promise2.default.resolve(l).then(a,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new _promise2.default((function(a,n){var o=e.apply(t,r);function i(e){asyncGeneratorStep(o,a,n,i,s,"next",e)}function s(e){asyncGeneratorStep(o,a,n,i,s,"throw",e)}i(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,_defineProperty6.default)(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?(0,_defineProperty6.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,a,n={},o=(0,_keys2.default)(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function _objectWithoutProperties(e,t){if(null==e)return{};var r,a,n=_objectWithoutPropertiesLoose(e,t);if(_getOwnPropertySymbols2.default){var o=(0,_getOwnPropertySymbols2.default)(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(void 0!==_symbol2.default&&null!=e[_iterator24.default]||null!=e["@@iterator"])return(0,_from2.default)(e)}function _iterableToArrayLimit(e,t){var r=null==e?null:void 0!==_symbol2.default&&e[_iterator24.default]||e["@@iterator"];if(null!=r){var a,n,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw n}}return o}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?(0,_from2.default)(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var r=void 0!==_symbol2.default&&e[_iterator24.default]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}var isRegExp=function(e){var t;return(null===(t=new Function("return ".concat(e,";"))())||void 0===t?void 0:t.constructor)===RegExp},isObj=function(e){return"[object Object]"===Object.prototype.toString.call(e)};!function(){try{if("undefined"!=typeof self)return self}catch(e){}try{if("undefined"!=typeof window)return window}catch(e){}try{if(void 0!==global)return global}catch(e){}Function("return this")()}();var hasOwnProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},valueType=function(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"boolean"==typeof e?"boolean":isNaN(e)?null===e?"null":"object"===_typeof(e)?"object":_typeof(e):"number"},merge=function e(t,r){return isObj(r)?(0,_keys2.default)(r).reduce((function(a,n){var o;return a[n]=e((null===(o=t)||void 0===o?void 0:o[n])||{},r[n]),a}),JSON.parse((0,_stringify2.default)(t))):Array.isArray(r)?(t=Array.isArray(t)?t:[],r.map((function(r,a){return t[a]?e(t[a],r):r}))):r};function intersection(e,t){return e.filter((function(e){return t.includes(e)}))}function gcd(e,t){return 0===t?e:gcd(t,e%t)}function scm(e,t){return e*t/gcd(e,t)}function initializationValue(e){switch(e){case"any":return;case"array":return[];case"boolean":return!1;case"integer":case"number":return 0;case"null":return null;case"object":return{};case"string":return""}}function mergeDeep(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!r.length)return e;var n=r.shift();if(isObj(e)&&isObj(n))for(var o in n)isObj(n[o])?(e[o]||(0,_assign2.default)(e,_defineProperty({},o,{})),mergeDeep(e[o],n[o])):(0,_assign2.default)(e,_defineProperty({},o,n[o]));return mergeDeep.apply(void 0,[e].concat(r))}function isArguments(e){return"[object Arguments]"===Object.prototype.toString.call(e)}function deepEquals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e===t)return!0;if("function"==typeof e||"function"==typeof t)return!0;if("object"!==_typeof(e)||"object"!==_typeof(t))return!1;if(null===e||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp&&t instanceof RegExp)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(isArguments(e)||isArguments(t)){if(!isArguments(e)||!isArguments(t))return!1;var n=Array.prototype.slice;return deepEquals(n.call(e),n.call(t),r,a)}if(e.constructor!==t.constructor)return!1;var o=(0,_keys2.default)(e),i=(0,_keys2.default)(t);if(0===o.length&&0===i.length)return!0;if(o.length!==i.length)return!1;for(var s,l=r.length;l--;)if(r[l]===e)return a[l]===t;r.push(e),a.push(t),o.sort(),i.sort();for(var u=o.length-1;u>=0;u--)if(o[u]!==i[u])return!1;for(var c=o.length-1;c>=0;c--)if(!deepEquals(e[s=o[c]],t[s],r,a))return!1;return r.pop(),a.pop(),!0}function orderProperties(e,t){if(!Array.isArray(t))return e;var r,a=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},n=a(e),o=t.filter((function(e){return"*"===e||n[e]})),i=a(o),s=e.filter((function(e){return!i[e]})),l=o.indexOf("*");if(-1===l){if(s.length)throw new Error("uiSchema order list does not contain ".concat((r=s).length>1?"properties '".concat(r.join("', '"),"'"):"property '".concat(r[0],"'")));return o}if(l!==o.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");var u=_toConsumableArray(o);return u.splice.apply(u,[l,1].concat(_toConsumableArray(s))),u}var Registry=function(){function e(){_classCallCheck(this,e),this.widgets=new _map2.default,this.components=new _map2.default,this.fields=new _map2.default}return _createClass(e,[{key:"addComponentsMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("components",e)}},{key:"getComponent",value:function(e){return this.components.get(e)}},{key:"addFieldsMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("fields",e)}},{key:"getField",value:function(e){return this.fields.get(e)}},{key:"addBaseWidgets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.addMap("widgets",e)}},{key:"getBaseWidget",value:function(t){return this.widgets.has(t)?this.widgets.get(t):t&&0!==t.indexOf(e.namespace)?"".concat(e.namespace,"-").concat(t):t}},{key:"addMap",value:function(e,t){var r=this;e&&t&&(0,_entries2.default)(t).forEach((function(t){var a=_slicedToArray(t,2),n=a[0],o=a[1];r[e].has(n)?console.warn("repeat key",n):r[e].set(n,o)}))}}]),e}();Registry.namespace="bk",Registry.context={};var registry=new Registry,_excluded$5=["allOf"],_excluded2$1=["name"],_excluded3=["name"],Schema=function(){function e(t){_classCallCheck(this,e),e.rootSchema=t}return _createClass(e,null,[{key:"resolveAllOf",value:function(e){var t,r=this,a=_objectSpread2(_objectSpread2({},e),{},{allOf:null===(t=e.allOf)||void 0===t?void 0:t.map((function(e){return r.resolveSchema(e)}))});try{return this.mergeSchemaAllOf()}catch(e){return console.warn(e),a.allOf,_objectWithoutProperties(a,_excluded$5)}}},{key:"mergeSchemaAllOf",value:function(){for(var e=this,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length<2)return r[0];for(var n={},o=[].concat(r),i=function(){var t=isObj(o[0])?o[0]:{},r=isObj(o[1])?o[1]:{};n=(0,_assign2.default)({},t),(0,_keys2.default)(r).reduce((function(a,n){var o=t[n],i=r[n];if(isObj(o)||isObj(i))if(isObj(o)&&isObj(i))a[n]=e.mergeSchemaAllOf(o,i);else{var s=_slicedToArray(isObj(o)?[o,i]:[i,o],2),l=s[0],u=s[1];a[n]="additionalProperties"===n?!0===u&&l:l}else if(Array.isArray(o)||Array.isArray(i))if(Array.isArray(o)&&Array.isArray(i)){if(isObj(o[0])||isObj(i[0]))throw new Error("暂不支持如上数组对象元素合并");var c=intersection(_toConsumableArray(o),_toConsumableArray(i));if(c.length<=0)throw new Error("无法合并如上数据");0===c.length&&"type"===n?a[n]=c[0]:a[n]=c}else{var d=_slicedToArray(Array.isArray(o)?[o,i]:[i,o],2),p=d[0],f=d[1];if(void 0===f)a[n]=p;else{if(!p.includes(f))throw new Error("无法合并如下数据");a[n]=f}}else a[n]=void 0!==o&&void 0!==i?"maxLength"===n||"maximum"===n||"maxItems"===n||"exclusiveMaximum"===n||"maxProperties"===n?Math.min(o,i):"minLength"===n||"minimum"===n||"minItems"===n||"exclusiveMinimum"===n||"minProperties"===n?Math.max(o,i):"multipleOf"===n?scm(o,i):o:void 0===o?i:o;return a}),n),o.splice(0,2,n)};o.length>=2;)i();return n}},{key:"resolveRef",value:function(){}},{key:"resolveDependencies",value:function(){}},{key:"resolveAdditionalProperties",value:function(){}},{key:"resolveSchema",value:function(e){return isObj(e)?(hasOwnProperty(e,"allOf")&&(e=this.resolveAllOf(e)),hasOwnProperty(e,"$ref"),e):{}}},{key:"getSchemaDefaultValue",value:function(e){var t=this,r=isObj(e)?e:{};switch(this.getSchemaType(r)){case"null":return null;case"object":return(0,_keys2.default)(r.properties||{}).reduce((function(e,a){var n,o=t.getSchemaDefaultValue(null===(n=r.properties)||void 0===n?void 0:n[a]);return e[a]=o,e}),{});case"array":return Array.isArray(r.items)?r.items.map((function(e){return t.getSchemaDefaultValue(e)})):[]}return r.default||initializationValue(r.type||"any")}},{key:"getSchemaType",value:function(e){var t=e.type;return!t&&e.const?valueType(e.const):!t&&e.enum?"string":!t&&e.items?"array":t}},{key:"getSchemaField",value:function(e){var t=e["ui:field"];if(t)return t;var r=registry.getField(this.getSchemaType(e));return r?{name:r}:{name:null}}},{key:"isMultiSelect",value:function(e){return!(!e.uniqueItems||!e.items)&&Array.isArray(e.items.enum)}},{key:"isTupleArray",value:function(e){var t;return Array.isArray(e.items)&&(null===(t=e.items)||void 0===t?void 0:t.length)>0&&e.items.every((function(e){return isObj(e)}))}},{key:"isCustomArrayWidget",value:function(e){var t,r=null===(t=e["ui:component"])||void 0===t?void 0:t.name;return"array"===e.type&&r}},{key:"getGroupWrap",value:function(e){var t=e["ui:group"]||{},r=t.name;return _objectSpread2(_objectSpread2({},_objectWithoutProperties(t,_excluded2$1)),{},{name:registry.getComponent(r)||r||registry.getComponent("group")})}},{key:"getUiComponent",value:function(e){var t=e["ui:component"]||{},r=t.name,a=_objectWithoutProperties(t,_excluded3);return _objectSpread2({name:registry.getComponent(r)||r},a)}},{key:"getDefaultWidget",value:function(t){var r=this.getSchemaType(t),a=null;if("string"===r&&Array.isArray(t.enum)&&(a=registry.getComponent("select")),"array"===r&&e.isMultiSelect(t)&&(a=registry.getComponent("checkbox")),a)return a;var n={string:"input",number:"input",integer:"input",boolean:"switcher",null:""}[r];return registry.getComponent(n)||registry.getBaseWidget(n)||(console.warn("未注册类型".concat(r,"对应的默认表单项")),null)}},{key:"isRequired",value:function(e,t){return Array.isArray(e.required)&&e.required.includes(t)}},{key:"getUiOptions",value:function(e){var t=_objectSpread2({showTitle:!0,label:e.title,desc:e.description,minLength:e.minLength,maxLength:e.maxLength},e["ui:props"]||{});return _objectSpread2(_objectSpread2({},t),{},{labelWidth:t.showTitle?t.labelWidth||150:.1})}},{key:"getDependencies",value:function(e,t){return(0,_entries2.default)(e.dependencies||{}).find((function(e){return Array.isArray(e[1])&&e[1].includes(t)}))}},{key:"orderProps",value:function(){}},{key:"resolveDefaultDatasource",value:function(e){var t,r,a;if(null!==(t=e["ui:component"])&&void 0!==t&&null!==(r=t.props)&&void 0!==r&&r.datasource)return e["ui:component"].props.datasource;var n=[];return Array.isArray(e.enum)?n=e.enum:Array.isArray(null===(a=e.items)||void 0===a?void 0:a.enum)&&(n=e.items.enum||[]),n.map((function(e){return{value:e,label:e}}))}}]),e}();Schema.rootSchema=void 0;var Layout=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.layout=void 0,this.layout=this.parseLayout({prop:"",group:t})}return _createClass(e,[{key:"transformValueToPixel",value:function(e){return"number"==typeof e?"".concat(e,"px"):e}},{key:"parseLayout",value:function(e){var t=this,r=this.getLayoutDimension(e.group),a=this.parseGridTemplate(r),n=(e.group||[]).map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e||"number"==typeof e?{prop:e,item:{gridArea:e,overflow:"hidden"}}:"object"===_typeof(e)&&(0,_has2.default)(e,"group")?t.parseLayout(e):e})):(console.error("layout ".concat((0,_stringify2.default)(e)," error, must be a array")),[])})),o=this.parseGridTemplateAreas(r,n);return{prop:e.prop||"",item:_objectSpread2({gridArea:e.prop,overflow:"hidden"},e.item),container:_objectSpread2(_objectSpread2({display:"grid",gridTemplateAreas:o,gridGap:"24px"},a),e.container),group:n}}},{key:"getLayoutDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return Array.isArray(t)||console.error("layout ".concat((0,_stringify2.default)(t)," error, must be a array")),t&&(e.columns=Math.max(e.columns,t.length||0)),e.rows+=1,e}),{columns:0,rows:0})}},{key:"parseGridTemplate",value:function(e){return{gridTemplateColumns:this.repeatTemplate(e.columns,!1),gridTemplateRows:this.repeatTemplate(e.rows)}}},{key:"parseGridTemplateAreas",value:function(e,t){var r=this;return t.reduce((function(t,a){var n=r.autoFillColumns(a,e.columns);return t+'"'.concat(n.join(" "),'"\n')}),"")}},{key:"autoFillColumns",value:function(e,t){if(e.length===t)return e.map((function(e){return e.prop}));var r=Math.floor((t-e.length)/e.length),a=e.reduce((function(e,t){e.push(t.prop);var a=new Array(r).fill(t.prop);return e.concat(a)}),[]);if(a.length<t){var n=new Array(t-a.length).fill(".");return a.concat(n)}return a}},{key:"repeatTemplate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Array(e+1).join(t?"auto ":"1fr ").trim()}}],[{key:"findLayoutByProp",value:function(e,t){var r;return t.find((function(t){return r=t.find((function(t){return t.prop===e}))})),r}}]),e}();function createProxy(e,t){return new Proxy(e,{get:function(e,r,a){return"function"==typeof e[r]?e[r].apply(t):(0,_get5.default)(e,r,a)}})}var Path=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getCurPath",value:function(e,t){return""===e?t:[e,t].join(this.separator)}},{key:"getPathVal",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t)return e;for(var a=t.split(this.separator),n=0;n<a.length-r;n+=1){if(void 0===e)return;e=""===a[n]?e:e[a[n]]}return e}},{key:"setPathValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=JSON.parse((0,_stringify2.default)(e)),n=t.split(this.separator),o=n.pop()||"",i=a;return n.forEach((function(e){i[e]||(i[e]={}),i=i[e]})),i[o]=r,a}},{key:"getSubPath",value:function(e,t){return t.replace("".concat(e,"."),"")}},{key:"getPathLastProp",value:function(e){return e.split(this.separator).pop()}},{key:"getParentPath",value:function(e){var t=e.split(this.separator);return t.length<=1?"":t.slice(0,t.length-1).join(this.separator)}}]),e}();Path.separator=".";var _excluded$4=["params","responseType","method","headers","responseParse"],methodsWithoutData=["GET","HEAD","OPTIONS","DELETE"],defaultConfig={responseType:"json",method:"GET",params:{},headers:{},cache:"no-cache"},request=(e=_asyncToGenerator(_regenerator2.default.mark((function e(t){var r,a,n,o,i,s,l,u,c,d,p,f,m,_,h,v,g,y,b,$,w=arguments;return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.length>1&&void 0!==w[1]?w[1]:{},a=mergeDeep(defaultConfig,r),n=a.params,o=a.responseType,i=void 0===o?"json":o,s=a.method,l=void 0===s?"GET":s,u=a.headers,c=void 0===u?{}:u,d=a.responseParse,p=_objectWithoutProperties(a,_excluded$4),m=t,methodsWithoutData.includes(l.toUpperCase())?m="".concat(m,"?").concat(isObj(n)?new URLSearchParams(n):n||""):isObj(n)?(c["Content-Type"]="application/json;charset=utf-8",f=(0,_stringify2.default)(n)):f=n,e.prev=4,e.next=7,fetch(m,_objectSpread2(_objectSpread2({},p),{},{method:l.toLocaleUpperCase(),headers:c,body:f}));case 7:if(!(_=e.sent).ok){e.next=21;break}return e.next=11,_[i]();case 11:if(h=e.sent,!d){e.next=20;break}if("function"!=typeof d){e.next=15;break}return e.abrupt("return",_promise2.default.resolve(d(h)));case 15:if(!isObj(d)){e.next=19;break}return v=d.dataKey,g=void 0===v?"data":v,y=d.labelKey,b=d.valueKey,$=((null==h?void 0:h[g])||[]).map((function(e){return _objectSpread2(_objectSpread2({},e),{},{label:null==e?void 0:e[y],value:null==e?void 0:e[b]})})),e.abrupt("return",_promise2.default.resolve($));case 19:case 20:return e.abrupt("return",_promise2.default.resolve(h));case 21:e.t0=_.status,e.next=400===e.t0?24:401===e.t0?25:403===e.t0||500===e.t0?26:27;break;case 24:case 25:case 26:return e.abrupt("break",27);case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(4),console.error("Request Failed",e.t1),_promise2.default.reject(e.t1);case 33:case"end":return e.stop()}}),e,null,[[4,29]])}))),function(t){return e.apply(this,arguments)}),props$1={value:{type:Object,default:function(){return{}}},rules:{type:Object,default:function(){return{}}},schema:{type:Object,default:function(){return{}}},validator:{type:Object,default:function(){return{}}},width:{type:[String,Number],default:"100%"},layout:{type:Array,default:function(){return[]}},formType:{type:String,default:"horizontal"},context:{type:Object,default:function(){return{}}},httpAdapter:{type:Object,default:function(){return{request:request,responseParse:function(e){return e}}}}},props={schema:{type:Object,default:function(){return{}}},path:{type:String,default:""},required:{type:Boolean,default:!1},rootData:{type:Object,default:function(){return{}}},value:{type:[String,Number,Array,Object,Boolean]},layout:{type:Object,default:function(){return{}}},context:{type:Object,default:function(){return{}}},removeable:{type:Boolean,default:!1},httpAdapter:{type:Object,default:function(){return{request:request,responseParse:function(e){return e}}}}},SchemaField=Vue__default.default.extend({name:"SchemaField",functional:!0,props:props,render:function(e,t){var r=t.props,a=r.schema,n=r.rootData,o=r.path,i=Schema.resolveSchema(a);if(!(0,_keys2.default)(a).length)return e();var s=Schema.getSchemaField(i),l=s.name,u=s.props;return l?e(l,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2(_objectSpread2({},u),t.props),{},{value:Path.getPathVal(n,o),schema:createProxy(i,t)})})):e()}}),_excluded$3=["name"],ObjectField=Vue__default.default.extend({name:"ObjectField",functional:!0,props:props,render:function(e,t){var r=t.props,a=r.schema,n=r.path,o=r.layout,i=r.rootData,s=orderProperties((0,_keys2.default)(a.properties),a["ui:order"]).map((function(r){var i=Path.getCurPath(n,r),s=i.split(".").pop(),l=Layout.findLayoutByProp(s,o.group||[])||{};return e(SchemaField,_objectSpread2(_objectSpread2({},t.data),{},{key:i,props:_objectSpread2(_objectSpread2({},t.props),{},{schema:a.properties[r],required:Schema.isRequired(a,r),path:i,layout:l,removeable:!1})}))})),l=Schema.getGroupWrap(a),u=l.name,c=_objectWithoutProperties(l,_excluded$3);return e(u,mergeDeep({props:_objectSpread2(_objectSpread2({},t.props),{},{value:Path.getPathVal(i,n),path:n}),style:_objectSpread2({},t.data.style||{}),on:_objectSpread2({},t.data.on||{})},c),_toConsumableArray(s))}}),getContext=function(e){var t=e.context,r=e.loadDataSource,a=e.validate,n=e.schema,o=e.rootData,i=e.widgetNode;return{$self:e,$context:t,$schema:n,$rules:n.rules,$loadDataSource:r,$validate:a,$rootData:o,$widgetNode:i}},executeExpression=function executeExpression(expression,instance){var $dep=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],_getContext=getContext(instance),$self=_getContext.$self,$context=_getContext.$context,$schema=_getContext.$schema,$rules=_getContext.$rules,$loadDataSource=_getContext.$loadDataSource,$validate=_getContext.$validate,$rootData=_getContext.$rootData,$widgetNode=_getContext.$widgetNode,context={$self:$self,$context:$context,$schema:$schema,$rules:$rules,$loadDataSource:$loadDataSource,$validate:$validate,$rootData:$rootData,$widgetNode:$widgetNode,$dep:$dep};if("string"==typeof expression){if(!/^{{.+}}$/.test(expression.trim()))return expression;var expStr=expression.trim().replace(/(^{{)|(}}$)/g,"").trim(),innerFuncs=["$loadDataSource","$validate"],func=function func(_ref){return _ref.$self,_ref.$context,_ref.$schema,_ref.$rules,_ref.$loadDataSource,_ref.$validate,_ref.$rootData,_ref.$widgetNode,_ref.$dep,innerFuncs.includes(expStr)?eval("".concat(expStr,"()")):eval(expStr)};return func(context)}if(isObj(expression))return(0,_keys2.default)(expression).forEach((function(e){expression[e]=executeExpression(expression[e],instance)})),expression},isExpression=function(e){return"string"==typeof e&&/{{.*}}/.test(e)},WidgetNode=function(){function e(t){_classCallCheck(this,e),this.id=void 0,this.instance=void 0,this.parent=void 0,this.index=void 0,this.children=void 0;var r=t.id,a=t.instance,n=t.parent,o=t.index,i=t.children,s=void 0===i?[]:i;this.id=r,this.index=o,this.instance=a,this.parent=n,this.children=s}return _createClass(e,[{key:"parents",get:function(){return this.parent?[].concat(_toConsumableArray(this.parent.parents),[this.parent]):[]}},{key:"firstChild",get:function(){return this.children[0]||null}},{key:"lastChild",get:function(){return this.children[this.children.length-1]||null}},{key:"getSibling",value:function(e){var t,r=this.id.replace(Path.getPathLastProp(this.id)||"",e);return null===(t=this.parent)||void 0===t?void 0:t.children.find((function(e){return e.id===r}))}},{key:"isLeaf",get:function(){return!this.children.length}},{key:"appendChild",value:function(e){var t,r=Array.isArray(e)?e:[e],a=void 0!==e.index?e.index:this.children.length;return(t=this.children).splice.apply(t,[a,0].concat(_toConsumableArray(r))),this.children.slice(a).forEach((function(e,t){e.index=a+t})),r}},{key:"removeChild",value:function(e){var t=this,r=Array.isArray(e)?e:[e],a=[];r.forEach((function(e){var r=e.index;a.push(r),t.children.splice(r,1)}));var n=Math.min.apply(Math,a);return this.children.slice(n).forEach((function(e,t){e.index=n+t})),r}}]),e}(),WidgetTree=function(){function e(){_classCallCheck(this,e),this.widgetMap={}}return _createClass(e,[{key:"addWidgetNode",value:function(e,t,r){if(""===e){var a=new WidgetNode({id:"",index:r,parent:null,instance:t,children:[]});this.widgetMap[e]=a}else{var n=Path.getParentPath(e),o=this.widgetMap[n];if(!o)return void console.warn("Unexpected parent id, add widget failed");var i=new WidgetNode({id:e,index:r,parent:o,instance:t,children:[]});o.appendChild(i),this.widgetMap[e]=i}}},{key:"removeWidgetNode",value:function(e,t){var r=this.widgetMap[e];if(null!=r&&r.parent){var a=r.parent.children,n=a.findIndex((function(e){return e.instance===t}));n>-1&&(a.splice(n,1),a.slice(n).forEach((function(e,t){e.index=n+t})))}delete this.widgetMap[e]}}]),e}(),widgetTree=new WidgetTree,reactionsMap={},subscribe=function(e,t,r){if(reactionsMap[e]||(reactionsMap[e]={lifetime:{},effect:{},fns:[]}),"valChange"===t)reactionsMap[e].fns.push(r);else{var a=_slicedToArray(t.split("/"),2),n=a[0],o=a[1];reactionsMap[e][n][o]?reactionsMap[e][n][o].push(r):reactionsMap[e][n][o]=[r]}},resolveReaction=function(e,t,r){return function(){var a=widgetTree.widgetMap[e].instance,n=widgetTree.widgetMap[t].instance,o=!0,i=[];r.source&&(Array.isArray(r.source)?r.source:[r.source]).forEach((function(t){var r=widgetTree.widgetMap[parsePath(t,e)].instance;i.push(r)})),"string"==typeof r.if&&(o=executeExpression(r.if,a,i));var s=o?r.then:r.else;executeOperations(s,n,i)}},executeOperations=function(e,t,r){e&&(e.state&&(0,_keys2.default)(e.state).forEach((function(a){var n=e.state[a];"string"==typeof n&&/^{{.+}}$/.test(n.trim())&&(n=executeExpression(n,t,r)),t.setState(a,n)})),Array.isArray(e.actions)&&e.actions.forEach((function(e){executeExpression(e,t,r)})))},parsePath=function(e,t){return isExpression(e)?executeExpression(e,t):e},reactionRegister=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=widgetTree.widgetMap[e].instance;t&&Array.isArray(t)&&t.forEach((function(t){var a=t.source?Array.isArray(t.source)?t.source:[t.source]:[e],n=parsePath("string"==typeof t.target?t.target:e,r);a.forEach((function(a){var o=parsePath(a,r);"string"==typeof t.lifetime&&subscribe(o,"lifetime/".concat(t.lifetime),resolveReaction(e,n,t)),"string"==typeof t.effect&&subscribe(o,"effect/".concat(t.effect),resolveReaction(e,n,t)),t.lifetime||t.effect||subscribe(o,"valChange",resolveReaction(e,n,t))}))}))},reactionDispatch=function(e,t){var r,a,n=_slicedToArray(t.split("/"),2),o=n[0],i=void 0===o?"":o,s=n[1],l=void 0===s?"":s,u=[];reactionsMap[e]&&("valChange"===i?u=reactionsMap[e].fns:null!==(r=reactionsMap[e])&&void 0!==r&&null!==(a=r[i])&&void 0!==a&&a[l]&&(u=reactionsMap[e][i][l]),u.forEach((function(e){e()})))},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{},e;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ajv$1={exports:{}},core$2={},validate$1={},boolSchema={},errors={},codegen={},code$1={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;var t=function e(){(0,_classCallCheck4.default)(this,e)};e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var r=function(t){function r(t){var a;if((0,_classCallCheck4.default)(this,r),a=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this)),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");return a.str=t,(0,_possibleConstructorReturn3.default)(a)}return(0,_inherits3.default)(r,t),(0,_createClass4.default)(r,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){return!1}},{key:"names",get:function(){return(0,_defineProperty4.default)({},this.str,1)}}]),r}(t);e.Name=r;var a=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this)))._items="string"==typeof e?[e]:e,r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"toString",value:function(){return this.str}},{key:"emptyStr",value:function(){if(this._items.length>1)return!1;var e=this._items[0];return""===e||'""'===e}},{key:"str",get:function(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((function(e,t){return""+e+t}),"")}},{key:"names",get:function(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((function(e,t){return t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e}),{})}}]),t}(t);function n(e){for(var t=[e[0]],r=0;r<(arguments.length<=1?0:arguments.length-1);)s(t,arguments.length<=r+1?void 0:arguments[r+1]),t.push(e[++r]);return new a(t)}e._Code=a,e.nil=new a(""),e._=n;var o=new a("+");function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=[u(e[0])],c=0;c<r.length;)i.push(o),s(i,r[c]),i.push(o,u(e[++c]));return function(e){for(var t=1;t<e.length-1;){if(e[t]===o){var r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(i),new a(i)}function s(e,t){var n;t instanceof a?e.push.apply(e,(0,_toConsumableArray4.default)(t._items)):t instanceof r?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?""+e.slice(0,-1)+t+'"':'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:'"'+e+t.slice(1)}function u(e){return(0,_stringify2.default)(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=i,e.addCodeArg=s,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:i(_templateObject,e,t)},e.stringify=function(e){return new a(u(e))},e.safeStringify=u,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new a("."+t):n(_templateObject2,t)},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new a(""+t);throw new Error("CodeGen: invalid export name: "+t+", use explicit $id name mapping")},e.regexpCode=function(e){return new a(e.toString())}}(code$1);var scope={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t,r=code$1,a=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,'CodeGen: "code" for '+e+" not defined"))).value=e.value,r}return(0,_inherits3.default)(t,e),t}(Error);!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(t=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};var n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefixes,a=t.parent;(0,_classCallCheck4.default)(this,e),this._names={},this._prefixes=r,this._parent=a}return(0,_createClass4.default)(e,[{key:"toName",value:function(e){return e instanceof r.Name?e:this.name(e)}},{key:"name",value:function(e){return new r.Name(this._newName(e))}},{key:"_newName",value:function(e){return""+e+(this._names[e]||this._nameGroup(e)).index++}},{key:"_nameGroup",value:function(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'+e+'" is not allowed in this scope');return this._names[e]={prefix:e,index:0}}}]),e}();e.Scope=n;var o=function(e){function t(e,r){var a;return(0,_classCallCheck4.default)(this,t),(a=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,r))).prefix=e,a}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"setValue",value:function(e,t){var a=t.property,n=t.itemIndex;this.value=e,this.scopePath=r._(_templateObject3,new r.Name(a),n)}}]),t}(r.Name);e.ValueScopeName=o;var i=r._(_templateObject4);e.ValueScope=function(n){function s(e){var t;return(0,_classCallCheck4.default)(this,s),(t=(0,_possibleConstructorReturn3.default)(this,(s.__proto__||(0,_getPrototypeOf2.default)(s)).call(this,e)))._values={},t._scope=e.scope,t.opts=(0,_extends4.default)({},e,{_n:e.lines?i:r.nil}),t}return(0,_inherits3.default)(s,n),(0,_createClass4.default)(s,[{key:"get",value:function(){return this._scope}},{key:"name",value:function(e){return new o(e,this._newName(e))}},{key:"value",value:function(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");var a=this.toName(e),n=a.prefix,o=null!==(r=t.key)&&void 0!==r?r:t.ref,i=this._values[n];if(i){var s=i.get(o);if(s)return s}else i=this._values[n]=new _map2.default;i.set(o,a);var l=this._scope[n]||(this._scope[n]=[]),u=l.length;return l[u]=t.ref,a.setValue(t,{property:n,itemIndex:u}),a}},{key:"getValue",value:function(e,t){var r=this._values[e];if(r)return r.get(t)}},{key:"scopeRefs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,(function(t){if(void 0===t.scopePath)throw new Error('CodeGen: name "'+t+'" has no value');return r._(_templateObject,e,t.scopePath)}))}},{key:"scopeCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments[1],r=arguments[2];return this._reduceValues(e,(function(e){if(void 0===e.value)throw new Error('CodeGen: name "'+e+'" has no value');return e.value.code}),t,r)}},{key:"_reduceValues",value:function(n,o){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments[3],u=r.nil,c=function(c){var d=n[c];if(!d)return"continue";var p=s[c]=s[c]||new _map2.default;d.forEach((function(n){if(!p.has(n)){p.set(n,t.Started);var s=o(n);if(s){var c=i.opts.es5?e.varKinds.var:e.varKinds.const;u=r._(_templateObject5,u,c,n,s,i.opts._n)}else{if(!(s=null==l?void 0:l(n)))throw new a(n);u=r._(_templateObject6,u,s,i.opts._n)}p.set(n,t.Completed)}}))};for(var d in n)c(d);return u}}]),s}(n)}(scope),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=code$1,r=scope,a=code$1;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var n=scope;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};var o=function(){function e(){(0,_classCallCheck4.default)(this,e)}return(0,_createClass4.default)(e,[{key:"optimizeNodes",value:function(){return this}},{key:"optimizeNames",value:function(e,t){return this}}]),e}(),i=function(e){function a(e,t,r){var n;return(0,_classCallCheck4.default)(this,a),(n=(0,_possibleConstructorReturn3.default)(this,(a.__proto__||(0,_getPrototypeOf2.default)(a)).call(this))).varKind=e,n.name=t,n.rhs=r,n}return(0,_inherits3.default)(a,e),(0,_createClass4.default)(a,[{key:"render",value:function(e){var t=e.es5,a=e._n,n=t?r.varKinds.var:this.varKind,o=void 0===this.rhs?"":" = "+this.rhs;return n+" "+this.name+o+";"+a}},{key:"optimizeNames",value:function(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=C(this.rhs,e,t)),this}},{key:"names",get:function(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}]),a}(o),s=function(e){function r(e,t,a){var n;return(0,_classCallCheck4.default)(this,r),(n=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this))).lhs=e,n.rhs=t,n.sideEffects=a,n}return(0,_inherits3.default)(r,e),(0,_createClass4.default)(r,[{key:"render",value:function(e){var t=e._n;return this.lhs+" = "+this.rhs+";"+t}},{key:"optimizeNames",value:function(e,r){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=C(this.rhs,e,r),this}},{key:"names",get:function(){return x(this.lhs instanceof t.Name?{}:(0,_extends4.default)({},this.lhs.names),this.rhs)}}]),r}(o),l=function(e){function t(e,r,a,n){var o;return(0,_classCallCheck4.default)(this,t),(o=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e,a,n))).op=r,o}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var t=e._n;return this.lhs+" "+this.op+"= "+this.rhs+";"+t}}]),t}(s),u=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).label=e,r.names={},r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var t=e._n;return this.label+":"+t}}]),t}(o),c=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).label=e,r.names={},r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var t=e._n;return"break"+(this.label?" "+this.label:"")+";"+t}}]),t}(o),d=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).error=e,r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var t=e._n;return"throw "+this.error+";"+t}},{key:"names",get:function(){return this.error.names}}]),t}(o),p=function(e){function r(e){var t;return(0,_classCallCheck4.default)(this,r),(t=(0,_possibleConstructorReturn3.default)(this,(r.__proto__||(0,_getPrototypeOf2.default)(r)).call(this))).code=e,t}return(0,_inherits3.default)(r,e),(0,_createClass4.default)(r,[{key:"render",value:function(e){var t=e._n;return this.code+";"+t}},{key:"optimizeNodes",value:function(){return""+this.code?this:void 0}},{key:"optimizeNames",value:function(e,t){return this.code=C(this.code,e,t),this}},{key:"names",get:function(){return this.code instanceof t._CodeOrName?this.code.names:{}}}]),r}(o),f=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_classCallCheck4.default)(this,t),(e=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).nodes=r,e}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return this.nodes.reduce((function(t,r){return t+r.render(e)}),"")}},{key:"optimizeNodes",value:function(){for(var e=this.nodes,t=e.length;t--;){var r=e[t].optimizeNodes();Array.isArray(r)?e.splice.apply(e,[t,1].concat((0,_toConsumableArray4.default)(r))):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}},{key:"optimizeNames",value:function(e,t){for(var r=this.nodes,a=r.length;a--;){var n=r[a];n.optimizeNames(e,t)||(E(e,n.names),r.splice(a,1))}return r.length>0?this:void 0}},{key:"names",get:function(){return this.nodes.reduce((function(e,t){return P(e,t.names)}),{})}}]),t}(o),m=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"{"+e._n+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)+"}"+e._n}}]),t}(f),_=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),t}(f),h=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),t}(m);h.kind="else";var v=function(e){function t(e,r){var a;return(0,_classCallCheck4.default)(this,t),(a=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,r))).condition=e,a}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var r="if("+this.condition+")"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e);return this.else&&(r+="else "+this.else.render(e)),r}},{key:"optimizeNodes",value:function(){(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNodes",this).call(this);var e=this.condition;if(!0===e)return this.nodes;var r=this.else;if(r){var a=r.optimizeNodes();r=this.else=Array.isArray(a)?new h(a):a}return r?!1===e?r instanceof t?r:r.nodes:this.nodes.length?this:new t(T(e),r instanceof t?[r]:r.nodes):!1!==e&&this.nodes.length?this:void 0}},{key:"optimizeNames",value:function(e,r){var a;if(this.else=null===(a=this.else)||void 0===a?void 0:a.optimizeNames(e,r),(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNames",this).call(this,e,r)||this.else)return this.condition=C(this.condition,e,r),this}},{key:"names",get:function(){var e=(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"names",this);return x(e,this.condition),this.else&&P(e,this.else.names),e}}]),t}(m);v.kind="if";var g=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),t}(m);g.kind="for";var y=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).iteration=e,r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"for("+this.iteration+")"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,r){if((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNames",this).call(this,e,r))return this.iteration=C(this.iteration,e,r),this}},{key:"names",get:function(){return P((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"names",this),this.iteration.names)}}]),t}(g),b=function(e){function t(e,r,a,n){var o;return(0,_classCallCheck4.default)(this,t),(o=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).varKind=e,o.name=r,o.from=a,o.to=n,o}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var a=e.es5?r.varKinds.var:this.varKind,n=this.name;return"for("+a+" "+n+"="+this.from+"; "+n+"<"+this.to+"; "+n+"++)"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}},{key:"names",get:function(){var e=x((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"names",this),this.from);return x(e,this.to)}}]),t}(g),$=function(e){function t(e,r,a,n){var o;return(0,_classCallCheck4.default)(this,t),(o=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).loop=e,o.varKind=r,o.name=a,o.iterable=n,o}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"for("+this.varKind+" "+this.name+" "+this.loop+" "+this.iterable+")"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}},{key:"optimizeNames",value:function(e,r){if((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNames",this).call(this,e,r))return this.iterable=C(this.iterable,e,r),this}},{key:"names",get:function(){return P((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"names",this),this.iterable.names)}}]),t}(g),w=function(e){function t(e,r,a){var n;return(0,_classCallCheck4.default)(this,t),(n=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).name=e,n.args=r,n.async=a,n}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return(this.async?"async ":"")+"function "+this.name+"("+this.args+")"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}}]),t}(m);w.kind="func";var j=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"return "+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}}]),t}(f);j.kind="return";var O=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){var r="try"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}},{key:"optimizeNodes",value:function(){var e,r;return(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNodes",this).call(this),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(r=this.finally)||void 0===r||r.optimizeNodes(),this}},{key:"optimizeNames",value:function(e,r){var a,n;return(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"optimizeNames",this).call(this,e,r),null===(a=this.catch)||void 0===a||a.optimizeNames(e,r),null===(n=this.finally)||void 0===n||n.optimizeNames(e,r),this}},{key:"names",get:function(){var e=(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"names",this);return this.catch&&P(e,this.catch.names),this.finally&&P(e,this.finally.names),e}}]),t}(m),k=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this))).error=e,r}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"catch("+this.error+")"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}}]),t}(m);k.kind="catch";var S=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"render",value:function(e){return"finally"+(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"render",this).call(this,e)}}]),t}(m);function P(e,t){for(var r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function x(e,r){return r instanceof t._CodeOrName?P(e,r.names):e}function C(e,r,a){return e instanceof t.Name?o(e):(n=e)instanceof t._Code&&n._items.some((function(e){return e instanceof t.Name&&1===r[e.str]&&void 0!==a[e.str]}))?new t._Code(e._items.reduce((function(e,r){return r instanceof t.Name&&(r=o(r)),r instanceof t._Code?e.push.apply(e,(0,_toConsumableArray4.default)(r._items)):e.push(r),e}),[])):e;var n;function o(e){var t=a[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function E(e,t){for(var r in t)e[r]=(e[r]||0)-(t[r]||0)}function T(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._(_templateObject7,R(e))}S.kind="finally",e.CodeGen=function(){function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_classCallCheck4.default)(this,a),this._values={},this._blockStarts=[],this._constants={},this.opts=(0,_extends4.default)({},t,{_n:t.lines?"\n":""}),this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new _]}return(0,_createClass4.default)(a,[{key:"toString",value:function(){return this._root.render(this.opts)}},{key:"name",value:function(e){return this._scope.name(e)}},{key:"scopeName",value:function(e){return this._extScope.name(e)}},{key:"scopeValue",value:function(e,t){var r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new _set2.default)).add(r),r}},{key:"getScopeValue",value:function(e,t){return this._extScope.getValue(e,t)}},{key:"scopeRefs",value:function(e){return this._extScope.scopeRefs(e,this._values)}},{key:"scopeCode",value:function(){return this._extScope.scopeCode(this._values)}},{key:"_def",value:function(e,t,r,a){var n=this._scope.toName(t);return void 0!==r&&a&&(this._constants[n.str]=r),this._leafNode(new i(e,n,r)),n}},{key:"const",value:function(e,t,a){return this._def(r.varKinds.const,e,t,a)}},{key:"let",value:function(e,t,a){return this._def(r.varKinds.let,e,t,a)}},{key:"var",value:function(e,t,a){return this._def(r.varKinds.var,e,t,a)}},{key:"assign",value:function(e,t,r){return this._leafNode(new s(e,t,r))}},{key:"add",value:function(t,r){return this._leafNode(new l(t,e.operators.ADD,r))}},{key:"code",value:function(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new p(e)),this}},{key:"object",value:function(){for(var e=["{"],r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var o=!0,i=!1,s=void 0;try{for(var l,u=(0,_getIterator3.default)(a);!(o=(l=u.next()).done);o=!0){var c=l.value,d=(0,_slicedToArray4.default)(c,2),p=d[0],f=d[1];e.length>1&&e.push(","),e.push(p),(p!==f||this.opts.es5)&&(e.push(":"),(0,t.addCodeArg)(e,f))}}catch(e){i=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}return e.push("}"),new t._Code(e)}},{key:"if",value:function(e,t,r){if(this._blockNode(new v(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}},{key:"elseIf",value:function(e){return this._elseNode(new v(e))}},{key:"else",value:function(){return this._elseNode(new h)}},{key:"endIf",value:function(){return this._endBlockNode(v,h)}},{key:"_for",value:function(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}},{key:"for",value:function(e,t){return this._for(new y(e),t)}},{key:"forRange",value:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?r.varKinds.var:r.varKinds.let,i=this._scope.toName(e);return this._for(new b(o,i,t,a),(function(){return n(i)}))}},{key:"forOf",value:function(e,a,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.varKinds.const,s=this._scope.toName(e);if(this.opts.es5){var l=a instanceof t.Name?a:this.var("_arr",a);return this.forRange("_i",0,t._(_templateObject8,l),(function(e){o.var(s,t._(_templateObject9,l,e)),n(s)}))}return this._for(new $("of",i,s,a),(function(){return n(s)}))}},{key:"forIn",value:function(e,a,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?r.varKinds.var:r.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,t._(_templateObject10,a),n);var i=this._scope.toName(e);return this._for(new $("in",o,i,a),(function(){return n(i)}))}},{key:"endFor",value:function(){return this._endBlockNode(g)}},{key:"label",value:function(e){return this._leafNode(new u(e))}},{key:"break",value:function(e){return this._leafNode(new c(e))}},{key:"return",value:function(e){var t=new j;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(j)}},{key:"try",value:function(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');var a=new O;if(this._blockNode(a),this.code(e),t){var n=this.name("e");this._currNode=a.catch=new k(n),t(n)}return r&&(this._currNode=a.finally=new S,this.code(r)),this._endBlockNode(k,S)}},{key:"throw",value:function(e){return this._leafNode(new d(e))}},{key:"block",value:function(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}},{key:"endBlock",value:function(e){var t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");var r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error("CodeGen: wrong number of nodes: "+r+" vs "+e+" expected");return this._nodes.length=t,this}},{key:"func",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.nil,a=arguments[2],n=arguments[3];return this._blockNode(new w(e,r,a)),n&&this.code(n).endFunc(),this}},{key:"endFunc",value:function(){return this._endBlockNode(w)}},{key:"optimize",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}},{key:"_leafNode",value:function(e){return this._currNode.nodes.push(e),this}},{key:"_blockNode",value:function(e){this._currNode.nodes.push(e),this._nodes.push(e)}},{key:"_endBlockNode",value:function(e,t){var r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'+(t?e.kind+"/"+t.kind:e.kind)+'"')}},{key:"_elseNode",value:function(e){var t=this._currNode;if(!(t instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}},{key:"_root",get:function(){return this._nodes[0]}},{key:"_currNode",get:function(){var e=this._nodes;return e[e.length-1]},set:function(e){var t=this._nodes;t[t.length-1]=e}}]),a}(),e.not=T;var D=I(e.operators.AND);e.and=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(D)};var A=I(e.operators.OR);function I(e){return function(r,a){return r===t.nil?a:a===t.nil?r:t._(_templateObject11,R(r),e,R(a))}}function R(e){return e instanceof t.Name?e:t._(_templateObject12,e)}e.or=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(A)}}(codegen);var util={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;var t=codegen,r=code$1;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,r=e.opts,a=e.self;if(r.strictSchema&&"boolean"!=typeof t){var n=a.RULES.keywords;for(var o in t)n[o]||p(e,'unknown keyword: "'+o+'"')}}function n(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0;return!1}function o(e){return"number"==typeof e?""+e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function i(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function s(e){var r=e.mergeNames,a=e.mergeToName,n=e.mergeValues,o=e.resultToName;return function(e,i,s,l){var u=void 0===s?i:s instanceof t.Name?(i instanceof t.Name?r(e,i,s):a(e,i,s),s):i instanceof t.Name?(a(e,s,i),i):n(i,s);return l!==t.Name||u instanceof t.Name?u:o(e,u)}}function l(e,r){if(!0===r)return e.var("props",!0);var a=e.var("props",t._(_templateObject13));return void 0!==r&&u(e,a,r),a}function u(e,r,a){(0,_keys2.default)(a).forEach((function(a){return e.assign(t._(_templateObject,r,(0,t.getProperty)(a)),!0)}))}e.toHash=function(e){var t={},r=!0,a=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)(e);!(r=(o=i.next()).done);r=!0){t[o.value]=!0}}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}return t},e.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===(0,_keys2.default)(t).length||(a(e,t),!n(t,e.self.RULES.all))},e.checkUnknownRules=a,e.schemaHasRules=n,e.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if("$ref"!==r&&t.all[r])return!0;return!1},e.schemaRefOrVal=function(e,r,a,n){var o=e.topSchemaRef,i=e.schemaPath;if(!n){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return t._(_templateObject14,r)}return t._(_templateObject6,o,i,(0,t.getProperty)(a))},e.unescapeFragment=function(e){return i(decodeURIComponent(e))},e.escapeFragment=function(e){return encodeURIComponent(o(e))},e.escapeJsonPointer=o,e.unescapeJsonPointer=i,e.eachItem=function(e,t){if(Array.isArray(e)){var r=!0,a=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)(e);!(r=(o=i.next()).done);r=!0){t(o.value)}}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}}else t(e)},e.mergeEvaluated={props:s({mergeNames:function(e,r,a){return e.if(t._(_templateObject15,a,r),(function(){e.if(t._(_templateObject16,r),(function(){return e.assign(a,!0)}),(function(){return e.assign(a,t._(_templateObject17,a)).code(t._(_templateObject18,a,r))}))}))},mergeToName:function(e,r,a){return e.if(t._(_templateObject19,a),(function(){!0===r?e.assign(a,!0):(e.assign(a,t._(_templateObject17,a)),u(e,a,r))}))},mergeValues:function(e,t){return!0===e||(0,_extends4.default)({},e,t)},resultToName:l}),items:s({mergeNames:function(e,r,a){return e.if(t._(_templateObject15,a,r),(function(){return e.assign(a,t._(_templateObject20,r,a,r,a,r))}))},mergeToName:function(e,r,a){return e.if(t._(_templateObject19,a),(function(){return e.assign(a,!0===r||t._(_templateObject21,a,r,a,r))}))},mergeValues:function(e,t){return!0===e||Math.max(e,t)},resultToName:function(e,t){return e.var("items",t)}})},e.evaluatedPropsToName=l,e.setEvaluated=u;var c,d={};function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(r){if(t="strict mode: "+t,!0===r)throw new Error(t);e.self.logger.warn(t)}}e.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:d[t.code]||(d[t.code]=new r._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(c=e.Type||(e.Type={})),e.getErrorPath=function(e,r,a){if(e instanceof t.Name){var n=r===c.Num;return a?n?t._(_templateObject22,e):t._(_templateObject23,e):n?t._(_templateObject24,e):t._(_templateObject25,e)}return a?(0,t.getProperty)(e).toString():"/"+o(e)},e.checkStrictMode=p}(util);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});var codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=codegen,r=util,a=names$1;function n(e,r){var n=e.const("err",r);e.if(t._(_templateObject26,a.default.vErrors),(function(){return e.assign(a.default.vErrors,t._(_templateObject2,n))}),t._(_templateObject27,a.default.vErrors,n)),e.code(t._(_templateObject28,a.default.errors))}function o(e,r){var a=e.gen,n=e.validateName;e.schemaEnv.$async?a.throw(t._(_templateObject29,e.ValidationError,r)):(a.assign(t._(_templateObject30,n),r),a.return(!1))}e.keywordError={message:function(e){var r=e.keyword;return t.str(_templateObject31,r)}},e.keyword$DataError={message:function(e){var r=e.keyword,a=e.schemaType;return a?t.str(_templateObject32,r,a):t.str(_templateObject33,r)}},e.reportError=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,i=arguments[2],l=arguments[3],u=r.it,c=u.gen,d=u.compositeRule,p=u.allErrors,f=s(r,a,i);(null!=l?l:d||p)?n(c,f):o(u,t._(_templateObject2,f))},e.reportExtraError=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keywordError,i=arguments[2],l=t.it,u=l.gen,c=l.compositeRule,d=l.allErrors;n(u,s(t,r,i)),c||d||o(l,a.default.vErrors)},e.resetErrorsCount=function(e,r){e.assign(a.default.errors,r),e.if(t._(_templateObject34,a.default.vErrors),(function(){return e.if(r,(function(){return e.assign(t._(_templateObject8,a.default.vErrors),r)}),(function(){return e.assign(a.default.vErrors,null)}))}))},e.extendErrors=function(e){var r=e.gen,n=e.keyword,o=e.schemaValue,i=e.data,s=e.errsCount,l=e.it;if(void 0===s)throw new Error("ajv implementation error");var u=r.name("err");r.forRange("i",s,a.default.errors,(function(e){r.const(u,t._(_templateObject9,a.default.vErrors,e)),r.if(t._(_templateObject35,u),(function(){return r.assign(t._(_templateObject36,u),(0,t.strConcat)(a.default.instancePath,l.errorPath))})),r.assign(t._(_templateObject37,u),t.str(_templateObject38,l.errSchemaPath,n)),l.opts.verbose&&(r.assign(t._(_templateObject39,u),o),r.assign(t._(_templateObject40,u),i))}))};var i={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function s(e,r,n){return!1===e.it.createErrors?t._(_templateObject13):function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.gen,s=e.it,c=[l(s,n),u(e,n)];return function(e,r,n){var o=r.params,s=r.message,l=e.keyword,u=e.data,c=e.schemaValue,d=e.it,p=d.opts,f=d.propertyName,m=d.topSchemaRef,_=d.schemaPath;n.push([i.keyword,l],[i.params,"function"==typeof o?o(e):o||t._(_templateObject13)]),p.messages&&n.push([i.message,"function"==typeof s?s(e):s]),p.verbose&&n.push([i.schema,c],[i.parentSchema,t._(_templateObject,m,_)],[a.default.data,u]),f&&n.push([i.propertyName,f])}(e,r,c),o.object.apply(o,c)}(e,r,n)}function l(e,n){var o=e.errorPath,i=n.instancePath,s=i?t.str(_templateObject,o,(0,r.getErrorPath)(i,r.Type.Str)):o;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,s)]}function u(e,a){var n=e.keyword,o=e.it.errSchemaPath,s=a.schemaPath,l=a.parentSchema?o:t.str(_templateObject38,o,n);return s&&(l=t.str(_templateObject,l,(0,r.getErrorPath)(s,r.Type.Str))),[i.schemaPath,l]}}(errors),Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;var errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(e){var t=e.gen,r=e.schema,a=e.validateName;!1===r?falseSchemaError(e,!1):"object"==(void 0===r?"undefined":(0,_typeof4.default)(r))&&!0===r.$async?t.return(names_1$6.default.data):(t.assign(codegen_1$s._(_templateObject30,a),null),t.return(!0))}function boolOrEmptySchema(e,t){var r=e.gen;!1===e.schema?(r.var(t,!1),falseSchemaError(e)):r.var(t,!0)}function falseSchemaError(e,t){var r={gen:e.gen,keyword:"false schema",data:e.data,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,errors_1$2.reportError)(r,boolError,void 0,t)}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema,boolSchema.boolOrEmptySchema=boolOrEmptySchema;var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;var _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new _set2.default(_jsonTypes);function isJSONType(e){return"string"==typeof e&&jsonTypes.has(e)}function getRules(){var e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:(0,_extends4.default)({},e,{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}rules.isJSONType=isJSONType,rules.getRules=getRules;var applicability={};function schemaHasRulesForType(e,t){var r=e.schema,a=e.self.RULES.types[t];return a&&!0!==a&&shouldUseGroup(r,a)}function shouldUseGroup(e,t){return t.rules.some((function(t){return shouldUseRule(e,t)}))}function shouldUseRule(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((function(t){return void 0!==e[t]})))}Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0,applicability.schemaHasRulesForType=schemaHasRulesForType,applicability.shouldUseGroup=shouldUseGroup,applicability.shouldUseRule=shouldUseRule,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;var t,r=rules,a=applicability,n=errors,o=codegen,i=util;function s(e){var t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(t=e.DataType||(e.DataType={})),e.getSchemaTypes=function(e){var t=s(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=s,e.coerceAndCheckDataType=function(e,r){var n=e.gen,i=e.data,s=e.opts,u=function(e,t){return t?e.filter((function(e){return l.has(e)||"array"===t&&"array"===e})):[]}(r,s.coerceTypes),d=r.length>0&&!(0===u.length&&1===r.length&&(0,a.schemaHasRulesForType)(e,r[0]));if(d){var f=c(r,i,s.strictNumbers,t.Wrong);n.if(f,(function(){u.length?function(e,t,r){var a=e.gen,n=e.data,i=e.opts,s=a.let("dataType",o._(_templateObject41,n)),u=a.let("coerced",o._(_templateObject42));"array"===i.coerceTypes&&a.if(o._(_templateObject43,s,n,n),(function(){return a.assign(n,o._(_templateObject44,n)).assign(s,o._(_templateObject41,n)).if(c(t,n,i.strictNumbers),(function(){return a.assign(u,n)}))})),a.if(o._(_templateObject45,u));var d=!0,f=!1,m=void 0;try{for(var _,h=(0,_getIterator3.default)(r);!(d=(_=h.next()).done);d=!0){var v=_.value;(l.has(v)||"array"===v&&"array"===i.coerceTypes)&&g(v)}}catch(e){f=!0,m=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw m}}function g(e){switch(e){case"string":return void a.elseIf(o._(_templateObject46,s,s)).assign(u,o._(_templateObject47,n)).elseIf(o._(_templateObject26,n)).assign(u,o._(_templateObject48));case"number":return void a.elseIf(o._(_templateObject49,s,n,s,n,n,n)).assign(u,o._(_templateObject50,n));case"integer":return void a.elseIf(o._(_templateObject51,s,n,s,n,n,n,n)).assign(u,o._(_templateObject50,n));case"boolean":return void a.elseIf(o._(_templateObject52,n,n,n)).assign(u,!1).elseIf(o._(_templateObject53,n,n)).assign(u,!0);case"null":return a.elseIf(o._(_templateObject54,n,n,n)),void a.assign(u,null);case"array":a.elseIf(o._(_templateObject55,s,s,s,n)).assign(u,o._(_templateObject2,n))}}a.else(),p(e),a.endIf(),a.if(o._(_templateObject45,u),(function(){a.assign(n,u),function(e,t){var r=e.gen,a=e.parentData,n=e.parentDataProperty;r.if(o._(_templateObject45,a),(function(){return r.assign(o._(_templateObject9,a,n),t)}))}(e,u)}))}(e,r,u):p(e)}))}return d};var l=new _set2.default(["string","number","integer","boolean","null"]);function u(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.Correct,i=n===t.Correct?o.operators.EQ:o.operators.NEQ,s=void 0;switch(e){case"null":return o._(_templateObject56,r,i);case"array":s=o._(_templateObject57,r);break;case"object":s=o._(_templateObject58,r,r,r);break;case"integer":s=l(o._(_templateObject59,r,r));break;case"number":s=l();break;default:return o._(_templateObject60,r,i,e)}return n===t.Correct?s:(0,o.not)(s);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.nil;return(0,o.and)(o._(_templateObject61,r),e,a?o._(_templateObject62,r):o.nil)}}function c(e,t,r,a){if(1===e.length)return u(e[0],t,r,a);var n=void 0,s=(0,i.toHash)(e);if(s.array&&s.object){var l=o._(_templateObject63,t);n=s.null?l:o._(_templateObject64,t,l),delete s.null,delete s.array,delete s.object}else n=o.nil;for(var c in s.number&&delete s.integer,s)n=(0,o.and)(n,u(c,t,r,a));return n}e.checkDataType=u,e.checkDataTypes=c;var d={message:function(e){return"must be "+e.schema},params:function(e){var t=e.schema,r=e.schemaValue;return"string"==typeof t?o._(_templateObject65,t):o._(_templateObject65,r)}};function p(e){var t=function(e){var t=e.gen,r=e.data,a=e.schema,n=(0,i.schemaRefOrVal)(e,a,"type");return{gen:t,keyword:"type",data:r,schema:a.type,schemaCode:n,schemaValue:n,parentSchema:a,params:{},it:e}}(e);(0,n.reportError)(t,d)}e.reportTypeError=p}(dataType);var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.assignDefaults=void 0;var codegen_1$r=codegen,util_1$p=util;function assignDefaults(e,t){var r=e.schema,a=r.properties,n=r.items;if("object"===t&&a)for(var o in a)assignDefault(e,o,a[o].default);else"array"===t&&Array.isArray(n)&&n.forEach((function(t,r){return assignDefault(e,r,t.default)}))}function assignDefault(e,t,r){var a=e.gen,n=e.compositeRule,o=e.data,i=e.opts;if(void 0!==r){var s=codegen_1$r._(_templateObject,o,(0,codegen_1$r.getProperty)(t));if(n)(0,util_1$p.checkStrictMode)(e,"default is ignored for: "+s);else{var l=codegen_1$r._(_templateObject66,s);"empty"===i.useDefaults&&(l=codegen_1$r._(_templateObject67,l,s,s)),a.if(l,codegen_1$r._(_templateObject68,s,(0,codegen_1$r.stringify)(r)))}}}defaults.assignDefaults=assignDefaults;var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;var codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(e,t){var r=e.gen,a=e.data,n=e.it;r.if(noPropertyInData(r,a,t,n.opts.ownProperties),(function(){e.setParams({missingProperty:codegen_1$q._(_templateObject14,t)},!0),e.error()}))}function checkMissingProp(e,t,r){var a=e.gen,n=e.data,o=e.it.opts;return codegen_1$q.or.apply(void 0,(0,_toConsumableArray4.default)(t.map((function(e){return(0,codegen_1$q.and)(noPropertyInData(a,n,e,o.ownProperties),codegen_1$q._(_templateObject68,r,e))}))))}function reportMissingProp(e,t){e.setParams({missingProperty:t},!0),e.error()}function hasPropFunc(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:codegen_1$q._(_templateObject69)})}function isOwnProperty(e,t,r){return codegen_1$q._(_templateObject70,hasPropFunc(e),t,r)}function propertyInData(e,t,r,a){var n=codegen_1$q._(_templateObject71,t,(0,codegen_1$q.getProperty)(r));return a?codegen_1$q._(_templateObject72,n,isOwnProperty(e,t,r)):n}function noPropertyInData(e,t,r,a){var n=codegen_1$q._(_templateObject73,t,(0,codegen_1$q.getProperty)(r));return a?(0,codegen_1$q.or)(n,(0,codegen_1$q.not)(isOwnProperty(e,t,r))):n}function allSchemaProperties(e){return e?(0,_keys2.default)(e).filter((function(e){return"__proto__"!==e})):[]}function schemaProperties(e,t){return allSchemaProperties(t).filter((function(r){return!(0,util_1$o.alwaysValidSchema)(e,t[r])}))}function callValidateCode(e,t,r,a){var n=e.schemaCode,o=e.data,i=e.it,s=i.gen,l=i.topSchemaRef,u=i.schemaPath,c=i.errorPath,d=e.it,p=a?codegen_1$q._(_templateObject74,n,o,l,u):o,f=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,c)],[names_1$5.default.parentData,d.parentData],[names_1$5.default.parentDataProperty,d.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];d.opts.dynamicRef&&f.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);var m=codegen_1$q._(_templateObject75,p,s.object.apply(s,f));return r!==codegen_1$q.nil?codegen_1$q._(_templateObject70,t,r,m):codegen_1$q._(_templateObject76,t,m)}code.checkReportMissingProp=checkReportMissingProp,code.checkMissingProp=checkMissingProp,code.reportMissingProp=reportMissingProp,code.hasPropFunc=hasPropFunc,code.isOwnProperty=isOwnProperty,code.propertyInData=propertyInData,code.noPropertyInData=noPropertyInData,code.allSchemaProperties=allSchemaProperties,code.schemaProperties=schemaProperties,code.callValidateCode=callValidateCode;var newRegExp=codegen_1$q._(_templateObject77);function usePattern(e,t){var r=e.gen,a=e.it.opts,n=a.unicodeRegExp?"u":"",o=a.code.regExp,i=o(t,n);return r.scopeValue("pattern",{key:i.toString(),ref:i,code:codegen_1$q._(_templateObject78,"new RegExp"===o.code?newRegExp:(0,util_2$1.useFunc)(r,o),t,n)})}function validateArray(e){var t=e.gen,r=e.data,a=e.keyword,n=e.it,o=t.name("valid");if(n.allErrors){var i=t.let("valid",!0);return s((function(){return t.assign(i,!1)})),i}return t.var(o,!0),s((function(){return t.break()})),o;function s(n){var i=t.const("len",codegen_1$q._(_templateObject8,r));t.forRange("i",0,i,(function(r){e.subschema({keyword:a,dataProp:r,dataPropType:util_1$o.Type.Num},o),t.if((0,codegen_1$q.not)(o),n)}))}}function validateUnion(e){var t=e.gen,r=e.schema,a=e.keyword,n=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!r.some((function(e){return(0,util_1$o.alwaysValidSchema)(n,e)}))||n.opts.unevaluated){var o=t.let("valid",!1),i=t.name("_valid");t.block((function(){return r.forEach((function(r,n){var s=e.subschema({keyword:a,schemaProp:n,compositeRule:!0},i);t.assign(o,codegen_1$q._(_templateObject79,o,i)),e.mergeValidEvaluated(s,i)||t.if((0,codegen_1$q.not)(o))}))})),e.result(o,(function(){return e.reset()}),(function(){return e.error(!0)}))}}code.usePattern=usePattern,code.validateArray=validateArray,code.validateUnion=validateUnion,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;var codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(e,t){var r=e.gen,a=e.keyword,n=e.schema,o=e.parentSchema,i=e.it,s=t.macro.call(i.self,n,o,i),l=useKeyword(r,a,s);!1!==i.opts.validateSchema&&i.self.validateSchema(s,!0);var u=r.name("valid");e.subschema({schema:s,schemaPath:codegen_1$p.nil,errSchemaPath:i.errSchemaPath+"/"+a,topSchemaRef:l,compositeRule:!0},u),e.pass(u,(function(){return e.error(!0)}))}function funcKeywordCode(e,t){var r,a=e.gen,n=e.keyword,o=e.schema,i=e.parentSchema,s=e.$data,l=e.it;checkAsyncKeyword(l,t);var u=!s&&t.compile?t.compile.call(l.self,o,i,l):t.validate,c=useKeyword(a,n,u),d=a.let("valid");function p(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?codegen_1$p._(_templateObject80):codegen_1$p.nil,n=l.opts.passContext?names_1$4.default.this:names_1$4.default.self,o=!("compile"in t&&!s||!1===t.schema);a.assign(d,codegen_1$p._(_templateObject,r,(0,code_1$9.callValidateCode)(e,c,n,o)),t.modifying)}function f(e){var r;a.if((0,codegen_1$p.not)(null!==(r=t.valid)&&void 0!==r?r:d),e)}e.block$data(d,(function(){if(!1===t.errors)p(),t.modifying&&modifyData(e),f((function(){return e.error()}));else{var r=t.async?function(){var e=a.let("ruleErrs",null);return a.try((function(){return p(codegen_1$p._(_templateObject80))}),(function(t){return a.assign(d,!1).if(codegen_1$p._(_templateObject81,t,l.ValidationError),(function(){return a.assign(e,codegen_1$p._(_templateObject30,t))}),(function(){return a.throw(t)}))})),e}():function(){var e=codegen_1$p._(_templateObject30,c);return a.assign(e,null),p(codegen_1$p.nil),e}();t.modifying&&modifyData(e),f((function(){return addErrs(e,r)}))}})),e.ok(null!==(r=t.valid)&&void 0!==r?r:d)}function modifyData(e){var t=e.gen,r=e.data,a=e.it;t.if(a.parentData,(function(){return t.assign(r,codegen_1$p._(_templateObject9,a.parentData,a.parentDataProperty))}))}function addErrs(e,t){var r=e.gen;r.if(codegen_1$p._(_templateObject57,t),(function(){r.assign(names_1$4.default.vErrors,codegen_1$p._(_templateObject82,names_1$4.default.vErrors,t,names_1$4.default.vErrors,t)).assign(names_1$4.default.errors,codegen_1$p._(_templateObject8,names_1$4.default.vErrors)),(0,errors_1$1.extendErrors)(e)}),(function(){return e.error()}))}function checkAsyncKeyword(e,t){var r=e.schemaEnv;if(t.async&&!r.$async)throw new Error("async keyword in sync schema")}function useKeyword(e,t,r){if(void 0===r)throw new Error('keyword "'+t+'" failed to compile');return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,codegen_1$p.stringify)(r)})}function validSchemaType(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some((function(t){return"array"===t?Array.isArray(e):"object"===t?e&&"object"==(void 0===e?"undefined":(0,_typeof4.default)(e))&&!Array.isArray(e):(void 0===e?"undefined":(0,_typeof4.default)(e))==t||r&&void 0===e}))}function validateKeywordUsage(e,t,r){var a=e.schema,n=e.opts,o=e.self,i=e.errSchemaPath;if(Array.isArray(t.keyword)?!t.keyword.includes(r):t.keyword!==r)throw new Error("ajv implementation error");var s=t.dependencies;if(null==s?void 0:s.some((function(e){return!Object.prototype.hasOwnProperty.call(a,e)})))throw new Error("parent schema must have dependencies of "+r+": "+s.join(","));if(t.validateSchema&&!t.validateSchema(a[r])){var l='keyword "'+r+'" value is invalid at path "'+i+'": '+o.errorsText(t.validateSchema.errors);if("log"!==n.validateSchema)throw new Error(l);o.logger.error(l)}}keyword.macroKeywordCode=macroKeywordCode,keyword.funcKeywordCode=funcKeywordCode,keyword.validSchemaType=validSchemaType,keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;var codegen_1$o=codegen,util_1$n=util;function getSubschema(e,t){var r=t.keyword,a=t.schemaProp,n=t.schema,o=t.schemaPath,i=t.errSchemaPath,s=t.topSchemaRef;if(void 0!==r&&void 0!==n)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==r){var l=e.schema[r];return void 0===a?{schema:l,schemaPath:codegen_1$o._(_templateObject,e.schemaPath,(0,codegen_1$o.getProperty)(r)),errSchemaPath:e.errSchemaPath+"/"+r}:{schema:l[a],schemaPath:codegen_1$o._(_templateObject6,e.schemaPath,(0,codegen_1$o.getProperty)(r),(0,codegen_1$o.getProperty)(a)),errSchemaPath:e.errSchemaPath+"/"+r+"/"+(0,util_1$n.escapeFragment)(a)}}if(void 0!==n){if(void 0===o||void 0===i||void 0===s)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:o,topSchemaRef:s,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}function extendSubschemaData(e,t,r){var a=r.dataProp,n=r.dataPropType,o=r.data,i=r.dataTypes,s=r.propertyName;if(void 0!==o&&void 0!==a)throw new Error('both "data" and "dataProp" passed, only one allowed');var l=t.gen;if(void 0!==a){var u=t.errorPath,c=t.dataPathArr,d=t.opts;p(l.let("data",codegen_1$o._(_templateObject,t.data,(0,codegen_1$o.getProperty)(a)),!0)),e.errorPath=codegen_1$o.str(_templateObject,u,(0,util_1$n.getErrorPath)(a,n,d.jsPropertySyntax)),e.parentDataProperty=codegen_1$o._(_templateObject14,a),e.dataPathArr=[].concat((0,_toConsumableArray4.default)(c),[e.parentDataProperty])}function p(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new _set2.default,e.parentData=t.data,e.dataNames=[].concat((0,_toConsumableArray4.default)(t.dataNames),[r])}void 0!==o&&(p(o instanceof codegen_1$o.Name?o:l.let("data",o,!0)),void 0!==s&&(e.propertyName=s)),i&&(e.dataTypes=i)}function extendSubschemaMode(e,t){var r=t.jtdDiscriminator,a=t.jtdMetadata,n=t.compositeRule,o=t.createErrors,i=t.allErrors;void 0!==n&&(e.compositeRule=n),void 0!==o&&(e.createErrors=o),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=r,e.jtdMetadata=a}subschema.getSubschema=getSubschema,subschema.extendSubschemaData=extendSubschemaData,subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==(void 0===t?"undefined":(0,_typeof4.default)(t))&&"object"==(void 0===r?"undefined":(0,_typeof4.default)(r))){if(t.constructor!==r.constructor)return!1;var a,n,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=(0,_keys2.default)(t)).length)!==(0,_keys2.default)(r).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=a;0!=n--;){var i=o[n];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),_traverse(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function _traverse(e,t,r,a,n,o,i,s,l,u){if(a&&"object"==(void 0===a?"undefined":(0,_typeof4.default)(a))&&!Array.isArray(a)){for(var c in t(a,n,o,i,s,l,u),a){var d=a[c];if(Array.isArray(d)){if(c in traverse$1.arrayKeywords)for(var p=0;p<d.length;p++)_traverse(e,t,r,d[p],n+"/"+c+"/"+p,o,n,c,a,p)}else if(c in traverse$1.propsKeywords){if(d&&"object"==(void 0===d?"undefined":(0,_typeof4.default)(d)))for(var f in d)_traverse(e,t,r,d[f],n+"/"+c+"/"+escapeJsonPtr(f),o,n,c,a,f)}else(c in traverse$1.keywords||e.allKeys&&!(c in traverse$1.skipKeywords))&&_traverse(e,t,r,d,n+"/"+c,o,n,c,a)}r(a,n,o,i,s,l,u)}}function escapeJsonPtr(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Object.defineProperty(resolve$1,"__esModule",{value:!0}),resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;var util_1$m=util,equal$2=fastDeepEqual,traverse=jsonSchemaTraverse.exports,SIMPLE_INLINED=new _set2.default(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!hasRef(e):!!t&&countKeys(e)<=t)}resolve$1.inlineRef=inlineRef;var REF_KEYWORDS=new _set2.default(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(e){for(var t in e){if(REF_KEYWORDS.has(t))return!0;var r=e[t];if(Array.isArray(r)&&r.some(hasRef))return!0;if("object"==(void 0===r?"undefined":(0,_typeof4.default)(r))&&hasRef(r))return!0}return!1}function countKeys(e){var t=0;for(var r in e){if("$ref"===r)return 1/0;if(t++,!SIMPLE_INLINED.has(r)&&("object"==(0,_typeof4.default)(e[r])&&(0,util_1$m.eachItem)(e[r],(function(e){return t+=countKeys(e)})),t===1/0))return 1/0}return t}function getFullPath(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];!1!==r&&(t=normalizeId(t));var a=e.parse(t);return _getFullPath(e,a)}function _getFullPath(e,t){return e.serialize(t).split("#")[0]+"#"}resolve$1.getFullPath=getFullPath,resolve$1._getFullPath=_getFullPath;var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(e){return e?e.replace(TRAILING_SLASH_HASH,""):""}function resolveUrl(e,t,r){return r=normalizeId(r),e.resolve(t,r)}resolve$1.normalizeId=normalizeId,resolve$1.resolveUrl=resolveUrl;var ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(e,t){var r=this;if("boolean"==typeof e)return{};var a=this.opts,n=a.schemaId,o=a.uriResolver,i=normalizeId(e[n]||t),s={"":i},l=getFullPath(o,i,!1),u={},c=new _set2.default;return traverse(e,{allKeys:!0},(function(e,t,a,o){if(void 0!==o){var i=l+t,f=s[o];"string"==typeof e[n]&&(f=m.call(r,e[n])),_.call(r,e.$anchor),_.call(r,e.$dynamicAnchor),s[t]=f}function m(t){var r=this.opts.uriResolver.resolve;if(t=normalizeId(f?r(f,t):t),c.has(t))throw p(t);c.add(t);var a=this.refs[t];return"string"==typeof a&&(a=this.refs[a]),"object"==(void 0===a?"undefined":(0,_typeof4.default)(a))?d(e,a.schema,t):t!==normalizeId(i)&&("#"===t[0]?(d(e,u[t],t),u[t]=e):this.refs[t]=i),t}function _(e){if("string"==typeof e){if(!ANCHOR.test(e))throw new Error('invalid anchor "'+e+'"');m.call(this,"#"+e)}}})),u;function d(e,t,r){if(void 0!==t&&!equal$2(e,t))throw p(r)}function p(e){return new Error('reference "'+e+'" resolves to more than one schema')}}resolve$1.getSchemaRefs=getSchemaRefs,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.getData=validate$1.KeywordCxt=validate$1.validateFunctionCode=void 0;var boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util,errors_1=errors;function validateFunctionCode(e){isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))?topSchemaObjCode(e):validateFunction(e,(function(){return(0,boolSchema_1.topBoolOrEmptySchema)(e)}))}function validateFunction(e,t){var r=e.gen,a=e.validateName,n=e.schema,o=e.schemaEnv,i=e.opts;i.code.es5?r.func(a,codegen_1$n._(_templateObject75,names_1$3.default.data,names_1$3.default.valCxt),o.$async,(function(){r.code(codegen_1$n._(_templateObject83,funcSourceUrl(n,i))),destructureValCxtES5(r,i),r.code(t)})):r.func(a,codegen_1$n._(_templateObject75,names_1$3.default.data,destructureValCxt(i)),o.$async,(function(){return r.code(funcSourceUrl(n,i)).code(t)}))}function destructureValCxt(e){return codegen_1$n._(_templateObject84,names_1$3.default.instancePath,names_1$3.default.parentData,names_1$3.default.parentDataProperty,names_1$3.default.rootData,names_1$3.default.data,e.dynamicRef?codegen_1$n._(_templateObject85,names_1$3.default.dynamicAnchors):codegen_1$n.nil)}function destructureValCxtES5(e,t){e.if(names_1$3.default.valCxt,(function(){e.var(names_1$3.default.instancePath,codegen_1$n._(_templateObject86,names_1$3.default.valCxt,names_1$3.default.instancePath)),e.var(names_1$3.default.parentData,codegen_1$n._(_templateObject86,names_1$3.default.valCxt,names_1$3.default.parentData)),e.var(names_1$3.default.parentDataProperty,codegen_1$n._(_templateObject86,names_1$3.default.valCxt,names_1$3.default.parentDataProperty)),e.var(names_1$3.default.rootData,codegen_1$n._(_templateObject86,names_1$3.default.valCxt,names_1$3.default.rootData)),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,codegen_1$n._(_templateObject86,names_1$3.default.valCxt,names_1$3.default.dynamicAnchors))}),(function(){e.var(names_1$3.default.instancePath,codegen_1$n._(_templateObject48)),e.var(names_1$3.default.parentData,codegen_1$n._(_templateObject42)),e.var(names_1$3.default.parentDataProperty,codegen_1$n._(_templateObject42)),e.var(names_1$3.default.rootData,names_1$3.default.data),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,codegen_1$n._(_templateObject13))}))}function topSchemaObjCode(e){var t=e.schema,r=e.opts,a=e.gen;validateFunction(e,(function(){r.$comment&&t.$comment&&commentKeyword(e),checkNoDefault(e),a.let(names_1$3.default.vErrors,null),a.let(names_1$3.default.errors,0),r.unevaluated&&resetEvaluated(e),typeAndKeywords(e),returnResults(e)}))}function resetEvaluated(e){var t=e.gen,r=e.validateName;e.evaluated=t.const("evaluated",codegen_1$n._(_templateObject87,r)),t.if(codegen_1$n._(_templateObject88,e.evaluated),(function(){return t.assign(codegen_1$n._(_templateObject89,e.evaluated),codegen_1$n._(_templateObject42))})),t.if(codegen_1$n._(_templateObject90,e.evaluated),(function(){return t.assign(codegen_1$n._(_templateObject91,e.evaluated),codegen_1$n._(_templateObject42))}))}function funcSourceUrl(e,t){var r="object"==(void 0===e?"undefined":(0,_typeof4.default)(e))&&e[t.schemaId];return r&&(t.code.source||t.code.process)?codegen_1$n._(_templateObject92,r):codegen_1$n.nil}function subschemaCode(e,t){isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))?subSchemaObjCode(e,t):(0,boolSchema_1.boolOrEmptySchema)(e,t)}function schemaCxtHasRules(e){var t=e.schema,r=e.self;if("boolean"==typeof t)return!t;for(var a in t)if(r.RULES.all[a])return!0;return!1}function isSchemaObj(e){return"boolean"!=typeof e.schema}function subSchemaObjCode(e,t){var r=e.schema,a=e.gen;e.opts.$comment&&r.$comment&&commentKeyword(e),updateContext(e),checkAsyncSchema(e);var n=a.const("_errs",names_1$3.default.errors);typeAndKeywords(e,n),a.var(t,codegen_1$n._(_templateObject93,n,names_1$3.default.errors))}function checkKeywords(e){(0,util_1$l.checkUnknownRules)(e),checkRefsAndKeywords(e)}function typeAndKeywords(e,t){if(e.opts.jtd)return schemaKeywords(e,[],!1,t);var r=(0,dataType_1$1.getSchemaTypes)(e.schema);schemaKeywords(e,r,!(0,dataType_1$1.coerceAndCheckDataType)(e,r),t)}function checkRefsAndKeywords(e){var t=e.schema,r=e.errSchemaPath,a=e.opts,n=e.self;t.$ref&&a.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn('$ref: keywords ignored in schema at path "'+r+'"')}function checkNoDefault(e){var t=e.schema,r=e.opts;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,util_1$l.checkStrictMode)(e,"default is ignored in the schema root")}function updateContext(e){var t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,resolve_1$2.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function checkAsyncSchema(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword(e){var t=e.gen,r=e.schemaEnv,a=e.schema,n=e.errSchemaPath,o=e.opts,i=a.$comment;if(!0===o.$comment)t.code(codegen_1$n._(_templateObject94,names_1$3.default.self,i));else if("function"==typeof o.$comment){var s=codegen_1$n.str(_templateObject95,n),l=t.scopeValue("root",{ref:r.root});t.code(codegen_1$n._(_templateObject96,names_1$3.default.self,i,s,l))}}function returnResults(e){var t=e.gen,r=e.schemaEnv,a=e.validateName,n=e.ValidationError,o=e.opts;r.$async?t.if(codegen_1$n._(_templateObject97,names_1$3.default.errors),(function(){return t.return(names_1$3.default.data)}),(function(){return t.throw(codegen_1$n._(_templateObject29,n,names_1$3.default.vErrors))})):(t.assign(codegen_1$n._(_templateObject30,a),names_1$3.default.vErrors),o.unevaluated&&assignEvaluated(e),t.return(codegen_1$n._(_templateObject97,names_1$3.default.errors)))}function assignEvaluated(e){var t=e.gen,r=e.evaluated,a=e.props,n=e.items;a instanceof codegen_1$n.Name&&t.assign(codegen_1$n._(_templateObject89,r),a),n instanceof codegen_1$n.Name&&t.assign(codegen_1$n._(_templateObject91,r),n)}function schemaKeywords(e,t,r,a){var n=e.gen,o=e.schema,i=e.data,s=e.allErrors,l=e.opts,u=e.self.RULES;function c(u){(0,applicability_1.shouldUseGroup)(o,u)&&(u.type?(n.if((0,dataType_2.checkDataType)(u.type,i,l.strictNumbers)),iterateKeywords(e,u),1===t.length&&t[0]===u.type&&r&&(n.else(),(0,dataType_2.reportTypeError)(e)),n.endIf()):iterateKeywords(e,u),s||n.if(codegen_1$n._(_templateObject93,names_1$3.default.errors,a||0)))}!o.$ref||!l.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(o,u)?(l.jtd||checkStrictTypes(e,t),n.block((function(){var e=!0,t=!1,r=void 0;try{for(var a,n=(0,_getIterator3.default)(u.rules);!(e=(a=n.next()).done);e=!0){c(a.value)}}catch(e){t=!0,r=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw r}}c(u.post)}))):n.block((function(){return keywordCode(e,"$ref",u.all.$ref.definition)}))}function iterateKeywords(e,t){var r=e.gen,a=e.schema;e.opts.useDefaults&&(0,defaults_1.assignDefaults)(e,t.type),r.block((function(){var r=!0,n=!1,o=void 0;try{for(var i,s=(0,_getIterator3.default)(t.rules);!(r=(i=s.next()).done);r=!0){var l=i.value;(0,applicability_1.shouldUseRule)(a,l)&&keywordCode(e,l.keyword,l.definition,t.type)}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}))}function checkStrictTypes(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(checkContextTypes(e,t),e.opts.allowUnionTypes||checkMultipleTypes(e,t),checkKeywordTypes(e,e.dataTypes))}function checkContextTypes(e,t){t.length&&(e.dataTypes.length?(t.forEach((function(t){includesType(e.dataTypes,t)||strictTypesError(e,'type "'+t+'" not allowed by context "'+e.dataTypes.join(",")+'"')})),e.dataTypes=e.dataTypes.filter((function(e){return includesType(t,e)}))):e.dataTypes=t)}function checkMultipleTypes(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&strictTypesError(e,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(e,t){var r=e.self.RULES.all;for(var a in r){var n=r[a];if("object"==(void 0===n?"undefined":(0,_typeof4.default)(n))&&(0,applicability_1.shouldUseRule)(e.schema,n)){var o=n.definition.type;o.length&&!o.some((function(e){return hasApplicableType(t,e)}))&&strictTypesError(e,'missing type "'+o.join(",")+'" for keyword "'+a+'"')}}}function hasApplicableType(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function includesType(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function strictTypesError(e,t){t+=' at "'+(e.schemaEnv.baseId+e.errSchemaPath)+'" (strictTypes)',(0,util_1$l.checkStrictMode)(e,t,e.opts.strictTypes)}validate$1.validateFunctionCode=validateFunctionCode;var KeywordCxt=function(){function e(t,r,a){if((0,_classCallCheck4.default)(this,e),(0,keyword_1.validateKeywordUsage)(t,r,a),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=a,this.data=t.data,this.schema=t.schema[a],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(t,this.schema,a,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",getData(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(a+" value must be "+(0,_stringify2.default)(r.schemaType));("code"in r?r.trackErrors:!1!==r.errors)&&(this.errsCount=t.gen.const("_errs",names_1$3.default.errors))}return(0,_createClass4.default)(e,[{key:"result",value:function(e,t,r){this.failResult((0,codegen_1$n.not)(e),t,r)}},{key:"failResult",value:function(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}},{key:"pass",value:function(e,t){this.failResult((0,codegen_1$n.not)(e),void 0,t)}},{key:"fail",value:function(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}},{key:"fail$data",value:function(e){if(!this.$data)return this.fail(e);var t=this.schemaCode;this.fail(codegen_1$n._(_templateObject98,t,(0,codegen_1$n.or)(this.invalid$data(),e)))}},{key:"error",value:function(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}},{key:"_error",value:function(e,t){(e?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,t)}},{key:"$dataError",value:function(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}},{key:"reset",value:function(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}},{key:"ok",value:function(e){this.allErrors||this.gen.if(e)}},{key:"setParams",value:function(e,t){t?(0,_assign2.default)(this.params,e):this.params=e}},{key:"block$data",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:codegen_1$n.nil;this.gen.block((function(){r.check$data(e,a),t()}))}},{key:"check$data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:codegen_1$n.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:codegen_1$n.nil;if(this.$data){var r=this.gen,a=this.schemaCode,n=this.schemaType,o=this.def;r.if((0,codegen_1$n.or)(codegen_1$n._(_templateObject66,a),t)),e!==codegen_1$n.nil&&r.assign(e,!0),(n.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==codegen_1$n.nil&&r.assign(e,!1)),r.else()}}},{key:"invalid$data",value:function(){var e=this.gen,t=this.schemaCode,r=this.schemaType,a=this.def,n=this.it;return(0,codegen_1$n.or)(function(){if(r.length){if(!(t instanceof codegen_1$n.Name))throw new Error("ajv implementation error");var e=Array.isArray(r)?r:[r];return codegen_1$n._(_templateObject14,(0,dataType_2.checkDataTypes)(e,t,n.opts.strictNumbers,dataType_2.DataType.Wrong))}return codegen_1$n.nil}(),function(){if(a.validateSchema){var r=e.scopeValue("validate$data",{ref:a.validateSchema});return codegen_1$n._(_templateObject99,r,t)}return codegen_1$n.nil}())}},{key:"subschema",value:function(e,t){var r=(0,subschema_1.getSubschema)(this.it,e);(0,subschema_1.extendSubschemaData)(r,this.it,e),(0,subschema_1.extendSubschemaMode)(r,e);var a=(0,_extends4.default)({},this.it,r,{items:void 0,props:void 0});return subschemaCode(a,t),a}},{key:"mergeEvaluated",value:function(e,t){var r=this.it,a=this.gen;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=util_1$l.mergeEvaluated.props(a,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=util_1$l.mergeEvaluated.items(a,e.items,r.items,t)))}},{key:"mergeValidEvaluated",value:function(e,t){var r=this,a=this.it,n=this.gen;if(a.opts.unevaluated&&(!0!==a.props||!0!==a.items))return n.if(t,(function(){return r.mergeEvaluated(e,codegen_1$n.Name)})),!0}}]),e}();function keywordCode(e,t,r,a){var n=new KeywordCxt(e,r,t);"code"in r?r.code(n,a):n.$data&&r.validate?(0,keyword_1.funcKeywordCode)(n,r):"macro"in r?(0,keyword_1.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,keyword_1.funcKeywordCode)(n,r)}validate$1.KeywordCxt=KeywordCxt;var JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(e,t){var r=t.dataLevel,a=t.dataNames,n=t.dataPathArr,o=void 0,i=void 0;if(""===e)return names_1$3.default.rootData;if("/"===e[0]){if(!JSON_POINTER.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i=names_1$3.default.rootData}else{var s=RELATIVE_JSON_POINTER.exec(e);if(!s)throw new Error("Invalid JSON-pointer: "+e);var l=+s[1];if("#"===(o=s[2])){if(l>=r)throw new Error(v("property/index",l));return n[r-l]}if(l>r)throw new Error(v("data",l));if(i=a[r-l],!o)return i}var u=i,c=o.split("/"),d=!0,p=!1,f=void 0;try{for(var m,_=(0,_getIterator3.default)(c);!(d=(m=_.next()).done);d=!0){var h=m.value;h&&(i=codegen_1$n._(_templateObject,i,(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(h))),u=codegen_1$n._(_templateObject72,u,i))}}catch(e){p=!0,f=e}finally{try{!d&&_.return&&_.return()}finally{if(p)throw f}}return u;function v(e,t){return"Cannot access "+e+" "+t+" levels up, current level is "+r}}validate$1.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});var ValidationError=function(e){function t(e){var r;return(0,_classCallCheck4.default)(this,t),(r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,"validation failed"))).errors=e,r.ajv=r.validation=!0,r}return(0,_inherits3.default)(t,e),t}(Error);validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});var resolve_1$1=resolve$1,MissingRefError=function(e){function t(e,r,a,n){var o;return(0,_classCallCheck4.default)(this,t),(o=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,n||"can't resolve reference "+a+" from id "+r))).missingRef=(0,resolve_1$1.resolveUrl)(e,r,a),o.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(e,o.missingRef)),o}return(0,_inherits3.default)(t,e),t}(Error);ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;var codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util,validate_1$1=validate$1,SchemaEnv=function e(t){var r;(0,_classCallCheck4.default)(this,e);var a=void 0;this.refs={},this.dynamicAnchors={},"object"==(0,_typeof4.default)(t.schema)&&(a=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=null!==(r=t.baseId)&&void 0!==r?r:(0,resolve_1.normalizeId)(null==a?void 0:a[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=null==a?void 0:a.$async,this.refs={}};function compileSchema(e){var t=getCompilingSchema.call(this,e);if(t)return t;var r=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.root.baseId),a=this.opts.code,n=a.es5,o=a.lines,i=this.opts.ownProperties,s=new codegen_1$m.CodeGen(this.scope,{es5:n,lines:o,ownProperties:i}),l=void 0;e.$async&&(l=s.scopeValue("Error",{ref:validation_error_1.default,code:codegen_1$m._(_templateObject100)}));var u=s.scopeName("validate");e.validateName=u;var c={gen:s,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new _set2.default,topSchemaRef:s.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,codegen_1$m.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:codegen_1$m.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:codegen_1$m._(_templateObject48),opts:this.opts,self:this},d=void 0;try{this._compilations.add(e),(0,validate_1$1.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);var p=s.toString();d=s.scopeRefs(names_1$2.default.scope)+"return "+p,this.opts.code.process&&(d=this.opts.code.process(d,e));var f=new Function(""+names_1$2.default.self,""+names_1$2.default.scope,d)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=e.schema,f.schemaEnv=e,e.$async&&(f.$async=!0),!0===this.opts.code.source&&(f.source={validateName:u,validateCode:p,scopeValues:s._values}),this.opts.unevaluated){var m=c.props,_=c.items;f.evaluated={props:m instanceof codegen_1$m.Name?void 0:m,items:_ instanceof codegen_1$m.Name?void 0:_,dynamicProps:m instanceof codegen_1$m.Name,dynamicItems:_ instanceof codegen_1$m.Name},f.source&&(f.source.evaluated=(0,codegen_1$m.stringify)(f.evaluated))}return e.validate=f,e}catch(t){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),t}finally{this._compilations.delete(e)}}function resolveRef(e,t,r){var a;r=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,r);var n=e.refs[r];if(n)return n;var o=resolve.call(this,e,r);if(void 0===o){var i=null===(a=e.localRefs)||void 0===a?void 0:a[r],s=this.opts.schemaId;i&&(o=new SchemaEnv({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[r]=inlineOrCompile.call(this,o):void 0}function inlineOrCompile(e){return(0,resolve_1.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:compileSchema.call(this,e)}function getCompilingSchema(e){var t=!0,r=!1,a=void 0;try{for(var n,o=(0,_getIterator3.default)(this._compilations);!(t=(n=o.next()).done);t=!0){var i=n.value;if(sameSchemaEnv(i,e))return i}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}}function sameSchemaEnv(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function resolve(e,t){for(var r=void 0;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||resolveSchema.call(this,e,t)}function resolveSchema(e,t){var r=this.opts.uriResolver.parse(t),a=(0,resolve_1._getFullPath)(this.opts.uriResolver,r),n=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if((0,_keys2.default)(e.schema).length>0&&a===n)return getJsonPointer.call(this,r,e);var o=(0,resolve_1.normalizeId)(a),i=this.refs[o]||this.schemas[o];if("string"==typeof i){var s=resolveSchema.call(this,e,i);if("object"!=(0,_typeof4.default)(null==s?void 0:s.schema))return;return getJsonPointer.call(this,r,s)}if("object"==(0,_typeof4.default)(null==i?void 0:i.schema)){if(i.validate||compileSchema.call(this,i),o===(0,resolve_1.normalizeId)(t)){var l=i.schema,u=this.opts.schemaId,c=l[u];return c&&(n=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,c)),new SchemaEnv({schema:l,schemaId:u,root:e,baseId:n})}return getJsonPointer.call(this,r,i)}}compile.SchemaEnv=SchemaEnv,compile.compileSchema=compileSchema,compile.resolveRef=resolveRef,compile.getCompilingSchema=getCompilingSchema,compile.resolveSchema=resolveSchema;var PREVENT_SCOPE_CHANGE=new _set2.default(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,t){var r,a=t.baseId,n=t.schema,o=t.root;if("/"===(null===(r=e.fragment)||void 0===r?void 0:r[0])){var i=!0,s=!1,l=void 0;try{for(var u,c=(0,_getIterator3.default)(e.fragment.slice(1).split("/"));!(i=(u=c.next()).done);i=!0){var d=u.value;if("boolean"==typeof n)return;var p=n[(0,util_1$k.unescapeFragment)(d)];if(void 0===p)return;var f="object"==(0,_typeof4.default)(n=p)&&n[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(d)&&f&&(a=(0,resolve_1.resolveUrl)(this.opts.uriResolver,a,f))}}catch(e){s=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}var m=void 0;if("boolean"!=typeof n&&n.$ref&&!(0,util_1$k.schemaHasRulesButRef)(n,this.RULES)){var _=(0,resolve_1.resolveUrl)(this.opts.uriResolver,a,n.$ref);m=resolveSchema.call(this,o,_)}var h=this.opts.schemaId;return(m=m||new SchemaEnv({schema:n,schemaId:h,root:o,baseId:a})).schema!==m.root.schema?m:void 0}}var $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description:description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1},uri$1={},uri_all={exports:{}},t;
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */t=uri_all.exports,function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,n=1;n<a;++n)t[n]=t[n].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function o(e){var a="[A-Za-z]",n="[0-9]",o=t(n,"[A-Fa-f]"),i=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",s),u=e?"[\\uE000-\\uF8FF]":"[]",c=t(a,n,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(a+t(a,n,"[\\+\\-\\.]")+"*"),r(r(i+"|"+t(c,s,"[\\:]"))+"*");var d=r(r("25[0-5]")+"|"+r("2[0-4]"+n)+"|"+r("1"+n+n)+"|"+r("0?[1-9]"+n)+"|0?0?"+n),p=r(d+"\\."+d+"\\."+d+"\\."+d),f=r(o+"{1,4}"),m=r(r(f+"\\:"+f)+"|"+p),_=r(r(f+"\\:")+"{6}"+m),h=r("\\:\\:"+r(f+"\\:")+"{5}"+m),v=r(r(f)+"?\\:\\:"+r(f+"\\:")+"{4}"+m),g=r(r(r(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+r(f+"\\:")+"{3}"+m),y=r(r(r(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+r(f+"\\:")+"{2}"+m),b=r(r(r(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+m),$=r(r(r(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+m),w=r(r(r(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),j=r(r(r(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),O=r([_,h,v,g,y,b,$,w,j].join("|")),k=r(r(c+"|"+i)+"+");r("[vV]"+o+"+\\."+t(c,s,"[\\:]")+"+"),r(r(i+"|"+t(c,s))+"*");var S=r(i+"|"+t(c,s,"[\\:\\@]"));return r(r(i+"|"+t(c,s,"[\\@]"))+"+"),r(r(S+"|"+t("[\\/\\?]",u))+"*"),{NOT_SCHEME:new RegExp(t("[^]",a,n,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,l),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+O+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+k+")")+"?\\]?$")}}var i=o(!1),s=o(!0),l=function(e,t){if(Array.isArray(e))return e;if((0,_isIterable3.default)(Object(e)))return function(e,t){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=(0,_getIterator3.default)(e);!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,c=36,d=/^xn--/,p=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=Math.floor,h=String.fromCharCode;function v(e){throw new RangeError(m[e])}function g(e,t){var r=e.split("@"),a="";return r.length>1&&(a=r[0]+"@",e=r[1]),a+function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t=[],r=0,a=e.length;r<a;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t}var b=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c},$=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var a=0;for(e=r?_(e/700):e>>1,e+=_(e/t);e>455;a+=c)e=_(e/35);return _(a+36*e/(e+38))},j=function(e){var t=[],r=e.length,a=0,n=128,o=72,i=e.lastIndexOf("-");i<0&&(i=0);for(var s=0;s<i;++s)e.charCodeAt(s)>=128&&v("not-basic"),t.push(e.charCodeAt(s));for(var l=i>0?i+1:0;l<r;){for(var d=a,p=1,f=c;;f+=c){l>=r&&v("invalid-input");var m=b(e.charCodeAt(l++));(m>=c||m>_((u-a)/p))&&v("overflow"),a+=m*p;var h=f<=o?1:f>=o+26?26:f-o;if(m<h)break;var g=c-h;p>_(u/g)&&v("overflow"),p*=g}var y=t.length+1;o=w(a-d,y,0==d),_(a/y)>u-n&&v("overflow"),n+=_(a/y),a%=y,t.splice(a++,0,n)}return _fromCodePoint2.default.apply(String,t)},O=function(e){var t=[],r=(e=y(e)).length,a=128,n=0,o=72,i=!0,s=!1,l=void 0;try{for(var d,p=(0,_getIterator3.default)(e);!(i=(d=p.next()).done);i=!0){var f=d.value;f<128&&t.push(h(f))}}catch(e){s=!0,l=e}finally{try{!i&&p.return&&p.return()}finally{if(s)throw l}}var m=t.length,g=m;for(m&&t.push("-");g<r;){var b=u,j=!0,O=!1,k=void 0;try{for(var S,P=(0,_getIterator3.default)(e);!(j=(S=P.next()).done);j=!0){var x=S.value;x>=a&&x<b&&(b=x)}}catch(e){O=!0,k=e}finally{try{!j&&P.return&&P.return()}finally{if(O)throw k}}var C=g+1;b-a>_((u-n)/C)&&v("overflow"),n+=(b-a)*C,a=b;var E=!0,T=!1,D=void 0;try{for(var A,I=(0,_getIterator3.default)(e);!(E=(A=I.next()).done);E=!0){var R=A.value;if(R<a&&++n>u&&v("overflow"),R==a){for(var N=n,L=c;;L+=c){var q=L<=o?1:L>=o+26?26:L-o;if(N<q)break;var F=N-q,M=c-q;t.push(h($(q+F%M,0))),N=_(F/M)}t.push(h($(N,0))),o=w(n,C,g==m),n=0,++g}}}catch(e){T=!0,D=e}finally{try{!E&&I.return&&I.return()}finally{if(T)throw D}}++n,++a}return t.join("")},k=function(e){return g(e,(function(e){return p.test(e)?"xn--"+O(e):e}))},S=function(e){return g(e,(function(e){return d.test(e)?j(e.slice(4).toLowerCase()):e}))},P={};function x(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function C(e){for(var t="",r=0,a=e.length;r<a;){var n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(a-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(a-r>=9){var i=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function E(e,t){function r(e){var r=C(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,x).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,x).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,x).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,x).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,x).replace(t.PCT_ENCODED,n)),e}function T(e){return e.replace(/^0*(.*)/,"$1")||"0"}function D(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2)[1];return a?a.split(".").map(T).join("."):e}function A(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),n=a[1],o=a[2];if(n){for(var i=n.toLowerCase().split("::").reverse(),s=l(i,2),u=s[0],c=s[1],d=c?c.split(":").map(T):[],p=u.split(":").map(T),f=t.IPV4ADDRESS.test(p[p.length-1]),m=f?7:8,_=p.length-m,h=Array(m),v=0;v<m;++v)h[v]=d[v]||p[_+v]||"";f&&(h[m-1]=D(h[m-1],t));var g=h.reduce((function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(g&&g.length>1){var b=h.slice(0,g.index),$=h.slice(g.index+g.length);y=b.join(":")+"::"+$.join(":")}else y=h.join(":");return o&&(y+="%"+o),y}return e}var I=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R=void 0==="".match(/(){0}/)[1];function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?s:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(I);if(n){R?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=A(D(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=P[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)E(r,a);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=k(r.host.replace(a.PCT_ENCODED,C).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}E(r,i)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function L(e,t){var r=!1!==t.iri?s:i,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(A(D(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(a.push(":"),a.push(String(e.port))),a.length?a.join(""):void 0}var q=/^\.\.?\//,F=/^\/\.(\/|$)/,M=/^\/\.\.(\/|$)/,V=/^\/?(?:.|\n)*?(?=\/|$)/;function K(e){for(var t=[];e.length;)if(e.match(q))e=e.replace(q,"");else if(e.match(F))e=e.replace(F,"/");else if(e.match(M))e=e.replace(M,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(V);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:i,a=[],n=P[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?S(e.host):k(e.host.replace(r.PCT_ENCODED,C).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}E(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var o=L(e,t);if(void 0!==o&&("suffix"!==t.reference&&a.push("//"),a.push(o),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||n&&n.absolutePath||(l=K(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={};return arguments[3]||(e=N(W(e,r),r),t=N(W(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=K(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=K(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=K(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=K(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function G(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:i.PCT_ENCODED,C)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},B={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function H(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var J={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=H(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(H(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),a=l(r,2),n=a[0],o=a[1];e.path=n&&"/"!==n?n:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},Y={scheme:"wss",domainHost:J.domainHost,parse:J.parse,serialize:J.serialize},Q={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",X="[0-9A-Fa-f]",ee=r(r("%[EFef]"+X+"%"+X+X+"%"+X+X)+"|"+r("%[89A-Fa-f]"+X+"%"+X+X)+"|"+r("%"+X+X)),te=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),re=new RegExp(Z,"g"),ae=new RegExp(ee,"g"),ne=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',te),"g"),oe=new RegExp(t("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ie=oe;function se(e){var t=C(e);return t.match(re)?t:e}var le={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var n=!1,o={},i=r.query.split("&"),s=0,l=i.length;s<l;++s){var u=i[s].split("=");switch(u[0]){case"to":for(var c=u[1].split(","),d=0,p=c.length;d<p;++d)a.push(c[d]);break;case"subject":r.subject=G(u[1],t);break;case"body":r.body=G(u[1],t);break;default:n=!0,o[G(u[0],t)]=G(u[1],t)}}n&&(r.headers=o)}r.query=void 0;for(var f=0,m=a.length;f<m;++f){var _=a[f].split("@");if(_[0]=G(_[0]),t.unicodeSupport)_[1]=G(_[1],t).toLowerCase();else try{_[1]=k(G(_[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[f]=_.join("@")}return r},serialize:function(e,t){var r=e,a=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(a){for(var o=0,i=a.length;o<i;++o){var s=String(a[o]),l=s.lastIndexOf("@"),u=s.slice(0,l).replace(ae,se).replace(ae,n).replace(ne,x),c=s.slice(l+1);try{c=t.iri?S(c):k(G(c,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}a[o]=u+"@"+c}r.path=a.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var f in d)d[f]!==Q[f]&&p.push(f.replace(ae,se).replace(ae,n).replace(oe,x)+"="+d[f].replace(ae,se).replace(ae,n).replace(ie,x));return p.length&&(r.query=p.join("&")),r}},ue=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ue),a=e;if(r){var n=t.scheme||a.scheme||"urn",o=r[1].toLowerCase(),i=r[2],s=n+":"+(t.nid||o),l=P[s];a.nid=o,a.nss=i,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,n=r+":"+(t.nid||a),o=P[n];o&&(e=o.serialize(e,t));var i=e,s=e.nss;return i.path=(a||t.nid)+":"+s,i}},de=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,pe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(de)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};P[z.scheme]=z,P[B.scheme]=B,P[J.scheme]=J,P[Y.scheme]=Y,P[le.scheme]=le,P[ce.scheme]=ce,P[pe.scheme]=pe,e.SCHEMES=P,e.pctEncChar=x,e.pctDecChars=C,e.parse=N,e.removeDotSegments=K,e.serialize=W,e.resolveComponents=U,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return W(U(N(e,a),N(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=W(N(e,t),t):"object"===a(e)&&(e=N(W(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=W(N(e,r),r):"object"===a(e)&&(e=W(e,r)),"string"==typeof t?t=W(N(t,r),r):"object"===a(t)&&(t=W(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:i.ESCAPE,x)},e.unescapeComponent=G,Object.defineProperty(e,"__esModule",{value:!0})}(t),Object.defineProperty(uri$1,"__esModule",{value:!0});var uri=uri_all.exports;uri.code='require("ajv/dist/runtime/uri").default',uri$1.default=uri,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=validate$1;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=codegen;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});var a=validation_error,n=ref_error,o=rules,i=compile,s=codegen,l=resolve$1,u=dataType,c=util,d=require$$9,p=uri$1,f=function(e,t){return new RegExp(e,t)};f.code="new RegExp";var m=["removeAdditional","useDefaults","coerceTypes"],_=new _set2.default(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),h={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function g(e){var t,r,a,n,o,i,s,l,u,c,d,m,_,h,v,g,y,b,$,w,j,O,k,S,P,x=e.strict,C=null===(t=e.code)||void 0===t?void 0:t.optimize,E=!0===C||void 0===C?1:C||0,T=null!==(a=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==a?a:f,D=null!==(n=e.uriResolver)&&void 0!==n?n:p.default;return{strictSchema:null===(i=null!==(o=e.strictSchema)&&void 0!==o?o:x)||void 0===i||i,strictNumbers:null===(l=null!==(s=e.strictNumbers)&&void 0!==s?s:x)||void 0===l||l,strictTypes:null!==(c=null!==(u=e.strictTypes)&&void 0!==u?u:x)&&void 0!==c?c:"log",strictTuples:null!==(m=null!==(d=e.strictTuples)&&void 0!==d?d:x)&&void 0!==m?m:"log",strictRequired:null!==(h=null!==(_=e.strictRequired)&&void 0!==_?_:x)&&void 0!==h&&h,code:e.code?(0,_extends4.default)({},e.code,{optimize:E,regExp:T}):{optimize:E,regExp:T},loopRequired:null!==(v=e.loopRequired)&&void 0!==v?v:200,loopEnum:null!==(g=e.loopEnum)&&void 0!==g?g:200,meta:null===(y=e.meta)||void 0===y||y,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===($=e.inlineRefs)||void 0===$||$,schemaId:null!==(w=e.schemaId)&&void 0!==w?w:"$id",addUsedSchema:null===(j=e.addUsedSchema)||void 0===j||j,validateSchema:null===(O=e.validateSchema)||void 0===O||O,validateFormats:null===(k=e.validateFormats)||void 0===k||k,unicodeRegExp:null===(S=e.unicodeRegExp)||void 0===S||S,int32range:null===(P=e.int32range)||void 0===P||P,uriResolver:D}}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_classCallCheck4.default)(this,e),this.schemas={},this.refs={},this.formats={},this._compilations=new _set2.default,this._loading={},this._cache=new _map2.default,t=this.opts=(0,_extends4.default)({},t,g(t));var r=this.opts.code,a=r.es5,n=r.lines;this.scope=new s.ValueScope({scope:{},prefixes:_,es5:a,lines:n}),this.logger=function(e){if(!1===e)return S;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(t.logger);var i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,o.getRules)(),b.call(this,h,t,"NOT SUPPORTED"),b.call(this,v,t,"DEPRECATED","warn"),this._metaOpts=k.call(this),t.formats&&j.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&O.call(this,t.keywords),"object"==(0,_typeof4.default)(t.meta)&&this.addMetaSchema(t.meta),w.call(this),t.validateFormats=i}return(0,_createClass4.default)(e,[{key:"_addVocabularies",value:function(){this.addKeyword("$async")}},{key:"_addDefaultMetaSchema",value:function(){var e=this.opts,t=e.$data,r=e.meta,a=e.schemaId,n=d;"id"===a&&((n=(0,_extends4.default)({},d)).id=n.$id,delete n.$id),r&&t&&this.addMetaSchema(n,n[a],!1)}},{key:"defaultMeta",value:function(){var e=this.opts,t=e.meta,r=e.schemaId;return this.opts.defaultMeta="object"==(void 0===t?"undefined":(0,_typeof4.default)(t))?t[r]||t:void 0}},{key:"validate",value:function(e,t){var r=void 0;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else r=this.compile(e);var a=r(t);return"$async"in r||(this.errors=r.errors),a}},{key:"compile",value:function(e,t){var r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}},{key:"compileAsync",value:function(e,t){var r,a,o,i,s,l=(r=(0,_asyncToGenerator4.default)(_regenerator2.default.mark((function e(t,r){var a;return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.call(this,t.$schema);case 2:return a=this._addSchema(t,r),e.abrupt("return",a.validate||c.call(this,a));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)}),u=(a=(0,_asyncToGenerator4.default)(_regenerator2.default.mark((function e(t){return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t&&!this.getSchema(t),!e.t0){e.next=4;break}return e.next=4,l.call(this,{$ref:t},!0);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),c=(o=(0,_asyncToGenerator4.default)(_regenerator2.default.mark((function e(t){return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this._compileSchemaEnv(t));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof n.default){e.next=8;break}throw e.t0;case 8:return m.call(this,e.t0),e.next=11,d.call(this,e.t0.missingSchema);case 11:return e.abrupt("return",c.call(this,t));case 12:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(e){return o.apply(this,arguments)}),d=(i=(0,_asyncToGenerator4.default)(_regenerator2.default.mark((function e(r){var a;return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.call(this,r);case 2:if(a=e.sent,e.t0=this.refs[r],e.t0){e.next=7;break}return e.next=7,u.call(this,a.$schema);case 7:this.refs[r]||this.addSchema(a,r,t);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)}),p=(s=(0,_asyncToGenerator4.default)(_regenerator2.default.mark((function e(t){var r;return _regenerator2.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._loading[t])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,this._loading[t]=f(t);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,delete this._loading[t],e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[3,,7,10]])}))),function(e){return s.apply(this,arguments)});if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");var f=this.opts.loadSchema;return l.call(this,e,t);function m(e){var t=e.missingSchema,r=e.missingRef;if(this.refs[t])throw new Error("AnySchema "+t+" is loaded but "+r+" cannot be resolved")}}},{key:"addSchema",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){var n=!0,o=!1,i=void 0;try{for(var s,u=(0,_getIterator3.default)(e);!(n=(s=u.next()).done);n=!0){var c=s.value;this.addSchema(c,void 0,r,a)}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return this}var d=void 0;if("object"==(void 0===e?"undefined":(0,_typeof4.default)(e))){var p=this.opts.schemaId;if(void 0!==(d=e[p])&&"string"!=typeof d)throw new Error("schema "+p+" must be string")}return t=(0,l.normalizeId)(t||d),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,a,!0),this}},{key:"addMetaSchema",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,r),this}},{key:"validateSchema",value:function(e,t){if("boolean"==typeof e)return!0;var r=void 0;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var n="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(n);this.logger.error(n)}return a}},{key:"getSchema",value:function(e){for(var t=void 0;"string"==typeof(t=$.call(this,e));)e=t;if(void 0===t){var r=this.opts.schemaId,a=new i.SchemaEnv({schema:{},schemaId:r});if(!(t=i.resolveSchema.call(this,a,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}},{key:"removeSchema",value:function(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(void 0===e?"undefined":(0,_typeof4.default)(e)){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":var t=$.call(this,e);return"object"==(void 0===t?"undefined":(0,_typeof4.default)(t))&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this;case"object":var r=e;this._cache.delete(r);var a=e[this.opts.schemaId];return a&&(a=(0,l.normalizeId)(a),delete this.schemas[a],delete this.refs[a]),this;default:throw new Error("ajv.removeSchema: invalid parameter")}}},{key:"addVocabulary",value:function(e){var t=!0,r=!1,a=void 0;try{for(var n,o=(0,_getIterator3.default)(e);!(t=(n=o.next()).done);t=!0){var i=n.value;this.addKeyword(i)}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}return this}},{key:"addKeyword",value:function(e,t){var r=this,a=void 0;if("string"==typeof e)a=e,"object"==(void 0===t?"undefined":(0,_typeof4.default)(t))&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=a);else{if("object"!=(void 0===e?"undefined":(0,_typeof4.default)(e))||void 0!==t)throw new Error("invalid addKeywords parameters");if(a=(t=e).keyword,Array.isArray(a)&&!a.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,a,t),!t)return(0,c.eachItem)(a,(function(e){return C.call(r,e)})),this;T.call(this,t);var n=(0,_extends4.default)({},t,{type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)});return(0,c.eachItem)(a,0===n.type.length?function(e){return C.call(r,e,n)}:function(e){return n.type.forEach((function(t){return C.call(r,e,n,t)}))}),this}},{key:"getKeyword",value:function(e){var t=this.RULES.all[e];return"object"==(void 0===t?"undefined":(0,_typeof4.default)(t))?t.definition:!!t}},{key:"removeKeyword",value:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e];var r=!0,a=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)(t.rules);!(r=(o=i.next()).done);r=!0){var s=o.value,l=s.rules.findIndex((function(t){return t.keyword===e}));l>=0&&s.rules.splice(l,1)}}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}return this}},{key:"addFormat",value:function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}},{key:"errorsText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.separator,a=void 0===r?", ":r,n=t.dataVar,o=void 0===n?"data":n;return e&&0!==e.length?e.map((function(e){return""+o+e.instancePath+" "+e.message})).reduce((function(e,t){return e+a+t})):"No errors"}},{key:"$dataMetaSchema",value:function(e,t){var r=this.RULES.all;e=JSON.parse((0,_stringify2.default)(e));var a=!0,n=!1,o=void 0;try{for(var i,s=(0,_getIterator3.default)(t);!(a=(i=s.next()).done);a=!0){var l=i.value.split("/").slice(1),u=e,c=!0,d=!1,p=void 0;try{for(var f,m=(0,_getIterator3.default)(l);!(c=(f=m.next()).done);c=!0){u=u[f.value]}}catch(e){d=!0,p=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw p}}for(var _ in r){var h=r[_];if("object"==(void 0===h?"undefined":(0,_typeof4.default)(h))){var v=h.definition.$data,g=u[_];v&&g&&(u[_]=A(g))}}}}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}return e}},{key:"_removeAllSchemas",value:function(e,t){for(var r in e){var a=e[r];t&&!t.test(r)||("string"==typeof a?delete e[r]:a&&!a.meta&&(this._cache.delete(a.schema),delete e[r]))}}},{key:"_addSchema",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema,o=void 0,s=this.opts.schemaId;if("object"==(void 0===e?"undefined":(0,_typeof4.default)(e)))o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}var u=this._cache.get(e);if(void 0!==u)return u;r=(0,l.normalizeId)(o||r);var c=l.getSchemaRefs.call(this,e,r);return u=new i.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:r,localRefs:c}),this._cache.set(u.schema,u),n&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=u),a&&this.validateSchema(e,!0),u}},{key:"_checkUnique",value:function(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'+e+'" already exists')}},{key:"_compileSchemaEnv",value:function(e){if(e.meta?this._compileMetaSchema(e):i.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}},{key:"_compileMetaSchema",value:function(e){var t=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,e)}finally{this.opts=t}}}]),e}();function b(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(var n in e){var o=n;o in t&&this.logger[a](r+": option "+n+". "+e[o])}}function $(e){return e=(0,l.normalizeId)(e),this.schemas[e]||this.refs[e]}function w(){var e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(var t in e)this.addSchema(e[t],t)}function j(){for(var e in this.opts.formats){var t=this.opts.formats[e];t&&this.addFormat(e,t)}}function O(e){if(Array.isArray(e))this.addVocabulary(e);else for(var t in this.logger.warn("keywords option as map is deprecated, pass array"),e){var r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function k(){var e=(0,_extends4.default)({},this.opts),t=!0,r=!1,a=void 0;try{for(var n,o=(0,_getIterator3.default)(m);!(t=(n=o.next()).done);t=!0){delete e[n.value]}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}return e}e.default=y,y.ValidationError=a.default,y.MissingRefError=n.default;var S={log:function(){},warn:function(){},error:function(){}},P=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){var r=this.RULES;if((0,c.eachItem)(e,(function(e){if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!P.test(e))throw new Error("Keyword "+e+" has invalid name")})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function C(e,t,r){var a,n=this,o=null==t?void 0:t.post;if(r&&o)throw new Error('keyword with "post" flag cannot have "type"');var i=this.RULES,s=o?i.post:i.rules.find((function(e){return e.type===r}));if(s||(s={type:r,rules:[]},i.rules.push(s)),i.keywords[e]=!0,t){var l={keyword:e,definition:(0,_extends4.default)({},t,{type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)})};t.before?E.call(this,s,l,t.before):s.rules.push(l),i.all[e]=l,null===(a=t.implements)||void 0===a||a.forEach((function(e){return n.addKeyword(e)}))}}function E(e,t,r){var a=e.rules.findIndex((function(e){return e.keyword===r}));a>=0?e.rules.splice(a,0,t):(e.rules.push(t),this.logger.warn("rule "+r+" is not defined"))}function T(e){var t=e.metaSchema;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}var D={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,D]}}}(core$2);var draft7={},core$1={},id={};Object.defineProperty(id,"__esModule",{value:!0});var def$s={keyword:"id",code:function(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;var ref_error_1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code:function(e){var t=e.gen,r=e.schema,a=e.it,n=a.baseId,o=a.schemaEnv,i=a.validateName,s=a.opts,l=a.self,u=o.root;if(("#"===r||"#/"===r)&&n===u.baseId)return function(){if(o===u)return callRef(e,i,o,o.$async);var r=t.scopeValue("root",{ref:u});return callRef(e,codegen_1$l._(_templateObject101,r),u,u.$async)}();var c=compile_1$1.resolveRef.call(l,u,n,r);if(void 0===c)throw new ref_error_1.default(a.opts.uriResolver,n,r);return c instanceof compile_1$1.SchemaEnv?function(t){var r=getValidate(e,t);callRef(e,r,t,t.$async)}(c):function(a){var n=t.scopeValue("schema",!0===s.code.source?{ref:a,code:(0,codegen_1$l.stringify)(a)}:{ref:a}),o=t.name("valid"),i=e.subschema({schema:a,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:n,errSchemaPath:r},o);e.mergeEvaluated(i),e.ok(o)}(c)}};function getValidate(e,t){var r=e.gen;return t.validate?r.scopeValue("validate",{ref:t.validate}):codegen_1$l._(_templateObject101,r.scopeValue("wrapper",{ref:t}))}function callRef(e,t,r,a){var n=e.gen,o=e.it,i=o.allErrors,s=o.schemaEnv,l=o.opts.passContext?names_1$1.default.this:codegen_1$l.nil;function u(e){var t=codegen_1$l._(_templateObject30,e);n.assign(names_1$1.default.vErrors,codegen_1$l._(_templateObject82,names_1$1.default.vErrors,t,names_1$1.default.vErrors,t)),n.assign(names_1$1.default.errors,codegen_1$l._(_templateObject8,names_1$1.default.vErrors))}function c(e){var t;if(o.opts.unevaluated){var a=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==o.props)if(a&&!a.dynamicProps)void 0!==a.props&&(o.props=util_1$j.mergeEvaluated.props(n,a.props,o.props));else{var i=n.var("props",codegen_1$l._(_templateObject102,e));o.props=util_1$j.mergeEvaluated.props(n,i,o.props,codegen_1$l.Name)}if(!0!==o.items)if(a&&!a.dynamicItems)void 0!==a.items&&(o.items=util_1$j.mergeEvaluated.items(n,a.items,o.items));else{var s=n.var("items",codegen_1$l._(_templateObject103,e));o.items=util_1$j.mergeEvaluated.items(n,s,o.items,codegen_1$l.Name)}}}a?function(){if(!s.$async)throw new Error("async schema referenced by sync schema");var r=n.let("valid");n.try((function(){n.code(codegen_1$l._(_templateObject104,(0,code_1$8.callValidateCode)(e,t,l))),c(t),i||n.assign(r,!0)}),(function(e){n.if(codegen_1$l._(_templateObject105,e,o.ValidationError),(function(){return n.throw(e)})),u(e),i||n.assign(r,!1)})),e.ok(r)}():e.result((0,code_1$8.callValidateCode)(e,t,l),(function(){return c(t)}),(function(){return u(t)}))}ref.getValidate=getValidate,ref.callRef=callRef,ref.default=def$r,Object.defineProperty(core$1,"__esModule",{value:!0});var id_1=id,ref_1=ref,core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$1.default=core;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});var codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:function(e){var t=e.keyword,r=e.schemaCode;return codegen_1$k.str(_templateObject106,KWDs[t].okStr,r)},params:function(e){var t=e.keyword,r=e.schemaCode;return codegen_1$k._(_templateObject107,KWDs[t].okStr,r)}},def$q={keyword:(0,_keys2.default)(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code:function(e){var t=e.keyword,r=e.data,a=e.schemaCode;e.fail$data(codegen_1$k._(_templateObject108,r,KWDs[t].fail,a,r))}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});var codegen_1$j=codegen,error$h={message:function(e){var t=e.schemaCode;return codegen_1$j.str(_templateObject109,t)},params:function(e){var t=e.schemaCode;return codegen_1$j._(_templateObject110,t)}},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code:function(e){var t=e.gen,r=e.data,a=e.schemaCode,n=e.it.opts.multipleOfPrecision,o=t.let("res"),i=n?codegen_1$j._(_templateObject111,o,o,n):codegen_1$j._(_templateObject112,o,o);e.fail$data(codegen_1$j._(_templateObject113,a,o,r,a,i))}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};function ucs2length(e){for(var t=e.length,r=void 0,a=0,n=0;n<t;)a++,(r=e.charCodeAt(n++))>=55296&&r<=56319&&n<t&&(56320==(64512&(r=e.charCodeAt(n)))&&n++);return a}Object.defineProperty(ucs2length$1,"__esModule",{value:!0}),ucs2length$1.default=ucs2length,ucs2length.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(limitLength,"__esModule",{value:!0});var codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message:function(e){var t=e.keyword,r=e.schemaCode,a="maxLength"===t?"more":"fewer";return codegen_1$i.str(_templateObject114,a,r)},params:function(e){var t=e.schemaCode;return codegen_1$i._(_templateObject115,t)}},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code:function(e){var t=e.keyword,r=e.data,a=e.schemaCode,n=e.it,o="maxLength"===t?codegen_1$i.operators.GT:codegen_1$i.operators.LT,i=!1===n.opts.unicode?codegen_1$i._(_templateObject8,r):codegen_1$i._(_templateObject76,(0,util_1$i.useFunc)(e.gen,ucs2length_1.default),r);e.fail$data(codegen_1$i._(_templateObject11,i,o,a))}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});var code_1$7=code,codegen_1$h=codegen,error$f={message:function(e){var t=e.schemaCode;return codegen_1$h.str(_templateObject116,t)},params:function(e){var t=e.schemaCode;return codegen_1$h._(_templateObject117,t)}},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code:function(e){var t=e.data,r=e.$data,a=e.schema,n=e.schemaCode,o=e.it.opts.unicodeRegExp?"u":"",i=r?codegen_1$h._(_templateObject118,n,o):(0,code_1$7.usePattern)(e,a);e.fail$data(codegen_1$h._(_templateObject119,i,t))}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});var codegen_1$g=codegen,error$e={message:function(e){var t=e.keyword,r=e.schemaCode,a="maxProperties"===t?"more":"fewer";return codegen_1$g.str(_templateObject120,a,r)},params:function(e){var t=e.schemaCode;return codegen_1$g._(_templateObject115,t)}},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code:function(e){var t=e.keyword,r=e.data,a=e.schemaCode,n="maxProperties"===t?codegen_1$g.operators.GT:codegen_1$g.operators.LT;e.fail$data(codegen_1$g._(_templateObject121,r,n,a))}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});var code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:function(e){var t=e.params.missingProperty;return codegen_1$f.str(_templateObject122,t)},params:function(e){var t=e.params.missingProperty;return codegen_1$f._(_templateObject123,t)}},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code:function(e){var t=e.gen,r=e.schema,a=e.schemaCode,n=e.data,o=e.$data,i=e.it,s=i.opts;if(o||0!==r.length){var l=r.length>=s.loopRequired;if(i.allErrors?function(){if(l||o)e.block$data(codegen_1$f.nil,g);else{var t=!0,a=!1,n=void 0;try{for(var i,s=(0,_getIterator3.default)(r);!(t=(i=s.next()).done);t=!0){var u=i.value;(0,code_1$6.checkReportMissingProp)(e,u)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}}}():function(){var i=t.let("missing");if(l||o){var u=t.let("valid",!0);e.block$data(u,(function(){return function(r,o){e.setParams({missingProperty:r}),t.forOf(r,a,(function(){t.assign(o,(0,code_1$6.propertyInData)(t,n,r,s.ownProperties)),t.if((0,codegen_1$f.not)(o),(function(){e.error(),t.break()}))}),codegen_1$f.nil)}(i,u)})),e.ok(u)}else t.if((0,code_1$6.checkMissingProp)(e,r,i)),(0,code_1$6.reportMissingProp)(e,i),t.else()}(),s.strictRequired){var u=e.parentSchema.properties,c=e.it.definedProperties,d=!0,p=!1,f=void 0;try{for(var m,_=(0,_getIterator3.default)(r);!(d=(m=_.next()).done);d=!0){var h=m.value;if(void 0===(null==u?void 0:u[h])&&!c.has(h)){var v='required property "'+h+'" is not defined at "'+(i.schemaEnv.baseId+i.errSchemaPath)+'" (strictRequired)';(0,util_1$h.checkStrictMode)(i,v,i.opts.strictRequired)}}}catch(e){p=!0,f=e}finally{try{!d&&_.return&&_.return()}finally{if(p)throw f}}}}function g(){t.forOf("prop",a,(function(r){e.setParams({missingProperty:r}),t.if((0,code_1$6.noPropertyInData)(t,n,r,s.ownProperties),(function(){return e.error()}))}))}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});var codegen_1$e=codegen,error$c={message:function(e){var t=e.keyword,r=e.schemaCode,a="maxItems"===t?"more":"fewer";return codegen_1$e.str(_templateObject124,a,r)},params:function(e){var t=e.schemaCode;return codegen_1$e._(_templateObject115,t)}},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code:function(e){var t=e.keyword,r=e.data,a=e.schemaCode,n="maxItems"===t?codegen_1$e.operators.GT:codegen_1$e.operators.LT;e.fail$data(codegen_1$e._(_templateObject125,r,n,a))}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});var equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default',equal$1.default=equal,Object.defineProperty(uniqueItems,"__esModule",{value:!0});var dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:function(e){var t=e.params,r=t.i,a=t.j;return codegen_1$d.str(_templateObject126,a,r)},params:function(e){var t=e.params,r=t.i,a=t.j;return codegen_1$d._(_templateObject127,r,a)}},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code:function(e){var t=e.gen,r=e.data,a=e.$data,n=e.schema,o=e.parentSchema,i=e.schemaCode,s=e.it;if(a||n){var l=t.let("valid"),u=o.items?(0,dataType_1.getSchemaTypes)(o.items):[];e.block$data(l,(function(){var a=t.let("i",codegen_1$d._(_templateObject8,r)),n=t.let("j");e.setParams({i:a,j:n}),t.assign(l,!0),t.if(codegen_1$d._(_templateObject136,a),(function(){return(u.length>0&&!u.some((function(e){return"object"===e||"array"===e}))?c:d)(a,n)}))}),codegen_1$d._(_templateObject137,i)),e.ok(l)}function c(a,n){var o=t.name("item"),i=(0,dataType_1.checkDataTypes)(u,o,s.opts.strictNumbers,dataType_1.DataType.Wrong),c=t.const("indices",codegen_1$d._(_templateObject13));t.for(codegen_1$d._(_templateObject128,a),(function(){t.let(o,codegen_1$d._(_templateObject9,r,a)),t.if(i,codegen_1$d._(_templateObject129)),u.length>1&&t.if(codegen_1$d._(_templateObject130,o),codegen_1$d._(_templateObject131,o)),t.if(codegen_1$d._(_templateObject132,c,o),(function(){t.assign(n,codegen_1$d._(_templateObject9,c,o)),e.error(),t.assign(l,!1).break()})).code(codegen_1$d._(_templateObject133,c,o,a))}))}function d(a,n){var o=(0,util_1$g.useFunc)(t,equal_1$2.default),i=t.name("outer");t.label(i).for(codegen_1$d._(_templateObject128,a),(function(){return t.for(codegen_1$d._(_templateObject134,n,a,n),(function(){return t.if(codegen_1$d._(_templateObject135,o,r,a,r,n),(function(){e.error(),t.assign(l,!1).break(i)}))}))}))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});var codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:function(e){var t=e.schemaCode;return codegen_1$c._(_templateObject138,t)}},def$i={keyword:"const",$data:!0,error:error$a,code:function(e){var t=e.gen,r=e.data,a=e.$data,n=e.schemaCode,o=e.schema;a||o&&"object"==(void 0===o?"undefined":(0,_typeof4.default)(o))?e.fail$data(codegen_1$c._(_templateObject139,(0,util_1$f.useFunc)(t,equal_1$1.default),r,n)):e.fail(codegen_1$c._(_templateObject140,o,r))}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});var codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:function(e){var t=e.schemaCode;return codegen_1$b._(_templateObject141,t)}},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code:function(e){var t=e.gen,r=e.data,a=e.$data,n=e.schema,o=e.schemaCode,i=e.it;if(!a&&0===n.length)throw new Error("enum must have non-empty array");var s=n.length>=i.opts.loopEnum,l=void 0,u=function(){return null!=l?l:l=(0,util_1$e.useFunc)(t,equal_1.default)},c=void 0;if(s||a)c=t.let("valid"),e.block$data(c,(function(){t.assign(c,!1),t.forOf("v",o,(function(e){return t.if(codegen_1$b._(_templateObject78,u(),r,e),(function(){return t.assign(c,!0).break()}))}))}));else{if(!Array.isArray(n))throw new Error("ajv implementation error");var d=t.const("vSchema",o);c=codegen_1$b.or.apply(void 0,(0,_toConsumableArray4.default)(n.map((function(e,t){return function(e,t){var a=n[t];return"object"==(void 0===a?"undefined":(0,_typeof4.default)(a))&&null!==a?codegen_1$b._(_templateObject142,u(),r,e,t):codegen_1$b._(_templateObject93,r,a)}(d,t)}))))}e.pass(c)}};_enum.default=def$h,Object.defineProperty(validation$1,"__esModule",{value:!0});var limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;var codegen_1$a=codegen,util_1$d=util,error$8={message:function(e){var t=e.params.len;return codegen_1$a.str(_templateObject143,t)},params:function(e){var t=e.params.len;return codegen_1$a._(_templateObject115,t)}},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code:function(e){var t=e.parentSchema,r=e.it,a=t.items;Array.isArray(a)?validateAdditionalItems(e,a):(0,util_1$d.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function validateAdditionalItems(e,t){var r=e.gen,a=e.schema,n=e.data,o=e.keyword,i=e.it;i.items=!0;var s=r.const("len",codegen_1$a._(_templateObject8,n));if(!1===a)e.setParams({len:t.length}),e.pass(codegen_1$a._(_templateObject144,s,t.length));else if("object"==(void 0===a?"undefined":(0,_typeof4.default)(a))&&!(0,util_1$d.alwaysValidSchema)(i,a)){var l=r.var("valid",codegen_1$a._(_templateObject144,s,t.length));r.if((0,codegen_1$a.not)(l),(function(){return function(a){r.forRange("i",t.length,s,(function(t){e.subschema({keyword:o,dataProp:t,dataPropType:util_1$d.Type.Num},a),i.allErrors||r.if((0,codegen_1$a.not)(a),(function(){return r.break()}))}))}(l)})),e.ok(l)}}additionalItems.validateAdditionalItems=validateAdditionalItems,additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;var codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code:function(e){var t=e.schema,r=e.it;if(Array.isArray(t))return validateTuple(e,"additionalItems",t);r.items=!0,(0,util_1$c.alwaysValidSchema)(r,t)||e.ok((0,code_1$5.validateArray)(e))}};function validateTuple(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema,a=e.gen,n=e.parentSchema,o=e.data,i=e.keyword,s=e.it;!function(e){var a=s.opts,n=s.errSchemaPath,o=r.length,l=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(a.strictTuples&&!l){var u='"'+i+'" is '+o+"-tuple, but minItems or maxItems/"+t+' are not specified or different at path "'+n+'"';(0,util_1$c.checkStrictMode)(s,u,a.strictTuples)}}(n),s.opts.unevaluated&&r.length&&!0!==s.items&&(s.items=util_1$c.mergeEvaluated.items(a,r.length,s.items));var l=a.name("valid"),u=a.const("len",codegen_1$9._(_templateObject8,o));r.forEach((function(t,r){(0,util_1$c.alwaysValidSchema)(s,t)||(a.if(codegen_1$9._(_templateObject145,u,r),(function(){return e.subschema({keyword:i,schemaProp:r,dataProp:r},l)})),e.ok(l))}))}items.validateTuple=validateTuple,items.default=def$f,Object.defineProperty(prefixItems,"__esModule",{value:!0});var items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:function(e){return(0,items_1$1.validateTuple)(e,"items")}};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});var codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:function(e){var t=e.params.len;return codegen_1$8.str(_templateObject143,t)},params:function(e){var t=e.params.len;return codegen_1$8._(_templateObject115,t)}},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code:function(e){var t=e.schema,r=e.parentSchema,a=e.it,n=r.prefixItems;a.items=!0,(0,util_1$b.alwaysValidSchema)(a,t)||(n?(0,additionalItems_1$1.validateAdditionalItems)(e,n):e.ok((0,code_1$4.validateArray)(e)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});var codegen_1$7=codegen,util_1$a=util,error$6={message:function(e){var t=e.params,r=t.min,a=t.max;return void 0===a?codegen_1$7.str(_templateObject146,r):codegen_1$7.str(_templateObject147,r,a)},params:function(e){var t=e.params,r=t.min,a=t.max;return void 0===a?codegen_1$7._(_templateObject148,r):codegen_1$7._(_templateObject149,r,a)}},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code:function(e){var t=e.gen,r=e.schema,a=e.parentSchema,n=e.data,o=e.it,i=void 0,s=void 0,l=a.minContains,u=a.maxContains;o.opts.next?(i=void 0===l?1:l,s=u):i=1;var c=t.const("len",codegen_1$7._(_templateObject8,n));if(e.setParams({min:i,max:s}),void 0!==s||0!==i){if(void 0!==s&&i>s)return(0,util_1$a.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,util_1$a.alwaysValidSchema)(o,r)){var d=codegen_1$7._(_templateObject150,c,i);return void 0!==s&&(d=codegen_1$7._(_templateObject151,d,c,s)),void e.pass(d)}o.items=!0;var p=t.name("valid");void 0===s&&1===i?m(p,(function(){return t.if(p,(function(){return t.break()}))})):0===i?(t.let(p,!0),void 0!==s&&t.if(codegen_1$7._(_templateObject152,n),f)):(t.let(p,!1),f()),e.result(p,(function(){return e.reset()}))}else(0,util_1$a.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');function f(){var e=t.name("_valid"),r=t.let("count",0);m(e,(function(){return t.if(e,(function(){return function(e){t.code(codegen_1$7._(_templateObject28,e)),void 0===s?t.if(codegen_1$7._(_templateObject150,e,i),(function(){return t.assign(p,!0).break()})):(t.if(codegen_1$7._(_templateObject145,e,s),(function(){return t.assign(p,!1).break()})),1===i?t.assign(p,!0):t.if(codegen_1$7._(_templateObject150,e,i),(function(){return t.assign(p,!0)})))}(r)}))}))}function m(r,a){t.forRange("i",0,c,(function(t){e.subschema({keyword:"contains",dataProp:t,dataPropType:util_1$a.Type.Num,compositeRule:!0},r),a()}))}}};contains.default=def$c;var dependencies={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=codegen,r=util,a=code;e.error={message:function(e){var r=e.params,a=r.property,n=r.depsCount,o=r.deps,i=1===n?"property":"properties";return t.str(_templateObject153,i,o,a)},params:function(e){var r=e.params,a=r.property,n=r.depsCount,o=r.deps,i=r.missingProperty;return t._(_templateObject154,a,i,n,o)}};var n={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code:function(e){var t=function(e){var t=e.schema,r={},a={};for(var n in t)"__proto__"!==n&&((Array.isArray(t[n])?r:a)[n]=t[n]);return[r,a]}(e),r=(0,_slicedToArray4.default)(t,2),a=r[0],n=r[1];o(e,a),i(e,n)}};function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.gen,o=e.data,i=e.it;if(0!==(0,_keys2.default)(r).length){var s=n.let("missing"),l=function(l){var u=r[l];if(0===u.length)return"continue";var c=(0,a.propertyInData)(n,o,l,i.opts.ownProperties);e.setParams({property:l,depsCount:u.length,deps:u.join(", ")}),i.allErrors?n.if(c,(function(){var t=!0,r=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)(u);!(t=(o=i.next()).done);t=!0){var s=o.value;(0,a.checkReportMissingProp)(e,s)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}})):(n.if(t._(_templateObject155,c,(0,a.checkMissingProp)(e,u,s))),(0,a.reportMissingProp)(e,s),n.else())};for(var u in r)l(u)}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema,n=e.gen,o=e.data,i=e.keyword,s=e.it,l=n.name("valid"),u=function(u){(0,r.alwaysValidSchema)(s,t[u])||(n.if((0,a.propertyInData)(n,o,u,s.opts.ownProperties),(function(){var t=e.subschema({keyword:i,schemaProp:u},l);e.mergeValidEvaluated(t,l)}),(function(){return n.var(l,!0)})),e.ok(l))};for(var c in t)u(c)}e.validatePropertyDeps=o,e.validateSchemaDeps=i,e.default=n}(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});var codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:function(e){var t=e.params;return codegen_1$6._(_templateObject156,t.propertyName)}},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code:function(e){var t=e.gen,r=e.schema,a=e.data,n=e.it;if(!(0,util_1$9.alwaysValidSchema)(n,r)){var o=t.name("valid");t.forIn("key",a,(function(r){e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},o),t.if((0,codegen_1$6.not)(o),(function(){e.error(!0),n.allErrors||t.break()}))})),e.ok(o)}}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});var code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:function(e){var t=e.params;return codegen_1$5._(_templateObject157,t.additionalProperty)}},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code:function(e){var t=e.gen,r=e.schema,a=e.parentSchema,n=e.data,o=e.errsCount,i=e.it;if(!o)throw new Error("ajv implementation error");var s=i.allErrors,l=i.opts;if(i.props=!0,"all"===l.removeAdditional||!(0,util_1$8.alwaysValidSchema)(i,r)){var u=(0,code_1$3.allSchemaProperties)(a.properties),c=(0,code_1$3.allSchemaProperties)(a.patternProperties);t.forIn("key",n,(function(r){u.length||c.length?t.if(function(r){var n=void 0;if(u.length>8){var o=(0,util_1$8.schemaRefOrVal)(i,a.properties,"properties");n=(0,code_1$3.isOwnProperty)(t,o,r)}else n=u.length?codegen_1$5.or.apply(void 0,(0,_toConsumableArray4.default)(u.map((function(e){return codegen_1$5._(_templateObject93,r,e)})))):codegen_1$5.nil;return c.length&&(n=codegen_1$5.or.apply(void 0,[n].concat((0,_toConsumableArray4.default)(c.map((function(t){return codegen_1$5._(_templateObject159,(0,code_1$3.usePattern)(e,t),r)})))))),(0,codegen_1$5.not)(n)}(r),(function(){return p(r)})):p(r)})),e.ok(codegen_1$5._(_templateObject93,o,names_1.default.errors))}function d(e){t.code(codegen_1$5._(_templateObject158,n,e))}function p(a){if("all"===l.removeAdditional||l.removeAdditional&&!1===r)d(a);else{if(!1===r)return e.setParams({additionalProperty:a}),e.error(),void(s||t.break());if("object"==(void 0===r?"undefined":(0,_typeof4.default)(r))&&!(0,util_1$8.alwaysValidSchema)(i,r)){var n=t.name("valid");"failing"===l.removeAdditional?(f(a,n,!1),t.if((0,codegen_1$5.not)(n),(function(){e.reset(),d(a)}))):(f(a,n),s||t.if((0,codegen_1$5.not)(n),(function(){return t.break()})))}}}function f(t,r,a){var n={keyword:"additionalProperties",dataProp:t,dataPropType:util_1$8.Type.Str};!1===a&&(0,_assign2.default)(n,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(n,r)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});var validate_1=validate$1,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,a=e.parentSchema,n=e.data,o=e.it;"all"===o.opts.removeAdditional&&void 0===a.additionalProperties&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(o,additionalProperties_1$1.default,"additionalProperties"));var i=(0,code_1$2.allSchemaProperties)(r),s=!0,l=!1,u=void 0;try{for(var c,d=(0,_getIterator3.default)(i);!(s=(c=d.next()).done);s=!0){var p=c.value;o.definedProperties.add(p)}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}o.opts.unevaluated&&i.length&&!0!==o.props&&(o.props=util_1$7.mergeEvaluated.props(t,(0,util_1$7.toHash)(i),o.props));var f=i.filter((function(e){return!(0,util_1$7.alwaysValidSchema)(o,r[e])}));if(0!==f.length){var m=t.name("valid"),_=!0,h=!1,v=void 0;try{for(var g,y=(0,_getIterator3.default)(f);!(_=(g=y.next()).done);_=!0){var b=g.value;$(b)?w(b):(t.if((0,code_1$2.propertyInData)(t,n,b,o.opts.ownProperties)),w(b),o.allErrors||t.else().var(m,!0),t.endIf()),e.it.definedProperties.add(b),e.ok(m)}}catch(e){h=!0,v=e}finally{try{!_&&y.return&&y.return()}finally{if(h)throw v}}}function $(e){return o.opts.useDefaults&&!o.compositeRule&&void 0!==r[e].default}function w(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},m)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});var code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code:function(e){var t=e.gen,r=e.schema,a=e.data,n=e.parentSchema,o=e.it,i=o.opts,s=(0,code_1$1.allSchemaProperties)(r),l=s.filter((function(e){return(0,util_1$6.alwaysValidSchema)(o,r[e])}));if(0!==s.length&&(l.length!==s.length||o.opts.unevaluated&&!0!==o.props)){var u=i.strictSchema&&!i.allowMatchingProperties&&n.properties,c=t.name("valid");!0===o.props||o.props instanceof codegen_1$4.Name||(o.props=(0,util_2.evaluatedPropsToName)(t,o.props));var d=o.props;!function(){var e=!0,r=!1,a=void 0;try{for(var n,i=(0,_getIterator3.default)(s);!(e=(n=i.next()).done);e=!0){var l=n.value;u&&p(l),o.allErrors?f(l):(t.var(c,!0),f(l),t.if(c))}}catch(e){r=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(r)throw a}}}()}function p(e){for(var t in u)new RegExp(e).test(t)&&(0,util_1$6.checkStrictMode)(o,"property "+t+" matches pattern "+e+" (use allowMatchingProperties)")}function f(r){t.forIn("key",a,(function(a){t.if(codegen_1$4._(_templateObject159,(0,code_1$1.usePattern)(e,r),a),(function(){var n=l.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:a,dataPropType:util_2.Type.Str},c),o.opts.unevaluated&&!0!==d?t.assign(codegen_1$4._(_templateObject9,d,a),!0):n||o.allErrors||t.if((0,codegen_1$4.not)(c),(function(){return t.break()}))}))}))}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});var util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code:function(e){var t=e.gen,r=e.schema,a=e.it;if((0,util_1$5.alwaysValidSchema)(a,r))e.fail();else{var n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,(function(){return e.reset()}),(function(){return e.error()}))}},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});var code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});var codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:function(e){var t=e.params;return codegen_1$3._(_templateObject160,t.passing)}},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code:function(e){var t=e.gen,r=e.schema,a=e.parentSchema,n=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");if(!n.opts.discriminator||!a.discriminator){var o=r,i=t.let("valid",!1),s=t.let("passing",null),l=t.name("_valid");e.setParams({passing:s}),t.block((function(){o.forEach((function(r,a){var o=void 0;(0,util_1$4.alwaysValidSchema)(n,r)?t.var(l,!0):o=e.subschema({keyword:"oneOf",schemaProp:a,compositeRule:!0},l),a>0&&t.if(codegen_1$3._(_templateObject72,l,i)).assign(i,!1).assign(s,codegen_1$3._(_templateObject161,s,a)).else(),t.if(l,(function(){t.assign(i,!0),t.assign(s,a),o&&e.mergeEvaluated(o,codegen_1$3.Name)}))}))})),e.result(i,(function(){return e.reset()}),(function(){return e.error(!0)}))}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});var util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code:function(e){var t=e.gen,r=e.schema,a=e.it;if(!Array.isArray(r))throw new Error("ajv implementation error");var n=t.name("valid");r.forEach((function(t,r){if(!(0,util_1$3.alwaysValidSchema)(a,t)){var o=e.subschema({keyword:"allOf",schemaProp:r},n);e.ok(n),e.mergeEvaluated(o)}}))}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});var codegen_1$2=codegen,util_1$2=util,error$2={message:function(e){var t=e.params;return codegen_1$2.str(_templateObject162,t.ifClause)},params:function(e){var t=e.params;return codegen_1$2._(_templateObject163,t.ifClause)}},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code:function(e){var t=e.gen,r=e.parentSchema,a=e.it;void 0===r.then&&void 0===r.else&&(0,util_1$2.checkStrictMode)(a,'"if" without "then" and "else" is ignored');var n=hasSchema(a,"then"),o=hasSchema(a,"else");if(n||o){var i=t.let("valid",!0),s=t.name("_valid");if(function(){var t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);e.mergeEvaluated(t)}(),e.reset(),n&&o){var l=t.let("ifClause");e.setParams({ifClause:l}),t.if(s,u("then",l),u("else",l))}else n?t.if(s,u("then")):t.if((0,codegen_1$2.not)(s),u("else"));e.pass(i,(function(){return e.error(!0)}))}function u(r,a){return function(){var n=e.subschema({keyword:r},s);t.assign(i,s),e.mergeValidEvaluated(n,i),a?t.assign(a,codegen_1$2._(_templateObject14,r)):e.setParams({ifClause:r})}}}};function hasSchema(e,t){var r=e.schema[t];return void 0!==r&&!(0,util_1$2.alwaysValidSchema)(e,r)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});var util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code:function(e){var t=e.keyword,r=e.parentSchema,a=e.it;void 0===r.if&&(0,util_1$1.checkStrictMode)(a,'"'+t+'" without "if" is ignored')}};thenElse.default=def$2,Object.defineProperty(applicator,"__esModule",{value:!0});var additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return e?t.push(prefixItems_1.default,items2020_1.default):t.push(additionalItems_1.default,items_1.default),t.push(contains_1.default),t}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});var codegen_1$1=codegen,error$1={message:function(e){var t=e.schemaCode;return codegen_1$1.str(_templateObject164,t)},params:function(e){var t=e.schemaCode;return codegen_1$1._(_templateObject165,t)}},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code:function(e,t){var r=e.gen,a=e.data,n=e.$data,o=e.schema,i=e.schemaCode,s=e.it,l=s.opts,u=s.errSchemaPath,c=s.schemaEnv,d=s.self;l.validateFormats&&(n?function(){var n=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),o=r.const("fDef",codegen_1$1._(_templateObject9,n,i)),s=r.let("fType"),u=r.let("format");r.if(codegen_1$1._(_templateObject166,o,o),(function(){return r.assign(s,codegen_1$1._(_templateObject167,o)).assign(u,codegen_1$1._(_templateObject101,o))}),(function(){return r.assign(s,codegen_1$1._(_templateObject168)).assign(u,o)})),e.fail$data((0,codegen_1$1.or)(!1===l.strictSchema?codegen_1$1.nil:codegen_1$1._(_templateObject169,i,u),function(){var e=c.$async?codegen_1$1._(_templateObject170,o,u,a,u,a):codegen_1$1._(_templateObject76,u,a),r=codegen_1$1._(_templateObject171,u,e,u,a);return codegen_1$1._(_templateObject172,u,u,s,t,r)}()))}():function(){var n=d.formats[o];if(n){if(!0!==n){var i=function(e){var t=e instanceof RegExp?(0,codegen_1$1.regexpCode)(e):l.code.formats?codegen_1$1._(_templateObject,l.code.formats,(0,codegen_1$1.getProperty)(o)):void 0,a=r.scopeValue("formats",{key:o,ref:e,code:t});return"object"!=(void 0===e?"undefined":(0,_typeof4.default)(e))||e instanceof RegExp?["string",e,a]:[e.type||"string",e.validate,codegen_1$1._(_templateObject101,a)]}(n),s=(0,_slicedToArray4.default)(i,3),p=s[0],f=s[1],m=s[2];p===t&&e.pass(function(){if("object"==(void 0===n?"undefined":(0,_typeof4.default)(n))&&!(n instanceof RegExp)&&n.async){if(!c.$async)throw new Error("async format in sync schema");return codegen_1$1._(_templateObject173,m,a)}return"function"==typeof f?codegen_1$1._(_templateObject76,m,a):codegen_1$1._(_templateObject159,m,a)}())}}else!function(){if(!1!==l.strictSchema)throw new Error(e());function e(){return'unknown format "'+o+'" ignored in schema at path "'+u+'"'}d.logger.warn(e())}()}())}};format$1.default=def$1,Object.defineProperty(format$2,"__esModule",{value:!0});var format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(draft7,"__esModule",{value:!0});var core_1=core$1,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,(t=e.DiscrError||(e.DiscrError={})).Tag="tag",t.Mapping="mapping"}(types),Object.defineProperty(discriminator,"__esModule",{value:!0});var codegen_1=codegen,types_1=types,compile_1=compile,util_1=util,error={message:function(e){var t=e.params,r=t.discrError,a=t.tagName;return r===types_1.DiscrError.Tag?'tag "'+a+'" must be string':'value of tag "'+a+'" must be in oneOf'},params:function(e){var t=e.params,r=t.discrError,a=t.tag,n=t.tagName;return codegen_1._(_templateObject174,r,n,a)}},def={keyword:"discriminator",type:"object",schemaType:"object",error:error,code:function(e){var t=e.gen,r=e.data,a=e.schema,n=e.parentSchema,o=e.it,i=n.oneOf;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");var s=a.propertyName;if("string"!=typeof s)throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");var l=t.let("valid",!1),u=t.const("tag",codegen_1._(_templateObject,r,(0,codegen_1.getProperty)(s)));function c(r){var a=t.name("valid"),n=e.subschema({keyword:"oneOf",schemaProp:r},a);return e.mergeEvaluated(n,codegen_1.Name),a}t.if(codegen_1._(_templateObject130,u),(function(){return function(){var r=function(){for(var e,t={},r=d(n),a=!0,l=0;l<i.length;l++){var u=i[l];(null==u?void 0:u.$ref)&&!(0,util_1.schemaHasRulesButRef)(u,o.self.RULES)&&((u=compile_1.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,null==u?void 0:u.$ref))instanceof compile_1.SchemaEnv&&(u=u.schema));var c=null===(e=null==u?void 0:u.properties)||void 0===e?void 0:e[s];if("object"!=(void 0===c?"undefined":(0,_typeof4.default)(c)))throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'+s+'"');a=a&&(r||d(u)),p(c,l)}if(!a)throw new Error('discriminator: "'+s+'" must be required');return t;function d(e){var t=e.required;return Array.isArray(t)&&t.includes(s)}function p(e,t){if(e.const)f(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'+s+'" must have "const" or "enum"');var r=!0,a=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)(e.enum);!(r=(o=i.next()).done);r=!0){f(o.value,t)}}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}}}function f(e,r){if("string"!=typeof e||e in t)throw new Error('discriminator: "'+s+'" values must be unique strings');t[e]=r}}();for(var a in t.if(!1),r)t.elseIf(codegen_1._(_templateObject93,u,a)),t.assign(l,c(r[a]));t.else(),e.error(!1,{discrError:types_1.DiscrError.Mapping,tag:u,tagName:s}),t.endIf()}()}),(function(){return e.error(!1,{discrError:types_1.DiscrError.Tag,tag:u,tagName:s})})),e.ok(l)}};discriminator.default=def;var $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema:$schema,$id:$id,title:title,definitions:definitions,type:type,properties:properties,default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var r=draft7,a=discriminator,n=require$$3,o=["/properties"],i="http://json-schema.org/draft-07/schema",s=function(e){function t(){return(0,_classCallCheck4.default)(this,t),(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).apply(this,arguments))}return(0,_inherits3.default)(t,e),(0,_createClass4.default)(t,[{key:"_addVocabularies",value:function(){var e=this;(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"_addVocabularies",this).call(this),r.default.forEach((function(t){return e.addVocabulary(t)})),this.opts.discriminator&&this.addKeyword(a.default)}},{key:"_addDefaultMetaSchema",value:function(){if((0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"_addDefaultMetaSchema",this).call(this),this.opts.meta){var e=this.opts.$data?this.$dataMetaSchema(n,o):n;this.addMetaSchema(e,i,!1),this.refs["http://json-schema.org/schema"]=i}}},{key:"defaultMeta",value:function(){return this.opts.defaultMeta=(0,_get3.default)(t.prototype.__proto__||(0,_getPrototypeOf2.default)(t.prototype),"defaultMeta",this).call(this)||(this.getSchema(i)?i:void 0)}}]),t}(core$2.default);e.exports=t=s,Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var l=validate$1;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=codegen;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}})}(ajv$1,ajv$1.exports);var Ajv=getDefaultExportFromCjs(ajv$1.exports),ajv=new Ajv({strict:!1}),VALIDATOR="validator",OWN_RULE_PROPERTY="ui:rules",DEBUG_PREFIX="[bk-schema-form-validator]",throwErr=function(e){throw new Error("".concat(DEBUG_PREFIX," ").concat(e))},globalRules=new _map2.default,registryGlobalRules=function(e){try{if(!e)return;(null==e?void 0:e.constructor)!==Object&&throwErr("global rules must be an object"),(0,_keys2.default)(e).forEach((function(t){var r=e[t];hasOwnProperty(r,VALIDATOR)||throwErr("'".concat(t,"' rule must have a validator property"));var a=r[VALIDATOR];isExpression(a)||isRegExp(a)||(null==a?void 0:a.constructor)===Function||throwErr("'".concat(t,"' must be one of expression or regexp or function")),globalRules.set(t,r)}))}catch(e){throwErr(e)}},formItems=new _map2.default,registryFormItems=function(e,t){formItems.set(e,{instance:t})},validate=function(e,t){var r=e;"string"==typeof e&&((r=globalRules.get(e))||throwErr("'".concat(e," is not a valid global rule, you can registry it to global rules node or use form item own custom rules")));var a=r,n=a.validator,o=a.message,i=!0;return isExpression(n)?i=executeExpression(n,t):n.constructor===Function&&(i=n(t)),{valid:i,message:o}},validateFormItem=function(e){var t,r=formItems.get(e);if(!r)return!0;var a,n=r.instance,o=n.schema,i=ajv.compile(o);if(!i(n.value))return n.setState("error",!0),n.setErrorTips(null===(a=i.errors)||void 0===a?void 0:a.map((function(e){return e.message}))),!1;var s=null===(t=n.schema)||void 0===t?void 0:t[OWN_RULE_PROPERTY];if(!s)return!0;var l,u=!1,c="",d=_createForOfIteratorHelper(s);try{for(d.s();!(l=d.n()).done;){var p=l.value,f=validate(p,n);if(!f.valid){u=!0,c=f.message;break}}}catch(e){d.e(e)}finally{d.f()}return n.setState("error",u),n.setErrorTips(c),!u},validateForm=function(){var e=!0;return formItems.forEach((function(t,r){validateFormItem(r)||(e=!1)})),e},dispatchValidate=function(e){return validateFormItem(e)},FormEvent=function(){function e(){_classCallCheck(this,e),this.callbacks=void 0,this.callbacks=(0,_create2.default)(null)}return _createClass(e,[{key:"on",value:function(e,t,r){return e in this.callbacks||(this.callbacks[e]={}),t in this.callbacks[e]||(this.callbacks[e][t]=[]),this.callbacks[e][t].push(r),this}},{key:"off",value:function(e,t,r){if(e&&t)if(e&&!t)delete this.callbacks[e];else if(e&&t&&!r)delete this.callbacks[e][t];else{var a=this.callbacks[e][t];for(var n in a)r===a[n]&&a.splice(Number(n),1)}else this.callbacks=(0,_create2.default)(null);return this}},{key:"once",value:function(e,t,r){var a=this;function n(){r.apply(void 0,arguments),a.off(e,t,n)}return n.fn=r,this.on(e,t,n),this}},{key:"emit",value:function(e,t){if(this.callbacks[e]&&t in this.callbacks[e]){for(var r=_toConsumableArray(this.callbacks[e][t]),a=arguments.length,n=new Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];var i,s=_createForOfIteratorHelper(r);try{for(s.s();!(i=s.n()).done;){var l=i.value;l.apply(void 0,n)}}catch(e){s.e(e)}finally{s.f()}}}}]),e}(),events=new FormEvent,_excluded$2=["url","params"],_excluded2=["name"],Widget=Vue__default.default.extend({name:"Widget",props:props,data:function(){return{loading:!1,datasource:Schema.resolveDefaultDatasource(this.schema),formItemProps:{},state:{visible:!0,disabled:!1,readonly:!1,error:!1},errorTips:""}},computed:{widgetNode:function(){return widgetTree.widgetMap[this.path]}},watch:{value:{handler:function(e,t){var r=this;deepEquals(e,t)||setTimeout((function(){reactionDispatch(r.path,"valChange"),dispatchValidate(r.path)}),0)}}},created:function(){var e=this,t=Schema.getUiOptions(this.schema);this.formItemProps=_objectSpread2(_objectSpread2({},t),{},{label:t.showTitle?t.label||Path.getPathLastProp(this.path):"",required:this.required});var r=Schema.getUiComponent(this.schema),a=(0,_assign2.default)({},this.formItemProps,r.props||{});(0,_keys2.default)(a).forEach((function(t){(0,_has2.default)(e.state,t)&&e.setState(t,a[t])})),widgetTree.addWidgetNode(this.path,this),registryFormItems(this.path,this)},mounted:function(){reactionRegister(this.path,this.schema["ui:reactions"]),reactionDispatch(this.path,"valChange"),reactionDispatch(this.path,"lifetime/init")},beforeDestroy:function(){widgetTree.removeWidgetNode(this.path,this)},methods:{setState:function(e,t){(0,_has2.default)(this.state,e)?this.state[e]=t:"value"===e?this.$emit("input",{path:this.path,value:t}):console.warn("Unsupported ".concat(e," state, please check"))},loadDataSource:function(){var e=this;return _asyncToGenerator(_regenerator2.default.mark((function t(){var r,a,n,o,i,s,l,u,c,d,p,f,m;return _regenerator2.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(r=e.schema)||void 0===r||null===(a=r["ui:component"])||void 0===a||null===(n=a.props)||void 0===n?void 0:n.remoteConfig)){t.next=18;break}return i=o.url,s=o.params,l=_objectWithoutProperties(o,_excluded$2),u=e.httpAdapter,c=u.request,d=void 0===c?request:c,p=u.responseParse,t.prev=4,e.loading=!0,f=executeExpression(i,e),m=isObj(s)?executeExpression(s,e):s,t.next=10,d(f,_objectSpread2(_objectSpread2({},l),{},{params:m,responseParse:p}));case 10:e.datasource=t.sent,e.loading=!1,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),e.loading=!1,console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()},setErrorTips:function(e){this.errorTips=e},getValue:function(e){return Path.getPathVal(this.rootData,e)}},render:function(e){var t,r,a,n,o,i,s=Schema.getUiComponent(this.schema),l=s.name,u=_objectWithoutProperties(s,_excluded2),c=_objectSpread2(_objectSpread2({},this.$props),{},{loading:this.loading,value:this.value}),d=this,p=registry.getComponent(l)||l||Schema.getDefaultWidget(this.schema),f=(null===(t=events.callbacks)||void 0===t?void 0:t[this.path])||{},m=null!==(r=null===(a=(n=this.$scopedSlots).default)||void 0===a?void 0:a.call(n,{path:this.path}))&&void 0!==r?r:e(p,mergeDeep({props:_objectSpread2({},c),attrs:_objectSpread2({},u.props||{}),on:_objectSpread2(_objectSpread2({},f),{},{input:[].concat(_toConsumableArray(f.input||[]),[function(e){d.$emit("input",{path:d.path,value:e})}]),click:function(){reactionDispatch(d.path,"effect/click")}})},mergeDeep(u,{props:_objectSpread2(_objectSpread2({},this.state),{},{datasource:this.datasource}),attrs:_objectSpread2({},this.state)})));return e(registry.getBaseWidget("form-item"),{props:this.formItemProps,style:_objectSpread2(_objectSpread2(_objectSpread2({},this.layout.item||{}),this.layout.container||{}),{},{display:this.state.visible?"":"none"}),class:{"bk-schema-form-item--error":this.state.error}},[m,null===(o=(i=this.$scopedSlots).suffix)||void 0===o?void 0:o.call(i,{path:this.path,schema:this.schema}),this.removeable&&e("span",{class:["bk-schema-form-group-delete"],style:{right:"-20px",top:"0px"},on:{click:function(){d.$emit("remove",d.path)}}},[e("i",{class:["bk-icon icon-close3-shape"]})]),this.state.error?e("p",{class:"bk-schema-form-item__error-tips"},this.errorTips):null,this.formItemProps.tips?e("p",{slot:"tip",class:["mt5","mb0","f12"],style:{color:"#5e6d82",lineHeight:"1.5em"}},this.formItemProps.tips):null])}}),StringField=Vue__default.default.extend({name:"StringField",functional:!0,props:props,render:function(e,t){return e(Widget,_objectSpread2({},t.data))}}),NumberField=Vue__default.default.extend({name:"NumberField",functional:!0,props:props,render:function(e,t){var r;return e(StringField,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:{type:"number",min:"integer"===(null===(r=t.props.schema)||void 0===r?void 0:r.type)?0:-1/0}}},t.props.schema)}),on:_objectSpread2(_objectSpread2({},t.data.on||{}),{},{input:function(e){var r,a,n,o;"function"==typeof(null===(r=t.data)||void 0===r||null===(a=r.on)||void 0===a?void 0:a.input)&&(null===(n=t.data)||void 0===n||null===(o=n.on)||void 0===o||o.input(_objectSpread2(_objectSpread2({},e),{},{value:Number(e.value)||0})))}})}))}}),_excluded$1=["name"],ArrayWidget=Vue__default.default.extend({name:"ArrayWidget",props:props,mounted:function(){this.handleFillItem()},methods:{handleFillItem:function(){var e=this.schema.minItems,t=void 0===e?0:e;if(this.value.length<t){var r=Schema.getSchemaDefaultValue(this.schema.items),a=new Array(t-this.value.length).fill(r);this.$emit("input",{path:this.path,value:[].concat(_toConsumableArray(this.value),_toConsumableArray(a))})}},handleAddItem:function(){var e=Schema.getSchemaDefaultValue(this.schema.items),t=JSON.parse((0,_stringify2.default)(this.value||[]));t.push(e),this.$emit("input",{path:this.path,value:t})},handleDeleteItem:function(e){var t=Number(Path.getPathLastProp(e)),r=JSON.parse((0,_stringify2.default)(this.value||[]));r.splice(t,1),this.$emit("input",{path:this.path,value:r})}},render:function(e){var t=this,r=this,a=(Array.isArray(this.value)?this.value:[]).map((function(a,n){var o=Path.getCurPath(t.path,n);return e(SchemaField,{key:o,props:_objectSpread2(_objectSpread2({},t.$props),{},{schema:t.schema.items,path:o,layout:_objectSpread2(_objectSpread2({},t.layout),{},{item:{}}),removeable:!0}),on:_objectSpread2(_objectSpread2({},t.$listeners),{},{remove:function(e){r.handleDeleteItem(e)}})})})),n=Schema.getGroupWrap(this.schema),o=n.name,i=_objectWithoutProperties(n,_excluded$1);return e(o,mergeDeep({props:_objectSpread2(_objectSpread2({},this.$props),{},{layout:{},showTitle:!0}),style:_objectSpread2({},this.layout.item||{})},i),[].concat(_toConsumableArray(a),[e("span",{class:["bk-schema-form-group-add"],on:{click:function(){r.handleAddItem()}}},[e("i",{class:["bk-icon icon-plus-circle-shape mr5"]}),"添加"])]))}}),_excluded=["name"],ArrayField=Vue__default.default.extend({name:"ArrayField",functional:!0,props:props,render:function(e,t){var r=t.props,a=r.schema,n=r.path;if(Schema.isMultiSelect(a)||Schema.isCustomArrayWidget(a))return e(Widget,_objectSpread2(_objectSpread2({},t.data),{},{key:n,props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:{multiple:!0}}},t.props.schema)})}));if(Schema.isTupleArray(a)){var o=Schema.getGroupWrap(a),i=o.name,s=_objectWithoutProperties(o,_excluded),l=a.items.map((function(r,a){return e(SchemaField,_objectSpread2(_objectSpread2({},t.data),{},{key:Path.getCurPath(n,a),props:_objectSpread2(_objectSpread2({},t.props),{},{schema:r,path:Path.getCurPath(n,a)})}))}));return e(i,mergeDeep({props:_objectSpread2(_objectSpread2({},t.props),{},{path:n,showTitle:!0})},s),_toConsumableArray(l))}return e(ArrayWidget,_objectSpread2({},t.data))}}),BooleanField=Vue__default.default.extend({name:"BooleanField",functional:!0,props:props,render:function(e,t){var r=(t.props.schema["ui:component"]||{}).name,a={};if(["radio","select"].includes(r))a={datasource:[{label:"False",value:!1},{label:"True",value:!0}]};else if("checkbox"===r){var n;a={label:null===(n=t.props.schema)||void 0===n?void 0:n.title}}return e(Widget,_objectSpread2(_objectSpread2({},t.data),{},{props:_objectSpread2(_objectSpread2({},t.props),{},{schema:mergeDeep({"ui:component":{props:a}},t.props.schema)})}))}}),CheckboxWidget=Vue__default.default.extend({name:"CheckboxWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[Array,Boolean],default:function(){return[]}},label:{type:String,default:""}},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){var t=this;return Array.isArray(this.value)?e(registry.getBaseWidget("checkbox-group"),{on:{change:this.handleChange}},this.datasource.map((function(r){return e(registry.getBaseWidget("checkbox"),{key:r.value,class:["mr24"],props:_objectSpread2({value:r.value},t.$attrs)},r.label)}))):e(registry.getBaseWidget("checkbox"),{props:{value:this.value},on:{change:this.handleChange}},this.label)}}),SelectWidget=Vue__default.default.extend({name:"SelectWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[Array,String,Number,Boolean],default:""},loading:{type:Boolean,default:!1}},methods:{handleSelectChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("select"),{props:_objectSpread2({loading:this.loading,value:this.value},this.$attrs),on:{change:this.handleSelectChange}},this.datasource.map((function(t){return e(registry.getBaseWidget("option"),{key:t.value,props:{name:t.label,id:t.value}})})))}}),RadioWidget=Vue__default.default.extend({name:"RadioWidget",props:{datasource:{type:Array,default:function(){return[]}},value:{type:[String,Number,Boolean],default:""}},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("radio-group"),{props:{value:this.value},on:{change:this.handleChange}},this.datasource.map((function(t){return e(registry.getBaseWidget("radio"),{key:t.value,class:["mr24"],props:{value:t.value,label:t.label}},t.label)})))}}),ButtonWidget=Vue__default.default.extend({name:"ButtonWidget",props:{word:{type:String,default:""}},methods:{handleClick:function(){this.$emit("click")}},render:function(e){var t=this;return e(registry.getBaseWidget("button"),{props:_objectSpread2({},this.$attrs),on:{click:function(){t.handleClick()}}},this.word)}}),TableWidget=Vue__default.default.extend({name:"TableWidget",render:function(e){return e(registry.getBaseWidget("table"),{props:_objectSpread2({},this.$attrs)})}}),FieldGroupWrap=Vue__default.default.extend({name:"FieldGroupWrap",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1}}),created:function(){widgetTree.addWidgetNode(this.path,this)},beforeDestroy:function(){widgetTree.removeWidgetNode(this.path,this)},render:function(e){var t,r,a,n,o=_objectSpread2({position:"relative",border:this.border?"1px solid #dcdee5":"none"},(null===(t=this.layout)||void 0===t?void 0:t.item)||{}),i=_objectSpread2({},(null===(r=this.layout)||void 0===r?void 0:r.container)||{display:"grid",gridGap:"24px"}),s=this,l=(null===(a=this.schema)||void 0===a?void 0:a.title)||(null===(n=this.layout)||void 0===n?void 0:n.prop);return e("div",{class:["bk-schema-form-group",this.type],style:o},[l&&this.showTitle?e("span",{class:["bk-schema-form-group-title",this.type]},[l]):null,e("div",{style:i,class:"bk-schema-form-group-content"},[this.$slots.default]),this.removeable&&e("span",{class:["bk-schema-form-group-delete"],style:{right:"10px",top:"10px"},on:{click:function(){s.$emit("remove",s.path)}}},[e("i",{class:["bk-icon icon-close3-shape"]})])])}});function _extends(){return(_extends=_assign2.default||function(e){for(var t,r=1;r<arguments.length;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}var normalMerge=["attrs","props","domProps"],toArrayMerge=["class","style","directives"],functionalMerge=["on","nativeOn"],mergeJsxProps=function(e){return e.reduce((function(e,t){for(var r in t)if(e[r])if(-1!==normalMerge.indexOf(r))e[r]=_extends({},e[r],t[r]);else if(-1!==toArrayMerge.indexOf(r)){var a=e[r]instanceof Array?e[r]:[e[r]],n=t[r]instanceof Array?t[r]:[t[r]];e[r]=a.concat(n)}else if(-1!==functionalMerge.indexOf(r))for(var o in t[r])if(e[r][o]){var i=e[r][o]instanceof Array?e[r][o]:[e[r][o]],s=t[r][o]instanceof Array?t[r][o]:[t[r][o]];e[r][o]=i.concat(s)}else e[r][o]=t[r][o];else if("hook"==r)for(var l in t[r])e[r][l]=e[r][l]?mergeFn(e[r][l],t[r][l]):t[r][l];else e[r]=t[r];else e[r]=t[r];return e}),{})},mergeFn=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},helper=mergeJsxProps,NoTitleArray=Vue__default.default.extend({name:"NoTitleArray",props:props,mounted:function(){var e=this.schema.minItems,t=void 0===e?0:e;if(this.value.length<t){var r=Schema.getSchemaDefaultValue(this.schema.items),a=new Array(t-this.value.length).fill(r);this.$emit("input",[].concat(_toConsumableArray(this.value),_toConsumableArray(a)))}},methods:{handleAddItem:function(){var e=Schema.getSchemaDefaultValue(this.schema.items);this.$emit("input",[].concat(_toConsumableArray(this.value),[e]))},handleRemoveItem:function(e){var t=JSON.parse((0,_stringify2.default)(this.value));t.splice(e,1),this.$emit("input",t)},handleInput:function(e){var t=e.path,r=e.value,a=Path.getSubPath(this.path,t),n=Path.setPathValue(this.value,a,r);this.$emit("input",n)}},render:function(e){var t,r,a=this,n={"font-size":"16px",color:"#979ba5",cursor:"pointer"},o=null===(t=this.schema)||void 0===t||null===(r=t.items)||void 0===r?void 0:r.properties,i=(0,_keys2.default)(o||{}).length,s=o?new Array(i).fill("1fr").concat("24px").join(" "):"1fr 24px",l=_objectSpread2({},this.layout.container||{display:"grid",gridGap:"24px","grid-template-columns":s}),u=this,c=function(e){return mergeDeep({"ui:component":{props:{placeholder:e.title}},"ui:props":{showTitle:!1,labelWidth:.1}},e)},d=function(t){var r=t.path,n=t.schema,o=t.required,i=t.layout;return e(SchemaField,{key:r,props:_objectSpread2(_objectSpread2({},a.$props),{},{schema:n,required:o,path:r,layout:i}),on:{input:function(e){u.handleInput(e)}}})};return e("div",[this.value.map((function(t,r){var i,s=Path.getCurPath(a.path,"".concat(r));return e(FieldGroupWrap,helper([{},{props:_objectSpread2(_objectSpread2({},a.$props),{},{path:s,layout:_objectSpread2(_objectSpread2({},a.layout),{},{container:_objectSpread2({},l)})})},{class:"mb10"}]),[o?(0,_keys2.default)(o).map((function(e){var t=o[e],n=Path.getCurPath(a.path,"".concat(r,".").concat(e)),i=n.split(".").pop(),s=Layout.findLayoutByProp(i,a.layout.group||[])||{};return d({path:n,schema:c(t),layout:s,required:Schema.isRequired(t,e)})})):d({path:Path.getCurPath(a.path,r),schema:c((null===(i=a.schema)||void 0===i?void 0:i.items)||{}),layout:{},required:!1}),e("span",{style:n,on:{click:function(){return a.handleRemoveItem(r)}}},[e("i",{class:"bk-icon icon-minus-line"})])])})),e("span",{on:{click:this.handleAddItem},style:n},[e("i",{class:"bk-icon icon-plus-line"})])])}}),TabGroupWidget=Vue__default.default.extend({name:"TabWidget",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1}}),render:function(e){var t,r=this,a=_objectSpread2(_objectSpread2({},this.$props),{},{layout:_objectSpread2(_objectSpread2({},this.layout),{},{container:{}}),title:this.schema.title}),n=this,o=orderProperties((0,_keys2.default)((null===(t=this.schema)||void 0===t?void 0:t.properties)||{}),this.schema["ui:order"]);return e(FieldGroupWrap,{props:_objectSpread2({},a),on:{remove:function(e){n.$emit("remove",e)}}},[e(registry.getBaseWidget("tab"),{},o.map((function(t){var a,n,o=null===(a=r.schema)||void 0===a||null===(n=a.properties)||void 0===n?void 0:n[t],i=Path.getCurPath(r.path,t),s=i.split(".").pop(),l=Layout.findLayoutByProp(s,r.layout.group||[])||{};return e(registry.getBaseWidget("tab-panel"),{key:t,props:{name:t,label:null==o?void 0:o.title}},[e(SchemaField,{key:i,props:_objectSpread2(_objectSpread2({},r.$props),{},{schema:o,required:Schema.isRequired(o,t),path:i,layout:l,removeable:!1}),on:_objectSpread2({},r.$listeners)})])})))])}}),CollapseGroupWidget=Vue__default.default.extend({name:"CollapseWidget",props:_objectSpread2(_objectSpread2({},props),{},{type:{type:String,default:"default",validator:function(e){return["default","normal","card"].includes(e)}},showTitle:{type:Boolean,default:!1},border:{type:Boolean,default:!1}}),data:function(){return{activeName:[]}},render:function(e){var t,r=this,a={background:"#f5f7fa","border-radius":"2px",padding:"0 14px",height:"100%",display:"flex","align-items":"center"},n={"font-size":"16px",display:"inline-block",transition:"all 0.5s ease"},o=_objectSpread2(_objectSpread2({},this.$props),{},{layout:_objectSpread2(_objectSpread2({},this.layout),{},{container:{}}),title:this.schema.title}),i=orderProperties((0,_keys2.default)((null===(t=this.schema)||void 0===t?void 0:t.properties)||{}),this.schema["ui:order"]).map((function(t){var o,i,s=null===(o=r.schema)||void 0===o||null===(i=o.properties)||void 0===i?void 0:i[t],l=Path.getCurPath(r.path,t),u=l.split(".").pop(),c=Layout.findLayoutByProp(u,r.layout.group||[])||{};return e(registry.getBaseWidget("collapse-item"),{key:t,props:{hideArrow:!0,name:t},class:["mb15"]},[e("div",{style:a},[e("i",{class:["bk-icon icon-down-shape mr5"],style:_objectSpread2(_objectSpread2({},n),{},{transform:r.activeName.includes(t)?"rotate(0deg)":"rotate(-90deg)"})}),s.title]),e("template",{slot:"content"},[e(SchemaField,{key:l,props:_objectSpread2(_objectSpread2({},r.$props),{},{schema:s,required:Schema.isRequired(s,t),path:l,layout:c,removeable:!1}),on:_objectSpread2({},r.$listeners)})])])})),s=this;return e(FieldGroupWrap,{props:_objectSpread2({},o)},[e(registry.getBaseWidget("collapse"),{style:{},props:{value:this.activeName},on:{input:function(e){s.activeName=e}}},i)])}}),SwitcherWidget=Vue__default.default.extend({name:"SwitchWidget",props:{value:Boolean},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("switcher"),{props:_objectSpread2({value:this.value},this.$attrs),on:{change:this.handleChange}})}}),ColorWidget=Vue__default.default.extend({name:"ColorPicker",props:{value:String},methods:{handleChange:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("color-picker"),{props:_objectSpread2({value:this.value},this.$attrs),on:{change:this.handleChange}})}}),UnitInputWidget=Vue__default.default.extend({name:"UnitInput",props:{value:[String,Number],unit:{type:String,default:""}},methods:{handleInput:function(e){this.$emit("input",e)}},render:function(e){return e(registry.getBaseWidget("input"),{props:_objectSpread2({value:this.value},this.$attrs),on:{input:this.handleInput}},[this.unit&&e("div",{slot:"append",class:["group-text"]},this.unit)])}});function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var css_248z="";styleInject(css_248z);var defaultOptions={namespace:"bk",components:{button:ButtonWidget,select:SelectWidget,radio:RadioWidget,checkbox:CheckboxWidget,table:TableWidget,group:FieldGroupWrap,noTitleArray:NoTitleArray,tab:TabGroupWidget,collapse:CollapseGroupWidget,switcher:SwitcherWidget,color:ColorWidget,unitInput:UnitInputWidget},fields:{object:ObjectField,string:StringField,any:"",array:ArrayField,boolean:BooleanField,null:"",integer:NumberField,number:NumberField}};function createForm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=mergeDeep(defaultOptions,e),r=t.namespace,a=t.components,n=t.fields,o=t.baseWidgets,i=void 0===o?{}:o;return Registry.namespace=r,registry.addComponentsMap(a),registry.addFieldsMap(n),registry.addBaseWidgets(i),Vue__default.default.extend({name:"BkuiForm",props:props$1,data:function(){return{rootData:{}}},watch:{schema:function(){this.initFormData()},context:{handler:function(e){Registry.context=e,hasOwnProperty(e,"rules")&&registryGlobalRules(e.rules)},immediate:!0},rules:{immediate:!0,handler:function(e){registryGlobalRules(e)}}},created:function(){this.initFormData()},methods:{initFormData:function(){this.rootData=merge(Schema.getSchemaDefaultValue(createProxy(this.schema,this))||{},this.value),this.emitFormValueChange(this.rootData,this.value)},emitFormValueChange:function(e,t){deepEquals(e,t)||(this.rootData=e,this.$emit("input",e),this.$emit("change",e,t))},validateForm:validateForm,validateFormItem:validateFormItem},render:function(e){var t=this;return e(registry.getBaseWidget("form"),{ref:"bkui-form",props:{model:this.value,formType:this.formType},class:{"bk-schema-form":!0},style:{width:"number"==typeof this.width?"".concat(this.width,"px"):this.width}},[e(SchemaField,{props:_objectSpread2(_objectSpread2({},this.$props),{},{schema:createProxy(this.schema,this),rootData:this.rootData,value:this.value,layout:new Layout(this.layout).layout}),scopedSlots:_objectSpread2({},this.$scopedSlots),on:{input:function(e){var r=e.path,a=void 0===r?"":r,n=e.value;if(a){var o=Path.setPathValue(t.rootData,a,n);t.emitFormValueChange(o,t.value)}else console.warn("widget path is empty")}}})])}})}Vue__default.default.use(bkMagic__namespace),exports.default=createForm,exports.events=events,Object.defineProperty(exports,"__esModule",{value:!0})}))}).call(this,__webpack_require__("yLpj"))},ZcFe:function(e,t,r){"use strict";r.r(t);var a=r("BaUt"),n=r("ZrpC");for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("2mmY"),r("o2P+");var i=r("KHd+"),s=Object(i.a)(n.default,a.a,a.b,!1,null,"03c3f61e",null);t.default=s.exports},ZrpC:function(e,t,r){"use strict";r.r(t);var a=r("idr5"),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},h0Id:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){return(0,this._self._c)("section",{staticClass:"code-editor"})},n=[];a._withStripped=!0},"hk/f":function(e,t,r){"use strict";r.r(t);var a=r("h0Id"),n=r("C6tm");for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("KV7u");var i=r("KHd+"),s=Object(i.a)(n.default,a.a,a.b,!1,null,"7586a812",null);t.default=s.exports},idr5:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _defineProperty2=__webpack_require__("YEIV"),_defineProperty3=_interopRequireDefault(_defineProperty2),_assign=__webpack_require__("P2sY"),_assign2=_interopRequireDefault(_assign),_stringify=__webpack_require__("gDS+"),_stringify2=_interopRequireDefault(_stringify),_entries=__webpack_require__("oF3Q"),_entries2=_interopRequireDefault(_entries),_getIterator2=__webpack_require__("FyfS"),_getIterator3=_interopRequireDefault(_getIterator2),_slicedToArray2=__webpack_require__("sk9p"),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_regenerator=__webpack_require__("14Xm"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__("D3Ub"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_extends2=__webpack_require__("QbLZ"),_extends3=_interopRequireDefault(_extends2),_keys=__webpack_require__("GQeE"),_keys2=_interopRequireDefault(_keys),_values=__webpack_require__("/f1G"),_values2=_interopRequireDefault(_values),_vuex=__webpack_require__("L2JU"),_FullCodeEditor=__webpack_require__("ARuS"),_FullCodeEditor2=_interopRequireDefault(_FullCodeEditor),_package=__webpack_require__("kiQV"),_package2=_interopRequireDefault(_package),_bkuiFormUmdMin=__webpack_require__("XPlO"),_bkuiFormUmdMin2=_interopRequireDefault(_bkuiFormUmdMin);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}__webpack_require__("6aoH");var BkuiForm=(0,_bkuiFormUmdMin2.default)();exports.default={components:{FullCodeEditor:_FullCodeEditor2.default,BkuiForm:BkuiForm},data:function(){return{pluginVersion:_package2.default.version,renderKey:0,formMode:"renderform",renderConfig:[],renderOption:{showRequired:!0,showGroup:!1,showLabel:!0,showHook:!1,showDesc:!0,formEdit:!0},inputSchema:{},inputFormData:{},renderData:{},contextData:{},isLoading:!0,selectVersion:"",radioData:!0,pluginCode:"",versionList:[],executionInfo:[{label:"trace_id",type:"trace_id",value:""},{label:"触发错误信息",type:"message",value:""},{label:"执行错误信息",type:"err",value:""},{label:"插件状态",type:"state",value:""},{label:"插件输出",type:"outputs",value:""}],logInfo:"",executeLoading:!1,logLoading:!1}},computed:{isSaveDisabled:function(){var e=(0,_values2.default)(this.renderData).some((function(e){return e})),t=(0,_values2.default)(this.contextData).some((function(e){return e.value}));return!e&&!t},contextObj:function(){var e=this,t={};return(0,_keys2.default)(this.contextData).forEach((function(r){t[r]=e.contextData[r].value})),t}},watch:{executeLoading:function(e){this.renderKey=(new Date).getTime(),this.renderOption.formEdit=!e}},created:function created(){var radioData=localStorage.getItem("radioData");void 0!==radioData&&(this.radioData=eval(radioData)),this.init(),window.addEventListener("beforeunload",this.updateHandler)},destroyed:function(){window.removeEventListener("beforeunload",this.updateHandler)},methods:(0,_extends3.default)({},(0,_vuex.mapActions)("pluginDebugPanel/",["getVersionList","moduleDetail","executionModule","executionLog","pollingSchedule"]),{init:function(){var e=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark((function t(){var r,a,n,o,i;return _regenerator2.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getVersionList();case 3:(r=t.sent).result&&(a=r.data,n=a.versions,o=a.code,e.versionList=n,i=e.$route.query,e.selectVersion=i.version||n[n.length-1],e.pluginCode=o,document.title=o+"-debug-panel"),e.getModuleDetail();case 6:case"end":return t.stop()}}),t,e)})))()},getContextValue:function(e){return this.contextData[e]&&(this.contextData[e].value||"boolean"===this.contextData[e].type)?this.contextData[e].value:""},getModuleDetail:function getModuleDetail(){var _this3=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark((function _callee2(){var moduleResp,context,renderFrom,contextInputs,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_ref,_ref2,key,values;return _regenerator2.default.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,_this3.moduleDetail({version:_this3.selectVersion});case 3:if(moduleResp=_context2.sent,!moduleResp.result){_context2.next=40;break}if(context=window.$.context,context&&context.bk_plugin_api_host&&(context.getContextValue=_this3.getContextValue,context.bk_plugin_api_host[_this3.pluginCode]=window.location.href.split("?")[0]),renderFrom=moduleResp.data.forms.renderform,!renderFrom){_context2.next=16;break}if(eval(renderFrom),window.$.atoms){_context2.next=12;break}return _context2.abrupt("return");case 12:_this3.renderConfig=(0,_values2.default)(window.$.atoms).reduce((function(e,t){return e=e.concat(t)}),[]),_this3.formMode="renderform",_context2.next=18;break;case 16:_this3.inputSchema=moduleResp.data.inputs,_this3.formMode="bkuiform";case 18:for(contextInputs=moduleResp.data.context_inputs,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context2.prev=22,_iterator=(0,_getIterator3.default)((0,_entries2.default)(contextInputs.properties));!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_ref=_step.value,_ref2=(0,_slicedToArray3.default)(_ref,2),key=_ref2[0],values=_ref2[1],values.value="",values.required=contextInputs.required.includes(key),"integer"===values.type?values.type="number":"string"===values.type&&(values.type="text");_context2.next=30;break;case 26:_context2.prev=26,_context2.t0=_context2.catch(22),_didIteratorError=!0,_iteratorError=_context2.t0;case 30:_context2.prev=30,_context2.prev=31,!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 33:if(_context2.prev=33,!_didIteratorError){_context2.next=36;break}throw _iteratorError;case 36:return _context2.finish(33);case 37:return _context2.finish(30);case 38:_this3.contextData=contextInputs.properties,_this3.setLocalStorage();case 40:_context2.next=45;break;case 42:_context2.prev=42,_context2.t1=_context2.catch(0),console.warn(_context2.t1);case 45:return _context2.prev=45,_this3.isLoading=!1,_context2.finish(45);case 48:case"end":return _context2.stop()}}),_callee2,_this3,[[0,42,45,48],[22,26,30,38],[31,,33,37]])})))()},setLocalStorage:function(){var e=this,t=localStorage.getItem("formData");if(t&&(t=JSON.parse(t),this.selectVersion in t)){var r=t[this.selectVersion],a=r.renderData,n=r.contextData;this.$nextTick((function(){var t=!0,r=!1,n=void 0;try{for(var o,i=(0,_getIterator3.default)((0,_entries2.default)(a));!(t=(o=i.next()).done);t=!0){var s=o.value,l=(0,_slicedToArray3.default)(s,2),u=l[0],c=l[1];u in e.renderData&&(e.renderData[u]=c)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}));var o=!0,i=!1,s=void 0;try{for(var l,u=(0,_getIterator3.default)((0,_entries2.default)(n));!(o=(l=u.next()).done);o=!0){var c=l.value,d=(0,_slicedToArray3.default)(c,2),p=d[0],f=d[1];p in this.contextData&&(this.contextData[p].value=f.value)}}catch(e){i=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}1===(0,_keys2.default)(t).length?localStorage.removeItem("formData"):(this.$delete(t,this.selectVersion),localStorage.setItem("formData",(0,_stringify2.default)(t)))}},handleVersionChange:function(e,t){this.isLoading||(this.isLoading=!0,this.isSaveDisabled||this.handleSavePlugin(t),window.$.atoms={},this.renderData={},this.executionInfo.forEach((function(e){e.value=""})),this.logInfo="",this.$router.push({query:{version:e}}),this.getModuleDetail())},handleRadioChange:function(e){localStorage.setItem("radioData",e)},handleExecutionPlugin:function(){var e=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark((function t(){var r,a,n,o,i,s,l,u,c,d,p,f,m;return _regenerator2.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e.executeLoading=!0,e.logLoading=!0,r={},a=!0,n=!1,o=void 0,t.prev=7,i=(0,_getIterator3.default)((0,_entries2.default)(e.contextData));!(a=(s=i.next()).done);a=!0)l=s.value,u=(0,_slicedToArray3.default)(l,2),c=u[0],d=u[1],r[c]=d.value;t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),n=!0,o=t.t0;case 15:t.prev=15,t.prev=16,!a&&i.return&&i.return();case 18:if(t.prev=18,!n){t.next=21;break}throw o;case 21:return t.finish(18);case 22:return t.finish(15);case 23:return p="renderform"===e.formMode?e.renderData:e.inputFormData,f={inputs:p,context:r},t.next=27,e.executionModule({forms:f,version:e.selectVersion});case 27:if(m=t.sent,(0,_assign2.default)(m,m.data),e.executionInfo.forEach((function(t){var r=m[t.type];if(r)if("state"===t.type){var a=e.getExecutionState(r);t.value=a}else t.value="outputs"===t.type?(0,_stringify2.default)(r):"message"===t.type&&m.result?"":r})),![4,5].includes(m.state)){t.next=36;break}return t.next=33,e.getExecuteLog(m.trace_id);case 33:e.executeLoading=!1,t.next=37;break;case 36:e.pollingExecutionState(m.trace_id);case 37:t.next=44;break;case 39:t.prev=39,t.t1=t.catch(0),e.executeLoading=!1,e.logLoading=!1,console.warn(t.t1);case 44:case"end":return t.stop()}}),t,e,[[0,39],[7,11,15,23],[16,,18,22]])})))()},pollingExecutionState:function(e){var t=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark((function r(){var a;return _regenerator2.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.pollingSchedule({traceId:e});case 3:if((a=r.sent).result){r.next=9;break}return clearTimeout(t.timer),t.executeLoading=!1,t.$bkMessage({message:a.message,theme:"error"}),r.abrupt("return");case 9:if(t.executionInfo.forEach((function(e){var r=a.data[e.type];if(r)if("state"===e.type){var n=t.getExecutionState(r);e.value=n}else e.value="outputs"===e.type?(0,_stringify2.default)(r):"message"===e.type&&a.result?"":r})),![4,5].includes(a.data.state)){r.next=15;break}return t.executeLoading=!1,clearTimeout(t.timer),t.getExecuteLog(e),r.abrupt("return");case 15:t.timer=setTimeout((function(){t.getExecuteLog(e),t.pollingExecutionState(e)}),1e3),r.next=22;break;case 18:r.prev=18,r.t0=r.catch(0),console.warn(r.t0),t.executeLoading=!1;case 22:case"end":return r.stop()}}),r,t,[[0,18]])})))()},getExecuteLog:function(e){var t=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark((function r(){var a;return _regenerator2.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.executionLog({traceId:e});case 3:if((a=r.sent).result){r.next=6;break}return r.abrupt("return");case 6:t.logInfo=a.data.log,r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.warn(r.t0);case 12:return r.prev=12,t.logLoading=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,t,[[0,9,12,15]])})))()},getExecutionState:function(e){return 2===e?"POLL":3===e?"CALLBACK":4===e?"SUCCESS":5===e?"FAIL":""},updateHandler:function(){this.radioData&&this.handleSavePlugin()},handleSavePlugin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectVersion,t={renderData:this.renderData,contextData:this.contextData},r=localStorage.getItem("formData");r?(r=JSON.parse(r))[e]=t:r=(0,_defineProperty3.default)({},e,t),localStorage.setItem("formData",(0,_stringify2.default)(r))}})}},kiQV:function(e){e.exports=JSON.parse('{"name":"bk-plugin-debug-panel","version":"1.2.3","description":"bk-plugin-debug-panel","author":"bk","scripts":{"dev":"cross-env webpack-dev-server --progress --config ./build/webpack.dev.conf.js","build":"cross-env npm run build:production","build:development":"cross-env DEV_VAR=development webpack --config ./build/webpack.prod.conf.js","build:production":"cross-env DEV_VAR=production webpack --config ./build/webpack.prod.conf.js"},"dependencies":{"@babel/core":"^7.14.3","@blueking/bkcharts":"^2.0.6","@blueking/user-selector":"^1.0.5-beta.2","@icon-cool/bk-icon-guanwang":"0.0.4","@toast-ui/editor-plugin-code-syntax-highlight":"^1.0.0","@toast-ui/vue-editor":"^2.4.0","axios":"^0.21.1","bk-magic-vue":"2.2.17","element-ui":"^2.4.9","jquery":"^3.2.1","jsencrypt":"2.3.0","lodash":"^4.17.12","monaco-editor":"^0.20.0","monaco-editor-webpack-plugin":"^1.9.0","vue":"^2.6.11","vue-i18n":"^7.6.0","vue-router":"^2.8.1","vuex":"^2.4.0","xlsx":"^0.17.0"},"devDependencies":{"@babel/plugin-transform-runtime":"^7.14.3","autoprefixer":"^7.1.4","babel-cli":"^6.26.0","babel-core":"^6.26.3","babel-eslint":"8.2.6","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.2","babel-plugin-component":"^1.1.1","babel-plugin-istanbul":"^4.1.5","babel-plugin-lodash":"^3.2.11","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-plugin-transform-vue-jsx":"^3.7.0","babel-preset-env":"^1.6.0","babel-preset-stage-2":"^6.24.1","case-sensitive-paths-webpack-plugin":"^2.3.0","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^4.0.1","cross-env":"^5.0.5","css-loader":"^0.28.11","cssnano":"^3.10.0","eslint":"^5.15.1","eslint-config-standard":"12.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.1.2","eslint-plugin-import":"2.16.0","eslint-plugin-node":"8.0.1","eslint-plugin-promise":"4.0.1","eslint-plugin-standard":"4.0.0","eslint-plugin-vue":"5.2.2","expose-loader":"^0.7.5","file-loader":"^5.0.2","friendly-errors-webpack-plugin":"^1.6.1","happypack":"^5.0.1","html-webpack-plugin":"^3.2.0","lodash-webpack-plugin":"^0.11.4","mini-css-extract-plugin":"^0.9.0","node-sass":"^4.13.1","optimize-css-assets-webpack-plugin":"^5.0.3","resolve-url-loader":"^3.1.1","sass-loader":"^6.0.7","style-loader":"^0.18.2","terser-webpack-plugin":"^2.3.4","url-loader":"^3.0.0","vue-eslint-parser":"^7.0.0","vue-loader":"^15.8.3","vue-template-compiler":"^2.6.11","webpack":"^4.41.5","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-server":"^3.10.3","webpack-merge":"^4.2.2"},"engines":{"node":">= 4.0.0","npm":">= 3.0.0"},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}')},"o2P+":function(e,t,r){"use strict";r("JtHA")},ra2B:function(e,t,r){"use strict";r.r(t);var a=r("Rfx2"),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},tqn9:function(e,t,r){}}]);